<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gyakorló Kvíz - Az elektromos áramkörök</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: auto;
        }
        h1 {
            color: #D50000; /* Piros */
            text-align: center;
            border-bottom: 2px solid #D50000; /* Piros */
            padding-bottom: 10px;
        }
        #quiz-container {
            background-color: #ffffff; /* Fehér */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .question-block {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .question-block:last-of-type {
            border-bottom: none;
        }
        .question-text {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        .options-container label {
            display: block;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 1px solid #ddd;
        }
        .options-container label:hover {
            background-color: #f9f9f9;
        }
        .options-container input[type="radio"] {
            margin-right: 10px;
        }
        .explanation {
            display: none;
            margin-top: 15px;
            padding: 10px;
            background-color: #e8f5e9; /* Világos zöld */
            border-left: 4px solid #008751; /* Zöld */
            border-radius: 4px;
        }
        .control-panel {
            text-align: center;
            padding: 20px;
            background-color: #ffffff; /* Fehér */
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .pin-input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }
        .check-button {
            padding: 10px 20px;
            background-color: #D50000; /* Piros */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }
        .check-button:hover {
            background-color: #a30000; /* Sötétebb piros */
        }
        .results {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 15px;
        }
        /* Színkódok a kiértékeléshez */
        .correct-answer-reveal {
            background-color: #c8e6c9 !important; /* Zöld */
            border-color: #008751 !important; /* Zöld */
        }
        .student-incorrect {
            background-color: #f8d7da !important; /* Piros */
            border-color: #f5c6cb !important;
            color: #721c24 !important;
        }
        .admin-panel {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 5px;
            text-align: center;
        }
        .admin-panel h3 {
            margin-top: 0;
            color: #856404;
        }
    </style>
</head>
<body>

    <h1>Gyakorló Kvíz: Az elektromos áramkörök</h1>

    <div class="control-panel">
        <input type="password" class="pin-input" placeholder="PIN kód">
        <button class="check-button">Ellenőrzés</button>
        <div class="results"></div>
        <div class="admin-panel">
            <h3>Adminisztrációs Panel</h3>
            <p>A helyes válaszok és a magarázatok feloldva.</p>
            <p>Helyes válaszok eloszlása (a/b/c): <span class="dist-a"></span> / <span class="dist-b"></span> / <span class="dist-c"></span></p>
        </div>
    </div>

    <div id="quiz-container">
        <!-- A kvízkérdések ide generálódnak -->
    </div>

    <div class="control-panel">
        <input type="password" class="pin-input" placeholder="PIN kód">
        <button class="check-button">Ellenőrzés</button>
        <div class="results"></div>
        <div class="admin-panel">
            <h3>Adminisztrációs Panel</h3>
            <p>A helyes válaszok eloszlása (a/b/c): <span class="dist-a"></span> / <span class="dist-b"></span> / <span class="dist-c"></span></p>
        </div>
    </div>

    <script>
        const quizData = [
            // Kérdések 'a' helyes válasszal (8 db)
            {
                question: "Mi az áramforrás szerepe az áramkörben?",
                answers: { a: "Energiát biztosít a töltések áramlásához.", b: "Fogyasztja az elektromos energiát.", c: "Megszakítja az áram útját." },
                correctAnswer: 'a',
                explanation: "Az áramforrás (pl. elem, akkumulátor) az áramkör 'motorja', amely a benne lévő másfajta (pl. kémiai) energiát elektromos energiává alakítja, és ezzel tartósan mozgásban tartja a töltéseket. ✅ Megoldás: Energiát biztosít a töltések áramlásához."
            },
            {
                question: "Mi a feltétele az elektromos áram folyásának?",
                answers: { a: "Legyen zárt az áramkör.", b: "Legyen nyitott az áramkör.", c: "Ne legyen benne fogyasztó." },
                correctAnswer: 'a',
                explanation: "Elektromos áram csak akkor tud folyni, ha a töltések számára egy teljes, megszakítás nélküli út áll rendelkezésre az áramforrás egyik pólusától a másikig. Ezt nevezzük zárt áramkörnek. ✅ Megoldás: Legyen zárt az áramkör."
            },
            {
                question: "Melyik eszköz NEM fogyasztó?",
                answers: { a: "Vezeték", b: "Izzó", c: "Villanymotor" },
                correctAnswer: 'a',
                explanation: "A fogyasztó az elektromos energiát valamilyen más, hasznos energiaformává (fény, hő, mozgás) alakítja. A vezeték feladata a töltések szállítása, nem az energia átalakítása. ✅ Megoldás: Vezeték."
            },
            {
                question: "Mit jelent a 'rövidzárlat'?",
                answers: { a: "Az áram a fogyasztó kikerülésével, egy nagyon kis ellenállású úton záródik.", b: "Az áramkör túl hosszú.", c: "A kapcsoló nyitva van." },
                correctAnswer: 'a',
                explanation: "Rövidzárlat akkor jön létre, ha az áramforrás két pólusa között egy fogyasztó nélküli, rendkívül kis ellenállású kapcsolat jön létre. Ekkor az áramerősség veszélyesen megnő, ami tönkreteheti az áramforrást és tüzet okozhat. ✅ Megoldás: Az áram a fogyasztó kikerülésével, egy nagyon kis ellenállású úton záródik."
            },
            {
                question: "Mi a kapcsoló feladata?",
                answers: { a: "Az áramkör nyitása és zárása.", b: "Az áram erősségének szabályozása.", c: "Az energia tárolása." },
                correctAnswer: 'a',
                explanation: "A kapcsoló egy egyszerű eszköz, amellyel az áram útját tudjuk megszakítani (nyitott állapot) vagy létrehozni (zárt állapot), ezzel ki- és bekapcsolva a fogyasztókat. ✅ Megoldás: Az áramkör nyitása és zárása."
            },
            {
                question: "Melyik áramforrás?",
                answers: { a: "Elem", b: "Izzó", c: "Kapcsoló" },
                correctAnswer: 'a',
                explanation: "Az elem (galvánelem) kémiai energiát alakít át elektromos energiává, tehát áramforrás. Az izzó fogyasztó, a kapcsoló pedig egy vezérlőelem. ✅ Megoldás: Elem."
            },
            {
                question: "Mi a biztosíték szerepe?",
                answers: { a: "Megvédi az áramkört a túláramtól az áramkör megszakításával.", b: "Növeli az áram erősségét.", c: "Tárolja a felesleges áramot." },
                correctAnswer: 'a',
                explanation: "A biztosíték egy biztonsági eszköz, amely túláram (pl. rövidzárlat) esetén a benne lévő vékony szál elolvadásával megszakítja az áramkört, így megelőzve a komolyabb károkat és a tűzveszélyt. ✅ Megoldás: Megvédi az áramkört a túláramtól az áramkör megszakításával."
            },
            {
                question: "Egy egyszerű áramkörben az elektronok...",
                answers: { a: "...az áramforrás negatív pólusától a pozitív felé áramlanak.", b: "...az áramforrás pozitív pólusától a negatív felé áramlanak.", c: "...nem mozognak." },
                correctAnswer: 'a',
                explanation: "Az elektronok negatív töltésűek, ezért az áramforrás negatív pólusa taszítja, a pozitív pólusa pedig vonzza őket. Így a valós áramlási irányuk a negatívtól a pozitív pólus felé mutat. ✅ Megoldás: ...az áramforrás negatív pólusától a pozitív felé áramlanak."
            },
            // Kérdések 'b' helyes válasszal (9 db)
            {
                question: "Mi a fogyasztó szerepe az áramkörben?",
                answers: { a: "Energiát termel.", b: "Az elektromos energiát másfajta energiává alakítja.", c: "Összeköti az áramkör részeit." },
                correctAnswer: 'b',
                explanation: "A fogyasztó (pl. izzó, motor, fűtőtest) az áramkör azon eleme, amely az áramforrás által biztosított elektromos energiát valamilyen számunkra hasznos formává (fény, mozgás, hő) alakítja át. ✅ Megoldás: Az elektromos energiát másfajta energiává alakítja."
            },
            {
                question: "Melyik NEM része egy egyszerű áramkörnek?",
                answers: { a: "Áramforrás", b: "Hőmérő", c: "Vezeték" },
                correctAnswer: 'b',
                explanation: "Egy egyszerű áramkör alapvető alkotóelemei az áramforrás, a fogyasztó és a vezeték. A hőmérő a hőmérséklet mérésére szolgál, nem része az elektromos áramkörnek. ✅ Megoldás: Hőmérő."
            },
            {
                question: "Mi a különbség a zárt és a nyitott áramkör között?",
                answers: { a: "A zártban van áramforrás, a nyitottban nincs.", b: "A zártban folyik áram, a nyitottban nem.", c: "A zártban van fogyasztó, a nyitottban nincs." },
                correctAnswer: 'b',
                explanation: "A zárt áramkör egy folytonos, megszakítás nélküli utat biztosít a töltéseknek, ezért folyik benne áram. A nyitott áramkörben az út valahol meg van szakítva, így az áramlás nem jöhet létre. ✅ Megoldás: A zártban folyik áram, a nyitottban nem."
            },
            {
                question: "Mi a vezeték szerepe?",
                answers: { a: "Energiát termel.", b: "Utat biztosít a töltések áramlásának.", c: "Megszakítja az áramkört." },
                correctAnswer: 'b',
                explanation: "A vezetékek jó vezető anyagból (jellemzően fémből) készülnek, és az a feladatuk, hogy összekössék az áramkör elemeit, és utat biztosítsanak a töltések számára az áramforrás és a fogyasztó(k) között. ✅ Megoldás: Utat biztosít a töltések áramlásának."
            },
            {
                question: "Melyik a fogyasztó?",
                answers: { a: "Kapcsoló", b: "Elektromos csengő", c: "Akkumulátor" },
                correctAnswer: 'b',
                explanation: "Az elektromos csengő az elektromos energiát hangenergiává és mozgási energiává alakítja, tehát fogyasztó. Az akkumulátor áramforrás, a kapcsoló pedig vezérlőelem. ✅ Megoldás: Elektromos csengő."
            },
            {
                question: "Mi az elektromos áram?",
                answers: { a: "Nyugalomban lévő töltések.", b: "Töltéssel rendelkező részecskék rendezett, egyirányú mozgása.", c: "Az elektromos mező." },
                correctAnswer: 'b',
                explanation: "Az elektromos áramot a töltéshordozók (fémekben az elektronok) együttes, egy irányba történő, rendezett mozgása hozza létre egy vezetőben. ✅ Megoldás: Töltéssel rendelkező részecskék rendezett, egyirányú mozgása."
            },
            {
                question: "Milyen áramforrás van egy zseblámpában?",
                answers: { a: "Konnektor", b: "Galvánelem (elem)", c: "Napelem" },
                correctAnswer: 'b',
                explanation: "A zseblámpák hordozható áramforrása a galvánelem (ceruzaelem, gombelem stb.), amely kémiai energiát alakít elektromos energiává. ✅ Megoldás: Galvánelem (elem)."
            },
            {
                question: "A kapcsolási rajz egy...",
                answers: { a: "...művészi rajz az áramkörről.", b: "...egyszerűsített, egyezményes jelekkel készült vázlat az áramkörről.", c: "...háromdimenziós modell." },
                correctAnswer: 'b',
                explanation: "A kapcsolási rajz az áramkörök sematikus ábrázolására szolgál. Nem a valós kinézetet, hanem az elemeket és azok összekötését mutatja be szabványos, egyezményes jelekkel. ✅ Megoldás: ...egyszerűsített, egyezményes jelekkel készült vázlat az áramkörről."
            },
            {
                question: "Mi a 'technikai áramirány'?",
                answers: { a: "Az elektronok valós áramlási iránya.", b: "A megegyezés szerinti áramirány, a pozitív pólustól a negatív felé.", c: "Az áramerősség mértékegysége." },
                correctAnswer: 'b',
                explanation: "Történelmi okokból, még az elektron felfedezése előtt, megegyezés szerint a pozitív töltések mozgásának irányát nevezték ki az áram irányának. Ez a technikai áramirány, ami az áramforráson kívül a pozitív pólustól a negatív felé mutat. ✅ Megoldás: A megegyezés szerinti áramirány, a pozitív pólustól a negatív felé."
            },
            // Kérdések 'c' helyes válasszal (8 db)
            {
                question: "Melyik állítás igaz egy egyszerű, elemből és izzóból álló áramkörre?",
                answers: { a: "Az elem fogyasztja az energiát.", b: "A vezeték termeli az energiát.", c: "Az izzó alakítja az elektromos energiát fénnyé és hővé." },
                correctAnswer: 'c',
                explanation: "Ebben az áramkörben az elem az áramforrás, az izzó pedig a fogyasztó. A fogyasztó feladata az energia átalakítása. ✅ Megoldás: Az izzó alakítja az elektromos energiát fénnyé és hővé."
            },
            {
                question: "Miből áll egy egyszerű áramkör?",
                answers: { a: "Csak egy elemből és egy izzóból.", b: "Csak egy kapcsolóból és egy vezetékből.", c: "Áramforrásból, fogyasztóból és őket összekötő vezetékből." },
                correctAnswer: 'c',
                explanation: "A működéshez elengedhetetlen a három alapvető komponens: az áramforrás (energia), a fogyasztó (energia-átalakítás) és a vezeték (út a töltéseknek). A kapcsoló a működtetést teszi kényelmessé. ✅ Megoldás: Áramforrásból, fogyasztóból és őket összekötő vezetékből."
            },
            {
                question: "Egy kapcsolási rajzon egy kör benne 'X'-szel mit jelöl?",
                answers: { a: "Kapcsolót", b: "Elemet", c: "Izzót" },
                correctAnswer: 'c',
                explanation: "Az izzó, mint egyszerű elektromos fogyasztó, szabványos rajzjele egy kör, amelyben egy 'X' (vagy néha egy hurok) található. ✅ Megoldás: Izzót."
            },
            {
                question: "Mi történik, ha egy zárt áramkörben a kapcsolót kinyitjuk?",
                answers: { a: "Az áram erősebb lesz.", b: "Nem történik semmi.", c: "Az áramkör megszakad, az áramlás leáll." },
                correctAnswer: 'c',
                explanation: "A kapcsoló kinyitásával egy légrést iktatunk az áramkörbe. Mivel a levegő szigetelő, a töltések útja megszakad, az áramkör nyitottá válik, és az áram nem tud tovább folyni. ✅ Megoldás: Az áramkör megszakad, az áramlás leáll."
            },
            {
                question: "Melyik NEM áramforrás?",
                answers: { a: "Akkumulátor", b: "Napelem", c: "Ellenállás" },
                correctAnswer: 'c',
                explanation: "Az akkumulátor és a napelem is képes elektromos energiát biztosítani az áramkör számára, tehát áramforrások. Az ellenállás egy olyan áramköri elem, amely a töltések áramlását akadályozza, tehát fogyasztónak tekinthető. ✅ Megoldás: Ellenállás."
            },
            {
                question: "Mi a galvánelem?",
                answers: { a: "Egyfajta motor.", b: "Egyfajta kapcsoló.", c: "Kémiai energiát elektromos energiává alakító áramforrás (pl. ceruzaelem)." },
                correctAnswer: 'c',
                explanation: "A galvánelem (pl. a hagyományos elemek) belsejében kémiai reakciók zajlanak, amelyek elektromos feszültséget hoznak létre. Ezek az eszközök a kémiai energiát alakítják át elektromos energiává. ✅ Megoldás: Kémiai energiát elektromos energiává alakító áramforrás (pl. ceruzaelem)."
            },
            {
                question: "A háztartási elektromos hálózat...",
                answers: { a: "...egy áramkör, de nincs benne fogyasztó.", b: "...nem tekinthető áramkörnek.", c: "...egy összetett elektromos áramkör." },
                correctAnswer: 'c',
                explanation: "A lakás elektromos hálózata egy nagyon összetett áramkör, amelyben az erőmű az áramforrás, a vezetékek, kapcsolók, biztosítékok, konnektorok és a rácsatlakoztatott készülékek (fogyasztók) mind az áramkör részei. ✅ Megoldás: ...egy összetett elektromos áramkör."
            },
            {
                question: "Egy áramkörben a vezeték anyaga általában...",
                answers: { a: "...műanyag, mert szigetel.", b: "...üveg, mert átlátszó.", c: "...fém (pl. réz), mert jól vezeti az áramot." },
                correctAnswer: 'c',
                explanation: "Az áramkörben a töltések szállításához jó vezető anyagra van szükség. A fémek, különösen a réz és az alumínium, kiváló vezetők, ezért használják őket erre a célra. ✅ Megoldás: ...fém (pl. réz), mert jól vezeti az áramot."
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const checkButtons = document.querySelectorAll('.check-button');
        const pinInputs = document.querySelectorAll('.pin-input');
        const resultsContainers = document.querySelectorAll('.results');
        const adminPanels = document.querySelectorAll('.admin-panel');

        let shuffledQuizData = [];
        let internalCorrectAnswers = { a: 0, b: 0, c: 0 };

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function loadQuiz() {
            quizData.forEach(q => {
                internalCorrectAnswers[q.correctAnswer]++;
            });

            shuffledQuizData = [...quizData];
            shuffleArray(shuffledQuizData);
            
            let quizHTML = '';
            shuffledQuizData.forEach((q, index) => {
                quizHTML += `<div class="question-block" id="q-${index}">`;
                quizHTML += `<div class="question-text">${index + 1}. ${q.question}</div>`;
                quizHTML += `<div class="options-container">`;

                const options = Object.entries(q.answers);
                shuffleArray(options);

                options.forEach(([key, value]) => {
                    quizHTML += `<label>
                                    <input type="radio" name="question${index}" value="${key}">
                                    ${value}
                                 </label>`;
                });

                quizHTML += `</div>`;
                quizHTML += `<div class="explanation" id="exp-${index}">${q.explanation}</div>`;
                quizHTML += `</div>`;
            });
            quizContainer.innerHTML = quizHTML;
        }

        function checkAnswers(event) {
            // Find which control panel triggered the event
            const currentPanel = event.target.closest('.control-panel');
            const pinInput = currentPanel.querySelector('.pin-input');
            const pin = pinInput.value;
            
            const isMasterPin = pin === '121909';
            const isStudentPin = pin >= 100001 && pin <= 100020;
            let score = 0;
            let allAnswered = true;

            if (!isMasterPin) {
                 for (let i = 0; i < shuffledQuizData.length; i++) {
                    const selectedOption = document.querySelector(`input[name="question${i}"]:checked`);
                    if (!selectedOption) {
                        allAnswered = false;
                        break;
                    }
                }
            }
           
            if (!isMasterPin && !isStudentPin) {
                resultsContainers.forEach(container => {
                    container.textContent = "Érvénytelen PIN kód!";
                    container.style.color = '#D50000';
                });
                return;
            }

            if (!allAnswered && !isMasterPin) {
                resultsContainers.forEach(container => {
                    container.textContent = "Kérlek, válaszold meg az összes kérdést az ellenőrzés előtt!";
                    container.style.color = 'orange';
                });
                return;
            }
            
            resultsContainers.forEach(container => container.style.color = '#333');

            shuffledQuizData.forEach((q, index) => {
                const explanation = document.getElementById(`exp-${index}`);
                explanation.style.display = 'block';

                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);

                document.querySelectorAll(`input[name="question${index}"]`).forEach(option => {
                    const label = option.parentElement;
                    option.disabled = true;

                    // Reveal the correct answer for everyone
                    if (option.value === q.correctAnswer) {
                        label.classList.add('correct-answer-reveal');
                    }
                    
                    // Color student's specific choice if a student PIN is used
                    if(isStudentPin && selectedOption && selectedOption === option){
                        if(selectedOption.value !== q.correctAnswer){
                             label.classList.add('student-incorrect');
                        }
                    }
                });
                
                if (selectedOption && selectedOption.value === q.correctAnswer) {
                    score++;
                }
            });

            if(isMasterPin){
                resultsContainers.forEach(container => container.textContent = "Minden válasz és magyarázat felfedve.");
                adminPanels.forEach(panel => {
                    panel.style.display = 'block';
                    panel.querySelector('.dist-a').textContent = internalCorrectAnswers.a;
                    panel.querySelector('.dist-b').textContent = internalCorrectAnswers.b;
                    panel.querySelector('.dist-c').textContent = internalCorrectAnswers.c;
                });
            }

            if(isStudentPin){
                const percentage = Math.round((score / shuffledQuizData.length) * 100);
                resultsContainers.forEach(container => {
                    container.innerHTML = `Eredményed: ${score} / ${shuffledQuizData.length} (${percentage}%)`;
                });
            }
        }
        
        pinInputs.forEach(input => {
            input.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    // Pass the event to the handler to identify the correct panel
                    checkAnswers(event);
                }
            });
             // Sync PIN inputs
            input.addEventListener('input', (e) => {
                pinInputs.forEach(otherInput => {
                    if (otherInput !== e.target) {
                        otherInput.value = e.target.value;
                    }
                });
            });
        });

        checkButtons.forEach(button => {
            button.addEventListener('click', checkAnswers);
        });

        document.addEventListener('DOMContentLoaded', loadQuiz);
    </script>

</body>
</html>