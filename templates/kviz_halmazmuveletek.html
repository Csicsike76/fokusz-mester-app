<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: Halmazműveletek</title>
  <style>
    :root {
      --primary-color: #388d3c; /* Zöld */
      --secondary-color: #d52b1e; /* Piros */
      --light-green: #e8f5e9;
      --light-red: #ffebee;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, var(--secondary-color), var(--text-light), var(--primary-color));
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: var(--light-green);
      border-color: var(--primary-color);
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: var(--light-red);
      border-color: var(--secondary-color);
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #2a6a2d;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: Halmazműveletek</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
        { q: "Mi az A = {1, 2, 3} és B = {3, 4, 5} halmazok uniója (A ∪ B)?", a: "{3}", b: "{1, 2, 3, 4, 5}", c: "{1, 2, 4, 5}", correct: "b", exp: "Két halmaz uniója (egyesítése) azokat az elemeket tartalmazza, amelyek legalább az egyik halmazban benne vannak. A közös elemeket csak egyszer soroljuk fel: {1, 2, 3, 4, 5}." },
        { q: "Mi az A = {a, b, c, d} és B = {c, d, e, f} halmazok metszete (A ∩ B)?", a: "{c, d}", b: "{a, b, e, f}", c: "{a, b, c, d, e, f}", correct: "a", exp: "Két halmaz metszete azokat az elemeket tartalmazza, amelyek mindkét halmazban megtalálhatók. Itt a 'c' és a 'd' a közös elemek." },
        { q: "Mi az A = {10, 20, 30, 40} és B = {30, 40, 50} halmazok különbsége (A \\ B)?", a: "{50}", b: "{10, 20}", c: "{30, 40}", correct: "b", exp: "Az A \\ B halmazkülönbség azokat az elemeket tartalmazza, amelyek az A halmaznak elemei, de a B halmaznak nem. Itt ezek a 10 és a 20." },
        { q: "Ha A={1,2} és B={3,4}, akkor mi az A ∩ B?", a: "{1, 2, 3, 4}", b: "∅ (üres halmaz)", c: "{ }", correct: "b", exp: "A két halmaznak nincs közös eleme. Az ilyen halmazokat diszjunktnak nevezzük, a metszetük pedig az üres halmaz (∅)." },
        { q: "Ha A a páros számok és B a prímszámok halmaza, mi az A ∩ B?", a: "{2}", b: "∅", c: "Minden páros prím", correct: "a", exp: "A prímszámok között csak egyetlen páros szám van, a 2. Ezért a két halmaznak pontosan egy közös eleme van, a 2." },
        { q: "Mi az A = {x, y} és B = {z} halmazok uniója?", a: "{x, y, z}", b: "∅", c: "{xyz}", correct: "a", exp: "Az unióba beletartozik minden elem, ami legalább az egyik halmazban szerepel. Tehát az A és a B halmaz összes elemét felsoroljuk: {x, y, z}." },
        { q: "Mi a B \\ A különbség, ha A = {1, 2, 3} és B = {2, 3, 4}?", a: "{1}", b: "{2, 3}", c: "{4}", correct: "c", exp: "A B \\ A különbség azokat az elemeket jelenti, amelyek B-ben benne vannak, de A-ban nincsenek. Az egyetlen ilyen elem a 4." },
        { q: "Ha A ⊂ B, akkor mivel egyenlő A ∪ B?", a: "A", b: "∅", c: "B", correct: "c", exp: "Ha A részhalmaza B-nek, az azt jelenti, hogy minden A-beli elem B-ben is benne van. Ha ezeket a halmazokat egyesítjük, nem kapunk új elemet, az eredmény a bővebb halmaz, azaz B lesz." },
        { q: "Ha A ⊂ B, akkor mivel egyenlő A ∩ B?", a: "A", b: "B", c: "∅", correct: "a", exp: "Ha A részhalmaza B-nek, akkor A minden eleme közös elem. Így a metszetük pontosan az A halmaz lesz." },
        { q: "Egy osztályban 15-en járnak kosarazni (K), 12-en focizni (F). 5-en mindkettőre. Hányan sportolnak legalább egyet? |K ∪ F| = ?", a: "27", b: "22", c: "17", correct: "b", exp: "A logikai szita-formulával: |K ∪ F| = |K| + |F| - |K ∩ F|. Behelyettesítve: 15 + 12 - 5 = 27 - 5 = 22. Tehát 22-en sportolnak legalább egyet." },
        { q: "Mi az A = {a,b} és B = {a,b} halmazok metszete?", a: "{a, b}", b: "∅", c: "4", correct: "a", exp: "Mivel a két halmaz egyenlő, minden elemük közös. Tehát a metszetük önmaga a halmaz: {a, b}." },
        { q: "Melyik művelet NEM kommutatív (felcserélhető)?", a: "Unió (∪)", b: "Metszet (∩)", c: "Különbség (\\)", correct: "c", exp: "Az unió és a metszet kommutatív, azaz A∪B=B∪A és A∩B=B∩A. A különbség viszont nem az, mert általában A\\B ≠ B\\A." },
        { q: "Ha A az {5, 10, 15} és B a {10, 20} halmaz, mennyi a card(A ∪ B)?", a: "5", b: "3", c: "4", correct: "c", exp: "Az unió A ∪ B = {5, 10, 15, 20}. Ennek a halmaznak az elemeinek száma (kardinálisa) 4." },
        { q: "A Venn-diagramon mit jelöl a két kör közös, átfedő területe?", a: "A két halmaz unióját.", b: "A két halmaz különbségét.", c: "A két halmaz metszetét.", correct: "c", exp: "A Venn-diagramon a két halmazt reprezentáló körök közös, átfedő része pontosan azokat az elemeket tartalmazza, amelyek mindkét halmaznak elemei, tehát a metszetet szemlélteti." },
        { q: "Mivel egyenlő A ∪ A?", a: "A", b: "∅", c: "A²", correct: "a", exp: "Egy halmazt önmagával egyesítve nem kapunk új elemeket, tehát az eredmény önmaga a halmaz. Ezt a tulajdonságot idempotensnek nevezzük." },
        { q: "Mi az A = {1, 2, 3, 4} és B = {1, 3} halmazok különbsége (A \\ B)?", a: "{2, 4}", b: "∅", c: "{1, 3}", correct: "a", exp: "Az A \\ B halmazba azok az elemek tartoznak, amik A-ban benne vannak, de B-ben nem. Kivesszük A-ból az 1-et és a 3-at, így marad a {2, 4} halmaz." },
        { q: "Ha A a 10-nél kisebb páros természetes számok, B pedig a 10-nél kisebb prímszámok halmaza, mi A ∩ B?", a: "{2}", b: "{2, 4, 6, 8}", c: "{2, 3, 5, 7}", correct: "a", exp: "A={0,2,4,6,8}. B={2,3,5,7}. A két halmaz egyetlen közös eleme a 2." },
        { q: "Ha A és B diszjunkt halmazok, mi az A \\ B?", a: "B", b: "∅", c: "A", correct: "c", exp: "Ha a két halmaz diszjunkt, nincs közös elemük. Az A \\ B azokat az A-beli elemeket tartalmazza, amik nincsenek B-ben. Mivel egyetlen A-beli elem sincs B-ben, a különbség maga az A halmaz." },
        { q: "Mi a (A ∪ B) \\ A művelet eredménye?", a: "B \\ A", b: "B", c: "A ∩ B", correct: "a", exp: "Az A∪B halmazból elvesszük az A halmaz összes elemét. Ami megmarad, az pontosan azok az elemek, amelyek B-ben benne vannak, de A-ban nincsenek. Ez a B\\A definíciója." },
        { q: "Mivel egyenlő (A ∩ B) ∪ A?", a: "B", b: "A", c: "A ∪ B", correct: "b", exp: "Az A∩B halmaz az A-nak részhalmaza. Ha egy halmazt egy részhalmazával egyesítünk, mindig a bővebb halmazt kapjuk eredményül, ami jelen esetben az A." },
        { q: "Ha A={a,b}, B={c,d}, C={a,d}, mi az (A∪B)∩C?", a: "{a,d}", b: "{a,b,c,d}", c: "∅", correct: "a", exp: "Először a zárójelben lévő műveletet végezzük el: A∪B = {a,b,c,d}. Ennek a metszete a C={a,d} halmazzal: {a,b,c,d} ∩ {a,d} = {a,d}." },
        { q: "Mi a 'kivonás' műveletének másik neve a halmazelméletben?", a: "Metszet", b: "Komplementer", c: "Különbség", correct: "c", exp: "A halmazok közötti kivonás műveletét halmazkülönbségnek vagy különbséghalmaz képzésének is nevezzük. A komplementer egy speciális különbség, amikor egy alaphalmazból vonjuk ki a részhalmazát." },
        { q: "Ha A={x|x<5, x∈ℕ} és B={x|x>2, x∈ℕ}, mi az A∩B?", a: "{3, 4}", b: "{2, 3, 4, 5}", c: "{0, 1, 2, 3, 4}", correct: "a", exp: "A={0,1,2,3,4}. B={3,4,5,6,...}. A két halmaz közös elemei a 3 és a 4. Tehát A∩B = {3,4}." },
        { q: "A 'logikai szita' formula mire használható?", a: "Két halmaz különbségének elemszámára.", b: "Két halmaz metszetének elemszámára.", c: "Két halmaz uniójának elemszámára.", correct: "c", exp: "A logikai szita-formula (card(A∪B) = card(A)+card(B)-card(A∩B)) arra szolgál, hogy két (vagy több) halmaz uniójának elemszámát kiszámítsuk az egyes halmazok és a metszetük elemszámának ismeretében." },
        { q: "Mivel egyenlő (A \\ B) ∪ (A ∩ B)?", a: "A", b: "B", c: "A ∪ B", correct: "a", exp: "Az A\\B az A-nak az a része, ami 'nem közös'. Az A∩B az A-nak az a része, ami 'közös'. Ha ezt a két diszjunkt részt egyesítjük, visszakapjuk a teljes A halmazt." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>