<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: Racionális számok alapjai</title>
  <style>
    :root {
      --primary-color: #388d3c; /* Zöld */
      --secondary-color: #d52b1e; /* Piros */
      --light-green: #e8f5e9;
      --light-red: #ffebee;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, var(--secondary-color), var(--text-light), var(--primary-color));
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: var(--light-green);
      border-color: var(--primary-color);
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: var(--light-red);
      border-color: var(--secondary-color);
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #2a6a2d;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: Racionális számok alapjai</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
        { q: "Melyik szám racionális?", a: "√3", b: "π", c: "5/7", correct: "c", exp: "A racionális számok definíció szerint felírhatók két egész szám hányadosaként (a/b alakban). Az 5/7 megfelel ennek. A √3 és a π irracionális számok." },
        { q: "Melyik a 0,25 szám közönséges tört alakja?", a: "1/4", b: "25/10", c: "1/25", correct: "a", exp: "A 0,25 azt jelenti, hogy huszonöt század, amit 25/100 alakban írhatunk fel. Ezt a törtet 25-tel egyszerűsítve 1/4-et kapunk." },
        { q: "Mi az 1/3 szám tizedestört alakja?", a: "0,3", b: "0,33", c: "0,(3) vagy 0,333...", correct: "c", exp: "Az 1-et 3-mal osztva egy végtelen szakaszos tizedestörtet kapunk, ahol a 3-as számjegy ismétlődik. Ezt 0,3-dal vagy 0,33-mal csak közelíteni lehet, a pontos alak a 0,(3)." },
        { q: "Mi a -2,5 szám abszolút értéke?", a: "-2,5", b: "2,5", c: "0", correct: "b", exp: "Egy szám abszolút értéke a szám távolsága a 0-tól a számegyenesen. A távolság sosem negatív, így |-2,5| = 2,5." },
        { q: "Melyik a legnagyobb szám?", a: "-1/2", b: "-1/4", c: "-1", correct: "b", exp: "Negatív számoknál az a nagyobb, amelyiknek az abszolút értéke kisebb (közelebb van a nullához). |-1/2|=0,5; |-1/4|=0,25; |-1|=1. A -1/4 van a legközelebb a nullához, tehát ez a legnagyobb." },
        { q: "Melyik NEM racionális szám?", a: "√9", b: "-5", c: "√5", correct: "c", exp: "A √9=3, ami egész, tehát racionális. A -5 szintén egész, tehát racionális. Az 5 nem négyzetszám, így a gyöke, √5, irracionális." },
        { q: "Hogyan írjuk fel a -12/5 számot tizedestört alakban?", a: "-2,4", b: "-1,25", c: "-2,5", correct: "a", exp: "Elosztjuk a 12-t 5-tel: 12:5=2, maradék 2. A 20-ban a 5 megvan 4-szer. Tehát az eredmény -2,4." },
        { q: "Minden egész szám racionális szám?", a: "Igen, mert minden egész felírható 1-es nevezőjű törtként.", b: "Nem, mert a negatív számok nem racionálisak.", c: "Nem, csak a pozitív egészek racionálisak.", correct: "a", exp: "Minden 'z' egész szám felírható z/1 alakban, ami megfelel a racionális szám definíciójának. Ezért az egész számok halmaza (ℤ) részhalmaza a racionális számok halmazának (ℚ)." },
        { q: "Melyik a 0,(6) szám tört alakja?", a: "6/10", b: "6/9", c: "1/6", correct: "b", exp: "A tiszta szakaszos tizedestörteket úgy alakítjuk át, hogy a szakaszt a számlálóba írjuk, a nevezőbe pedig annyi 9-est, ahány jegyű a szakasz. Itt 6/9, amit egyszerűsítve 2/3-ot kapunk." },
        { q: "Mi a -10 szám modulusa?", a: "-10", b: "10", c: "1/10", correct: "b", exp: "A modulus az abszolút érték szinonimája. |-10| = 10." },
        { q: "Melyik a 3/8 tizedestört alakja?", a: "0,375", b: "0,38", c: "0,4", correct: "a", exp: "Az átalakításhoz elosztjuk a 3-at 8-cal. 30:8=3 (maradék 6), 60:8=7 (maradék 4), 40:8=5. Az eredmény 0,375. Ez egy véges tizedestört." },
        { q: "Mi a -4 szám ellentettje?", a: "-4", b: "4", c: "1/4", correct: "b", exp: "Egy szám ellentettje az a szám, amit hozzáadva nullát kapunk. A -4 ellentettje a +4." },
        { q: "A 2,1(3) szám milyen típusú?", a: "Vegyes szakaszos tizedestört", b: "Tiszta szakaszos tizedestört", c: "Véges tizedestört", correct: "a", exp: "Mivel a tizedesvessző után van olyan számjegy, ami nem ismétlődik (1), és van olyan, ami ismétlődik (3), ezért vegyes szakaszos tizedestörtről beszélünk." },
        { q: "Hogyan ábrázoljuk a -3/2 számot a számegyenesen?", a: "A -1 és a 0 között, közelebb a -1-hez.", b: "A -2 és a -1 között, pontosan középen.", c: "A 0 és az 1 között.", correct: "b", exp: "A -3/2 értéke -1,5. Ez a szám pontosan a -1 és a -2 egész számok között félúton helyezkedik el." },
        { q: "Melyik a kakukktojás? (Melyik nem racionális?)", a: "-2.75", b: "11/3", c: "Az arany arány (φ)", correct: "c", exp: "A -2.75 és a 11/3 (3,66...) racionális számok. Az arany arány (φ ≈ 1.618...) egy nevezetes irracionális szám, mint a pí." },
        { q: "Hány racionális szám van 0 és 1 között?", a: "9", b: "Véges sok, de több mint 1000.", c: "Végtelen sok.", correct: "c", exp: "Bármely két különböző racionális szám között mindig található végtelen sok további racionális szám. Például a két szám átlaga mindig közéjük esik, és ezt a lépést végtelenszer megismételhetjük." },
        { q: "Mi az 5/4 szám ellentettje?", a: "-4/5", b: "-5/4", c: "4/5", correct: "b", exp: "Az 5/4 ellentettje egyszerűen a -5/4. A -4/5 a reciprokának az ellentettje lenne." },
        { q: "Melyik a 0,12 közönséges tört alakja legegyszerűbb formában?", a: "12/100", b: "6/50", c: "3/25", correct: "c", exp: "0,12 = 12/100. A számláló és a nevező is osztható 4-gyel. 12:4=3, 100:4=25. Az egyszerűsített alak 3/25." },
        { q: "Minden racionális szám valós szám?", a: "Igen.", b: "Nem.", c: "Csak a pozitívak.", correct: "a", exp: "A ℚ ⊂ ℝ bennfoglalás miatt minden racionális szám egyben valós szám is. A valós számok halmaza a racionális és irracionális számok uniója." },
        { q: "Mi az -5/2 és az 5/2 viszonya?", a: "Egymás reciprokai.", b: "Egymás ellentettjei.", c: "Egyenlőek.", correct: "b", exp: "A két szám abszolút értéke megegyezik, de az előjelük különböző. Az ilyen számokat egymás ellentettjeinek nevezzük." },
        { q: "Mi a 0 racionális számként felírva?", a: "0/0", b: "0/1", c: "Nem írható fel.", correct: "b", exp: "A nulla felírható 0/b alakban, ahol b bármilyen nullától különböző egész szám lehet. A legegyszerűbb és leggyakoribb forma a 0/1. A 0/0 forma értelmetlen." },
        { q: "Hol helyezkedik el a 9/8 a számegyenesen?", a: "0 és 1 között.", b: "1 és 2 között.", c: "Pontosan az 1-en.", correct: "b", exp: "A 9/8 egy áltört, értéke 1 és 1/8, azaz 1,125. Ez a szám az 1 és a 2 között van." },
        { q: "Melyik állítás igaz?", a: "-4 > -3.5", b: "-4 < -3.5", c: "-4 = -3.5", correct: "b", exp: "A számegyenesen a -3.5 jobbra helyezkedik el a -4-től, ezért a -3.5 a nagyobb szám. Ezt a -4 < -3.5 reláció fejezi ki." },
        { q: "Melyik szám van közelebb a nullához: -0.8 vagy 0.7?", a: "-0.8", b: "0.7", c: "Egyenlő távolságra vannak.", correct: "b", exp: "A nullától való távolságot az abszolút érték adja meg. |-0.8|=0.8; |0.7|=0.7. Mivel 0.7 < 0.8, a 0.7 van közelebb a nullához." },
        { q: "A -2/3 szám...", a: "...egész szám.", b: "...természetes szám.", c: "...racionális szám.", correct: "c", exp: "Mivel a -2 és a 3 is egész számok (és a nevező nem nulla), a -2/3 definíció szerint egy racionális szám. Nem egész, és nem is természetes." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>