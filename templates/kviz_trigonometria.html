<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kvíz: 7.4 Derékszögű háromszög megoldása</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #007BFF;
            --secondary-color: #f1f1f1;
            --background-color: #f8f9fa;
            --text-color: #333;
            --correct-color: #28a745;
            --correct-bg: #d4edda;
            --incorrect-color: #dc3545;
            --incorrect-bg: #f8d7da;
            --neutral-border: #dee2e6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            padding: 20px;
            background: linear-gradient(90deg, #CD2A3E 33.3%, #FFFFFF 33.3%, #FFFFFF 66.6%, #477050 66.6%);
            text-align: center;
        }

        header h1 {
            color: var(--text-color);
            margin: 0;
            font-size: 2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        main {
            padding: 30px;
        }

        #quiz-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .question-block {
            border: 1px solid var(--neutral-border);
            border-radius: 10px;
            padding: 20px;
            transition: box-shadow 0.3s;
        }

        .question-block:focus-within {
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.25);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .options label {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--neutral-border);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .options label:hover {
            background-color: #f8f9fa;
        }

        .options input[type="radio"] {
            margin-right: 15px;
            accent-color: var(--primary-color);
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
            display: none;
            font-size: 0.95em;
        }
        
        .explanation strong {
            display: block;
            margin-bottom: 5px;
        }
        
        .evaluation-block {
            margin-top: 30px;
            margin-bottom: 20px;
        }

        .controls-container {
            padding: 20px;
            background-color: #fdfdfd;
            border: 1px dashed var(--neutral-border);
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .controls-container label {
            font-weight: 600;
        }

        .pin-code-input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--neutral-border);
            width: 120px;
            text-align: center;
            font-size: 1em;
        }

        .check-btn {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
        }

        .check-btn:hover {
            background-color: #0056b3;
        }
        
        .check-btn:active {
            transform: scale(0.98);
        }
        
        .check-btn:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }

        .result-container {
            margin-top: 15px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 700;
            min-height: 1.5em;
        }

        .admin-panel {
            margin-top: 10px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: #856404;
        }

        /* Visszajelző stílusok */
        .correct-answer {
            background-color: var(--correct-bg) !important;
            border-color: var(--correct-color) !important;
        }

        .incorrect-answer {
            background-color: var(--incorrect-bg) !important;
            border-color: var(--incorrect-color) !important;
        }
        
        .master-correct::before {
            content: '✅ ';
            font-weight: bold;
        }

        .label-correct::before {
            content: '✅ ';
        }
        
        .label-incorrect::before {
            content: '❌ ';
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            main {
                padding: 15px;
            }
            header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <header>
            <h1>Kvíz: 7.4 Derékszögű háromszög megoldása</h1>
        </header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN kód:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellenőrzés</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;">
                    <p>Adminisztrátori mód aktív. A helyes válaszok és a magyarázatok feloldva.</p>
                </div>
            </div>

            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

            <form id="quiz-form" autocomplete="off">
                <div id="questions-container"></div>
            </form>

            <div class="evaluation-block" id="bottom-evaluation">
                <div class="controls-container">
                    <label for="pin-code-bottom">PIN kód:</label>
                    <input type="password" id="pin-code-bottom" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellenőrzés</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;">
                    <p>Adminisztrátori mód aktív. A helyes válaszok és a magyarázatok feloldva.</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        const quizData = [
            {
                question: "Mit jelent 'megoldani egy derékszögű háromszöget'?",
                options: { a: "Lerajzolni egy papírra.", b: "Megmérni a kerületét.", c: "Kiszámítani az összes hiányzó oldalát és szögét." },
                correct: "c",
                explanation: "A 'megoldás' azt jelenti, hogy a megadott adatok (általában 2 adat a derékszögön kívül) alapján meghatározzuk a háromszög összes többi, ismeretlen oldalát és szögét."
            },
            {
                question: "Egy derékszögű háromszögben α = 40°. Mekkora a másik hegyesszög, β?",
                options: { a: "40°", b: "50°", c: "140°" },
                correct: "b",
                explanation: "A derékszögű háromszög két hegyesszögének összege mindig 90°. Tehát β = 90° - 40° = 50°."
            },
            {
                question: "Ha egy derékszögű háromszög két befogója adott (a, b), mivel érdemes kezdeni a megoldást?",
                options: { a: "A szögek kiszámításával.", b: "Az átfogó kiszámításával Pitagorasz-tétellel.", c: "A terület kiszámításával." },
                correct: "b",
                explanation: "Ha a két befogó ismert, a legegyszerűbb első lépés az átfogót (c) kiszámítani a Pitagorasz-tétellel (c² = a² + b²). Utána már könnyebb a szögeket meghatározni."
            },
            {
                question: "Egy derékszögű háromszög átfogója 10 cm, az egyik hegyesszöge 30°. Milyen hosszú a szöggel szemközti befogó?",
                options: { a: "10 cm", b: "5 cm", c: "kb. 8.66 cm" },
                correct: "b",
                explanation: "A szemközti befogót (a) a szinusz köti össze az átfogóval. sin 30° = a / 10. Mivel sin 30° = 0.5, ezért 0.5 = a / 10, amiből a = 5 cm."
            },
            {
                question: "Egy derékszögű háromszögben a=5 és b=12. Melyik szögfüggvénnyel számolnád ki az 'a' oldallal szemközti szöget?",
                options: { a: "szinusz", b: "koszinusz", c: "tangens" },
                correct: "c",
                explanation: "Ismert a szemközti (a=5) és a szomszédos (b=12) befogó. Ezt a két oldalt a tangens függvény köti össze: tan α = szemközti / szomszédos = 5/12."
            },
            {
                question: "Egy derékszögű háromszögben a szomszédos befogó 8 cm, a mellette lévő szög 60°. Milyen hosszú az átfogó?",
                options: { a: "4 cm", b: "16 cm", c: "kb. 9.2 cm" },
                correct: "b",
                explanation: "A szomszédos befogót (b=8) a koszinusz köti össze az átfogóval (c). cos 60° = 8 / c. Mivel cos 60° = 0.5, ezért 0.5 = 8 / c, amiből c = 8 / 0.5 = 16 cm."
            },
            {
                question: "Egy egyenlő szárú derékszögű háromszög átfogója 10 cm. Milyen hosszúak a befogók?",
                options: { a: "5 cm", b: "10 cm", c: "√50 cm (kb. 7.07 cm)" },
                correct: "c",
                explanation: "Ha a befogók egyenlőek (a=b), akkor a Pitagorasz-tétel: a² + a² = 10². Ebből 2a² = 100, a² = 50, tehát a = √50 cm."
            },
            {
                question: "Melyik adatpár NEM elegendő egy derékszögű háromszög egyértelmű megoldásához?",
                options: { a: "Két befogó.", b: "Két hegyesszög.", c: "Egy befogó és az átfogó." },
                correct: "b",
                explanation: "Ha csak a két hegyesszöget ismerjük (pl. 30° és 60°), az csak a háromszög alakját (hasonlóságát) határozza meg, a méretét nem. Végtelen sok ilyen méretű háromszög létezik."
            },
            {
                question: "Egy 20 méter magasból lejtő sípálya 15°-os szöget zár be a vízszintessel. Milyen hosszú a pálya?",
                options: { a: "20 / sin 15°", b: "20 * sin 15°", c: "20 / tan 15°" },
                correct: "a",
                explanation: "A pálya hossza az átfogó (c), a magasság a szöggel szemközti befogó (a=20). sin 15° = 20 / c. Átrendezve: c = 20 / sin 15°."
            },
            {
                question: "Egy derékszögű háromszög átfogója 15, egyik befogója 9. Hogyan számolnád ki a másik befogót?",
                options: { a: "Pitagorasz-tétellel: b² = 15² + 9²", b: "Pitagorasz-tétellel: b² = 15² - 9²", c: "Trigonometriával." },
                correct: "b",
                explanation: "Ha két oldal ismert, a harmadikat a legegyszerűbben a Pitagorasz-tétellel lehet kiszámolni. Mivel a befogót keressük, kivonást végzünk: b² = c² - a²."
            },
            {
                question: "Az előző feladatban (c=15, a=9), mekkora a másik befogó?",
                options: { a: "12", b: "6", c: "144" },
                correct: "a",
                explanation: "b² = 15² - 9² = 225 - 81 = 144. Ebből b = √144 = 12."
            },
            {
                question: "Egy toronytól 100 méterre állva 35°-os szögben látjuk a torony csúcsát. Milyen magas a torony?",
                options: { a: "100 / tan 35°", b: "100 * cos 35°", c: "100 * tan 35°" },
                correct: "c",
                explanation: "A torony magassága (a) a szöggel szemközti befogó, a távolság (b=100) a szomszédos befogó. tan 35° = a / 100. Átrendezve: a = 100 * tan 35°."
            },
            {
                question: "Ha egy derékszögű háromszögben sin α = 0.5, mekkora az α szög?",
                options: { a: "30°", b: "45°", c: "60°" },
                correct: "a",
                explanation: "Ez egy nevezetes szögfüggvény érték. A 30°-os szög szinusza 0.5."
            },
            {
                question: "Egy derékszögű háromszögben a=7, c=14. Mekkora az 'a' oldallal szemközti szög?",
                options: { a: "45°", b: "60°", c: "30°" },
                correct: "c",
                explanation: "sin α = szemközti/átfogó = 7/14 = 0.5. Az a szög, aminek a szinusza 0.5, az a 30°."
            },
            {
                question: "Egy derékszögű háromszögben a=4, b=3. Hogyan számolnád ki az 'a' oldallal szemközti szöget?",
                options: { a: "sin α = 4/5", b: "tan α = 4/3", c: "cos α = 3/4" },
                correct: "b",
                explanation: "Ismert a szemközti (a=4) és a szomszédos (b=3) befogó. A kettőt a tangens függvény kapcsolja össze: tan α = 4/3."
            },
            {
                question: "Ha cos β = 0.707... és β egy hegyesszög, mekkora β?",
                options: { a: "30°", b: "45°", c: "60°" },
                correct: "b",
                explanation: "cos 45° = √2 / 2 ≈ 0.707. Ez is egy nevezetes szögfüggvény érték."
            },
            {
                question: "Egy derékszögű háromszög átfogója 50, egyik hegyesszöge 25°. Milyen hosszú a szöggel szomszédos befogó?",
                options: { a: "50 * cos 25°", b: "50 * sin 25°", c: "50 / tan 25°" },
                correct: "a",
                explanation: "A szomszédos befogót (b) keressük. cos 25° = b / 50. Átrendezve: b = 50 * cos 25°."
            },
            {
                question: "Ha egy derékszögű háromszögben ismerjük az 'a' befogót és a 'c' átfogót, hogyan számoljuk ki a β szöget?",
                options: { a: "sin β = a/c", b: "cos β = a/c", c: "tan β = a/c" },
                correct: "b",
                explanation: "A β szöghöz képest az 'a' befogó a szomszédos befogó. Ezért a koszinuszát tudjuk felírni: cos β = szomszédos/átfogó = a/c."
            },
            {
                question: "Egy egyenlő szárú háromszög alapja 10 cm, a szárak 13 cm-esek. Milyen magas a háromszög?",
                options: { a: "12 cm", b: "13 cm", c: "√194 cm" },
                correct: "a",
                explanation: "A magasság felezi az alapot, így két derékszögű háromszöget kapunk. Ezek befogói a magasság (m) és az alap fele (5), átfogója a szár (13). Pitagorasz-tétel: m² + 5² = 13². m² + 25 = 169. m² = 144. m = 12 cm."
            },
            {
                question: "Az előző feladatban (alap:10, szár:13, magasság:12) mekkora az alapon fekvő szög szinusza?",
                options: { a: "12/13", b: "5/13", c: "12/5" },
                correct: "a",
                explanation: "A derékszögű háromszögben a szöggel szemközti befogó a magasság (12), az átfogó a szár (13). Tehát sin α = 12/13."
            },
            {
                question: "Egy derékszögű háromszögben a=1, c=2. Mekkora az 'a' oldallal szemközti szög?",
                options: { a: "45°", b: "30°", c: "60°" },
                correct: "b",
                explanation: "sin α = szemközti / átfogó = 1/2 = 0.5. Az a szög, aminek a szinusza 0.5, az a 30°."
            },
            {
                question: "Egy ház falától 15 méterre a talajról 20°-os szögben látjuk az eresz vonalát. Milyen magasan van az eresz?",
                options: { a: "15 * tan 20°", b: "15 / tan 20°", c: "15 * sin 20°" },
                correct: "a",
                explanation: "Az eresz magassága a szöggel szemközti befogó, a távolság a szomszédos. tan 20° = magasság / 15. Átrendezve: magasság = 15 * tan 20°."
            },
            {
                question: "Mi a teendő, ha egy háromszögben α=50°, β=60° és c=10 adatokat ismerjük?",
                options: { a: "Pitagorasz-tételt kell használni.", b: "Ez nem derékszögű, nem tudjuk megoldani.", c: "Kiszámoljuk a harmadik szöget, és a szinusztételt használjuk (magasabb tananyag)." },
                correct: "b",
                explanation: "A megadott adatokkal a háromszög nem derékszögű, mivel a hegyesszögek összege 110°, nem 90°. Az itt tanult módszerekkel (Pitagorasz, alap szögfüggvények) nem oldható meg."
            },
            {
                question: "Egy derékszögű háromszög befogói 9 cm és 12 cm. Mekkora az átfogó?",
                options: { a: "21 cm", b: "15 cm", c: "10 cm" },
                correct: "b",
                explanation: "Pitagorasz-tétel: c² = 9² + 12² = 81 + 144 = 225. Ebből c = √225 = 15 cm."
            },
            {
                question: "Melyik két adat ismerete szükséges legalább egy derékszögű háromszög megoldásához (a 90°-os szöget nem számítva)?",
                options: { a: "Egy oldal és egy szög.", b: "Két oldal.", c: "Mindkettő lehetőség elegendő." },
                correct: "c",
                explanation: "Egy derékszögű háromszög megoldásához a 90°-os szögön kívül elegendő ismerni vagy két oldalt, vagy egy oldalt és egy hegyesszöget."
            }
        ];

        const questionsContainer = document.getElementById('questions-container');
        const checkBtns = document.querySelectorAll('.check-btn');
        const pinInputs = document.querySelectorAll('.pin-code-input');
        const resultContainers = document.querySelectorAll('.result-container');
        const adminPanels = document.querySelectorAll('.admin-panel');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">
                            <label for="q${index}a">
                                <input type="radio" name="question${index}" id="q${index}a" value="a">
                                ${item.options.a}
                            </label>
                            <label for="q${index}b">
                                <input type="radio" name="question${index}" id="q${index}b" value="b">
                                ${item.options.b}
                            </label>
                            <label for="q${index}c">
                                <input type="radio" name="question${index}" id="q${index}c" value="c">
                                ${item.options.c}
                            </label>
                        </div>
                        <div class="explanation" id="explanation-${index}">
                            <strong>Magyarázat:</strong> ${item.explanation}
                        </div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = pinInputs[0].value; // Elég az elsőből olvasni, mert szinkronizáltak
            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('Érvénytelen PIN kód! Kérjük, adjon meg egy érvényes tanulói (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`Kérjük, válaszolj az összes kérdésre! Jelenleg ${answeredQuestions}/${shuffledData.length} kérdésre válaszoltál.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtns.forEach(btn => btn.disabled = true);
            pinInputs.forEach(input => input.disabled = true);

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);

                if (isMaster) {
                    explanationDiv.style.display = 'block';
                    const correctLabel = document.querySelector(`label[for="q${index}${item.correct}"]`);
                    correctLabel.classList.add('master-correct');
                } else {
                    explanationDiv.style.display = 'block';
                }

                if (selectedOption) {
                    const selectedLabel = selectedOption.parentElement;
                    if (selectedOption.value === item.correct) {
                        score++;
                        selectedLabel.classList.add('correct-answer', 'label-correct');
                    } else {
                        selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                        const correctLabel = document.querySelector(`label[for="q${index}${item.correct}"]`);
                        correctLabel.classList.add('correct-answer');
                    }
                } else if (isMaster) {
                    const correctLabel = document.querySelector(`label[for="q${index}${item.correct}"]`);
                    correctLabel.classList.add('correct-answer');
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            const resultText = `Eredményed: ${score} / ${shuffledData.length} (${percentage}%)`;
            resultContainers.forEach(container => container.innerHTML = resultText);

            if (isMaster) {
                adminPanels.forEach(panel => panel.style.display = 'block');
            }
        }

        // Eseménykezelők hozzáadása az összes vezérlőhöz
        document.addEventListener('DOMContentLoaded', renderQuiz);
        
        checkBtns.forEach(btn => {
            btn.addEventListener('click', checkAnswers);
        });

        pinInputs.forEach(input => {
            // Enter gombos ellenőrzés
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
            // PIN mezők szinkronizálása
            input.addEventListener('input', (e) => {
                pinInputs.forEach(otherInput => {
                    if (otherInput !== e.target) {
                        otherInput.value = e.target.value;
                    }
                });
            });
        });

    </script>
</body>
</html>