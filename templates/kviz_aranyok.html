<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: Arányok és aránypárok</title>
  <style>
    :root {
      --primary-color: #388d3c; /* Zöld */
      --secondary-color: #d52b1e; /* Piros */
      --light-green: #e8f5e9;
      --light-red: #ffebee;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, var(--secondary-color), var(--text-light), var(--primary-color));
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: var(--light-green);
      border-color: var(--primary-color);
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: var(--light-red);
      border-color: var(--secondary-color);
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #2a6a2d;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: Arányok és aránypárok</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
      { q: "Melyik aránypár helyes?", a: "2/3 = 4/5", b: "3/4 = 9/12", c: "1/2 = 2/3", correct: "b", exp: "Egy aránypár akkor helyes, ha a két arány értéke megegyezik. A 9/12 törtet 3-mal egyszerűsítve 3/4-et kapunk, tehát a 3/4 = 9/12 egyenlőség igaz." },
      { q: "Mi az aránypár alaptulajdonsága?", a: "A kültagok összege egyenlő a beltagok összegével.", b: "A kültagok szorzata egyenlő a beltagok szorzatával.", c: "A számlálók szorzata egyenlő a nevezők szorzatával.", correct: "b", exp: "Az a/b = c/d aránypárban 'a' és 'd' a kültagok, 'b' és 'c' a beltagok. Az alaptulajdonság szerint a⋅d = b⋅c. Ezt hívjuk keresztbe szorzásnak is." },
      { q: "Oldd meg az x/5 = 8/10 aránypárt!", a: "x = 4", b: "x = 5", c: "x = 8", correct: "a", exp: "Az aránypár alaptulajdonságát használva: 10⋅x = 5⋅8. 10x = 40. Az egyenletet 10-zel osztva x = 4. Másik megoldás: egyszerűsítjük a 8/10 arányt 4/5-re. Ekkor x/5 = 4/5, amiből látszik, hogy x=4." },
      { q: "Két szám aránya 2:5. A kisebbik szám a 10. Melyik a nagyobbik?", a: "20", b: "25", c: "50", correct: "b", exp: "Ha a két szám aránya 2:5, akkor x/y = 2/5. A kisebbik x=10. Behelyettesítve: 10/y = 2/5. Keresztbe szorozva: 10⋅5 = 2⋅y. 50 = 2y. y = 25." },
      { q: "Mikor mondjuk, hogy két mennyiség egyenesen arányos?", a: "Ha az egyik növekedésével a másik csökken.", b: "Ha a hányadosuk állandó.", c: "Ha a szorzatuk állandó.", correct: "b", exp: "Két mennyiség (legyen x és y) akkor egyenesen arányos, ha az arányuk, azaz a hányadosuk (x/y) állandó. Ez azt jelenti, ha az egyik k-szorosára nő, a másik is k-szorosára nő." },
      { q: "Ha 3 kg alma 600 Ft, mennyibe kerül 5 kg alma?", a: "1000 Ft", b: "1200 Ft", c: "800 Ft", correct: "a", exp: "Ez egy egyenes arányosság. Először kiszámoljuk 1 kg alma árát: 600 Ft / 3 kg = 200 Ft/kg. Ezután megszorozzuk a kívánt mennyiséggel: 5 kg × 200 Ft/kg = 1000 Ft." },
      { q: "Egy 50 cm-es szakaszt 2:3 arányban osztunk fel. Milyenek a részek?", a: "25 cm és 25 cm", b: "10 cm és 40 cm", c: "20 cm és 30 cm", correct: "c", exp: "Az arányos részek száma összesen 2+3=5. Egy 'rész' hossza 50 cm / 5 = 10 cm. A két darab hossza: 2 × 10 cm = 20 cm és 3 × 10 cm = 30 cm." },
      { q: "Egy térkép méretaránya 1:200 000. Mit jelent ez?", a: "1 cm a térképen 2 km a valóságban.", b: "1 cm a térképen 20 km a valóságban.", c: "1 m a térképen 200 km a valóságban.", correct: "a", exp: "A méretarány azt jelenti, hogy 1 cm a térképen 200 000 cm a valóságban. Váltsuk át a valós távolságot: 200 000 cm = 2000 m = 2 km." },
      { q: "Mikor mondjuk, hogy két mennyiség fordítottan arányos?", a: "Ha a hányadosuk állandó.", b: "Ha a szorzatuk állandó.", c: "Ha az egyik növekedésével a másik is növekszik.", correct: "b", exp: "Két mennyiség (x és y) akkor fordítottan arányos, ha a szorzatuk állandó (x⋅y = k). Ez azt jelenti, ha az egyik k-szorosára nő, a másik 1/k-szorosára csökken." },
      { q: "Ha 4 munkás 6 nap alatt végez el egy munkát, akkor 8 munkás hány nap alatt végez vele?", a: "12 nap", b: "3 nap", c: "6 nap", correct: "b", exp: "Ez egy fordított arányosság. Ha a munkások számát duplázzuk, az elvégzéshez szükséges idő feleződik. 6 nap / 2 = 3 nap. Képlettel: 4⋅6 = 8⋅x → 24 = 8x → x=3." },
      { q: "Mivel egyenlő 40-nek a 25%-a?", a: "10", b: "25", c: "16", correct: "a", exp: "A 25% az 1/4 részt jelenti. 40-nek az 1/4-e: 40/4=10. Képlettel: (40 × 25) / 100 = 1000 / 100 = 10." },
      { q: "Egy osztályban 12 fiú és 18 lány van. Mi a fiúk és a lányok aránya?", a: "12:18", b: "3:2", c: "2:3", correct: "c", exp: "A fiúk és lányok aránya 12:18. Ezt a törtet egyszerűsíteni kell. Mindkét szám osztható 6-tal: 12/6 = 2 és 18/6 = 3. Tehát az arány 2:3." },
      { q: "Egy autó 100 km-en 8 liter benzint fogyaszt. Hány litert fogyaszt 350 km-en?", a: "24 liter", b: "28 liter", c: "35 liter", correct: "b", exp: "Egyenes arányosság. A 100 km-re jutó fogyasztás alapján az arányossági tényező 8/100. 350 km-en: 350 × (8/100) = 3.5 × 8 = 28 liter." },
      { q: "Melyik nem aránypár?", a: "1/2 = 5/10", b: "3/5 = 6/10", c: "2/7 = 7/2", correct: "c", exp: "Az 'a' és 'b' esetekben a törtek értéke egyenlő, tehát aránypárt alkotnak. A 'c' esetben 2/7 ≠ 7/2, tehát ez nem aránypár." },
      { q: "Egy áru ára 20%-kal nőtt. Az új ár az eredetinek hány százaléka?", a: "120%", b: "80%", c: "20%", correct: "a", exp: "Az eredeti ár a 100%. Ha ezt megnöveljük 20%-kal, akkor 100% + 20% = 120% lesz az új ár." },
      { q: "Ha 5 ember 12 óra alatt szedi le az almát, akkor 3 embernek mennyi időre van szüksége?", a: "7,2 óra", b: "20 óra", c: "15 óra", correct: "b", exp: "Fordított arányosság: a munkások száma és az idő szorzata állandó. 5 × 12 = 3 × x. 60 = 3x. x = 20 óra." },
      { q: "Mi az 5000 méter és 10 kilométer aránya?", a: "1:2", b: "5:1", c: "500:1", correct: "a", exp: "Az arány felírásához azonos mértékegységre kell hozni a mennyiségeket. 10 km = 10 000 méter. Az arány 5000 m : 10 000 m. Egyszerűsítve 5000-rel: 1:2." },
      { q: "Egy süteményhez 3 rész liszt és 2 rész cukor kell. Ha 60 dkg lisztet használunk, mennyi cukor kell?", a: "90 dkg", b: "40 dkg", c: "60 dkg", correct: "b", exp: "Az arány liszt/cukor = 3/2. Behelyettesítve: 60/cukor = 3/2. Keresztbe szorozva: 60×2 = 3×cukor. 120 = 3×cukor. cukor = 40 dkg." },
      { q: "Egy tervrajzon egy alkatrész 5 cm, a valóságban 2,5 m. Mi a tervrajz méretaránya?", a: "1:5", b: "1:50", c: "1:500", correct: "b", exp: "Hozzuk közös mértékegységre: 2,5 m = 250 cm. A méretarány rajz:valóság = 5 cm : 250 cm. Egyszerűsítsünk 5-tel: 1:50." },
      { q: "Mi az egyszerű hármasszabály?", a: "A harmadik tagot elosztjuk az elsővel és megszorozzuk a másodikkal.", b: "Egy aránypár ismeretlen tagjának kiszámítási módszere.", c: "Három szám számtani közepének kiszámítása.", correct: "b", exp: "Az egyszerű hármasszabály egy olyan eljárás, amellyel egy aránypár negyedik, ismeretlen tagját határozzuk meg a másik három ismert tag segítségével. Ez az egyenes és fordított arányosság gyakorlati számítási módszere." },
      { q: "Egy autó 6 óra alatt tesz meg egy utat 80 km/h sebességgel. Mennyi idő alatt teszi meg ugyanezt az utat 120 km/h sebességgel?", a: "4 óra", b: "9 óra", c: "6 óra", correct: "a", exp: "Fordított arányosság: sebesség × idő = állandó. 6 × 80 = x × 120. 480 = 120x. x = 480/120 = 4 óra." },
      { q: "Melyik nem ír le arányt?", a: "25%", b: "3/4", c: "10 kg", correct: "c", exp: "Az arány két mennyiség viszonyát, hányadosát jelenti. A 25% a 25/100 arányt jelöli, a 3/4 szintén egy arány. A 10 kg egy konkrét mennyiség, nem viszonyszám." },
      { q: "Egy 120 oldalas könyv 20%-át olvastam el. Hány oldal van még hátra?", a: "24", b: "96", c: "100", correct: "b", exp: "Elolvasott oldalak: (120 × 20)/100 = 24 oldal. Hátravan: 120 - 24 = 96 oldal. Vagy: a 100%-80% van hátra. (120 × 80)/100=96." },
      { q: "Két szám aránya 7:4. Különbségük 15. Melyik a nagyobbik szám?", a: "20", b: "35", c: "28", correct: "b", exp: "Az arányos részek különbsége 7-4=3. Ez a 3 rész felel meg a 15-nek. Akkor 1 rész 15/3=5. A nagyobbik szám 7 részből áll: 7 × 5 = 35." },
      { q: "Egy 100 literes hordó 30%-ig van tele. Hány liter vizet kell még beleöntenünk, hogy tele legyen?", a: "30 liter", b: "130 liter", c: "70 liter", correct: "c", exp: "A hordó 100% - 30% = 70%-a üres. Tehát a 100 liter 70%-át kell beleöntenünk, ami 70 liter." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>