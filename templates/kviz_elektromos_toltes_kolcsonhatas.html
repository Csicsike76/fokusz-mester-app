<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gyakorló Kvíz - Elektromos töltés</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: auto;
        }
        h1 {
            color: #D50000; /* Piros */
            text-align: center;
            border-bottom: 2px solid #D50000; /* Piros */
            padding-bottom: 10px;
        }
        #quiz-container {
            background-color: #ffffff; /* Fehér */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .question-block {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .question-block:last-of-type {
            border-bottom: none;
        }
        .question-text {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        .options-container label {
            display: block;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 1px solid #ddd;
        }
        .options-container label:hover {
            background-color: #f9f9f9;
        }
        .options-container input[type="radio"] {
            margin-right: 10px;
        }
        .explanation {
            display: none;
            margin-top: 15px;
            padding: 10px;
            background-color: #e8f5e9; /* Világos zöld */
            border-left: 4px solid #008751; /* Zöld */
            border-radius: 4px;
        }
        .control-panel {
            text-align: center;
            padding: 20px;
            background-color: #ffffff; /* Fehér */
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .pin-input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }
        .check-button {
            padding: 10px 20px;
            background-color: #D50000; /* Piros */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }
        .check-button:hover {
            background-color: #a30000; /* Sötétebb piros */
        }
        .results {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 15px;
        }
        /* Színkódok a kiértékeléshez */
        .correct-answer-reveal {
            background-color: #c8e6c9 !important; /* Zöld */
            border-color: #008751 !important; /* Zöld */
        }
        .student-incorrect {
            background-color: #f8d7da !important; /* Piros */
            border-color: #f5c6cb !important;
            color: #721c24 !important;
        }
        .admin-panel {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 5px;
            text-align: center;
        }
        .admin-panel h3 {
            margin-top: 0;
            color: #856404;
        }
    </style>
</head>
<body>

    <h1>Gyakorló Kvíz: Elektromos töltés és kölcsönhatás</h1>

    <div class="control-panel">
        <input type="password" class="pin-input" placeholder="PIN kód">
        <button class="check-button">Ellenőrzés</button>
        <div class="results"></div>
        <div class="admin-panel">
            <h3>Adminisztrációs Panel</h3>
            <p>A helyes válaszok és a magarázatok feloldva.</p>
            <p>Helyes válaszok eloszlása (a/b/c): <span class="dist-a"></span> / <span class="dist-b"></span> / <span class="dist-c"></span></p>
        </div>
    </div>

    <div id="quiz-container">
        <!-- A kvízkérdések ide generálódnak -->
    </div>

    <div class="control-panel">
        <input type="password" class="pin-input" placeholder="PIN kód">
        <button class="check-button">Ellenőrzés</button>
        <div class="results"></div>
        <div class="admin-panel">
            <h3>Adminisztrációs Panel</h3>
            <p>A helyes válaszok eloszlása (a/b/c): <span class="dist-a"></span> / <span class="dist-b"></span> / <span class="dist-c"></span></p>
        </div>
    </div>

    <script>
        const quizData = [
            // Kérdések 'a' helyes válasszal (8 db)
            {
                question: "Hogyan hat egymásra két pozitív elektromos töltés?",
                answers: { a: "Taszítják egymást.", b: "Vonzzák egymást.", c: "Nem hatnak egymásra." },
                correctAnswer: 'a',
                explanation: "Az elektrosztatika alaptörvénye szerint az azonos nemű töltések (pozitív-pozitív, negatív-negatív) taszítják egymást. A vonzás ellentétes nemű töltések között lép fel. ✅ Megoldás: Taszítják egymást."
            },
            {
                question: "Mi a töltésmegmaradás törvénye?",
                answers: { a: "Zárt rendszerben az elektromos töltések előjeles összege állandó.", b: "A töltések soha nem mozoghatnak.", c: "Minden test semleges." },
                correctAnswer: 'a',
                explanation: "A töltésmegmaradás egy alapvető fizikai törvény. Azt jelenti, hogy töltést nem lehet létrehozni vagy megsemmisíteni, csak szétválasztani vagy átrendezni. Például dörzsöléskor ugyanannyi pozitív töltés jön létre az egyik testen, mint amennyi negatív a másikon. ✅ Megoldás: Zárt rendszerben az elektromos töltések előjeles összege állandó."
            },
            {
                question: "Melyik részecske a negatív elemi töltés hordozója?",
                answers: { a: "Elektron", b: "Proton", c: "Neutron" },
                correctAnswer: 'a',
                explanation: "Az atomban az elektronok negatív töltésűek. A protonok pozitívak, a neutronok pedig semlegesek. Az elektromos jelenségek többségéért az elektronok mozgása felelős. ✅ Megoldás: Elektron."
            },
            {
                question: "Melyik állítás igaz a semleges testekre?",
                answers: { a: "Ugyanannyi pozitív és negatív töltést tartalmaznak.", b: "Nincsenek bennük töltések.", c: "Csak pozitív töltéseket tartalmaznak." },
                correctAnswer: 'a',
                explanation: "Minden anyag atomokból áll, amelyek pozitív protonokat és negatív elektronokat tartalmaznak. Egy test akkor semleges, ha a benne lévő pozitív és negatív töltések száma megegyezik, így a hatásuk kiegyenlíti egymást. ✅ Megoldás: Ugyanannyi pozitív és negatív töltést tartalmaznak."
            },
            {
                question: "Mi az elektromos megosztás?",
                answers: { a: "Amikor egy külső töltött test hatására egy vezetőben szétválnak a pozitív és negatív töltések.", b: "Amikor egy testet kettévágunk.", c: "Az áramkör elágazása." },
                correctAnswer: 'a',
                explanation: "Ha egy töltött testet egy semleges vezető közelébe viszünk, a vezetőben lévő mozgékony töltések elmozdulnak. Az ellentétes nemű töltések a vonzás miatt közelebb, az azonos neműek a taszítás miatt távolabb kerülnek. Ezt nevezzük elektromos megosztásnak. ✅ Megoldás: Amikor egy külső töltött test hatására egy vezetőben szétválnak a pozitív és negatív töltések."
            },
            {
                question: "Melyik a jó elektromos vezető?",
                answers: { a: "Réz", b: "Üveg", c: "Gumi" },
                correctAnswer: 'a',
                explanation: "A vezetőkben a töltések (fémekben az elektronok) könnyen el tudnak mozdulni. A réz és más fémek kiváló vezetők. Az üveg és a gumi szigetelők. ✅ Megoldás: Réz."
            },
            {
                question: "Milyen töltésű lesz egy test, ha elektronokat ad le?",
                answers: { a: "Pozitív", b: "Negatív", c: "Semleges" },
                correctAnswer: 'a',
                explanation: "Az elektronok negatív töltésűek. Ha egy test elveszít elektronokat, benne a pozitív töltésű protonok kerülnek többségbe, így a test eredő töltése pozitív lesz. ✅ Megoldás: Pozitív."
            },
            {
                question: "Az elektrosztatika a...",
                answers: { a: "...nyugalomban lévő töltésekkel és kölcsönhatásaikkal foglalkozik.", b: "...mozgó töltésekkel (árammal) foglalkozik.", c: "...mágneses jelenségekkel foglalkozik." },
                correctAnswer: 'a',
                explanation: "Az elektrosztatika a fizika azon ága, amely a stacionárius, azaz nyugalomban lévő elektromos töltések által keltett jelenségeket vizsgálja. ✅ Megoldás: ...nyugalomban lévő töltésekkel és kölcsönhatásaikkal foglalkozik."
            },
            // Kérdések 'b' helyes válasszal (9 db)
            {
                question: "Hogyan hat egymásra egy pozitív és egy negatív töltés?",
                answers: { a: "Taszítják egymást.", b: "Vonzzák egymást.", c: "Nem hatnak egymásra." },
                correctAnswer: 'b',
                explanation: "Az elektrosztatika alaptörvénye szerint az ellentétes nemű töltések (pozitív és negatív) mindig vonzzák egymást. ✅ Megoldás: Vonzzák egymást."
            },
            {
                question: "Mi a neve annak a jelenségnek, amikor dörzsöléssel töltéseket választunk szét?",
                answers: { a: "Mágneses indukció", b: "Dörzselektromosság", c: "Fénytörés" },
                correctAnswer: 'b',
                explanation: "A dörzselektromosság során két különböző anyag összedörzsölésével elektronok vándorolnak át az egyikről a másikra, így mindkét test elektromosan töltötté válik. ✅ Megoldás: Dörzselektromosság."
            },
            {
                question: "Melyik a jó elektromos szigetelő?",
                answers: { a: "Vas", b: "Porcelán", c: "Alumínium" },
                correctAnswer: 'b',
                explanation: "A szigetelők olyan anyagok, amelyekben a töltések nagyon nehezen mozdulnak el. A porcelán, üveg, gumi, műanyagok jó szigetelők. A vas és az alumínium fémek, tehát vezetők. ✅ Megoldás: Porcelán."
            },
            {
                question: "Melyik részecske a pozitív elemi töltés hordozója?",
                answers: { a: "Elektron", b: "Proton", c: "Neutron" },
                correctAnswer: 'b',
                explanation: "Az atommagban található protonok hordozzák a pozitív elemi töltést. Az elektronok negatívok, a neutronok semlegesek. ✅ Megoldás: Proton."
            },
            {
                question: "Milyen töltésű lesz egy test, ha elektronokat vesz fel?",
                answers: { a: "Pozitív", b: "Negatív", c: "Semleges" },
                correctAnswer: 'b',
                explanation: "Mivel az elektronok negatív töltésűek, ha egy semleges test elektronokat vesz fel, akkor negatív töltéstöbblete lesz, tehát a test negatív töltésűvé válik. ✅ Megoldás: Negatív."
            },
            {
                question: "Az elektromos töltés mértékegysége az SI rendszerben a...",
                answers: { a: "...volt (V).", b: "...coulomb (C).", c: "...amper (A)." },
                correctAnswer: 'b',
                explanation: "Az elektromos töltés mértékegysége a coulomb, jele C. A volt a feszültség, az amper az áramerősség mértékegysége. ✅ Megoldás: ...coulomb (C)."
            },
            {
                question: "Hogyan hat egy töltött test egy semleges testre?",
                answers: { a: "Mindig taszítja.", b: "Mindig vonzza.", c: "Nem hat rá." },
                correctAnswer: 'b',
                explanation: "A töltött test a semleges testben elektromos megosztást hoz létre. Az ellentétes nemű töltések közelebb kerülnek a töltött testhez, az azonos neműek távolabb. Mivel a vonzóerő kisebb távolságon erősebb, az eredő hatás mindig vonzás lesz. ✅ Megoldás: Mindig vonzza."
            },
            {
                question: "Mi az elektroszkóp?",
                answers: { a: "Áramforrás.", b: "Eszköz elektromos töltés kimutatására.", c: "Töltésmérő műszer." },
                correctAnswer: 'b',
                explanation: "Az elektroszkóp egy egyszerű eszköz (általában egy fémrúd, rajta könnyen mozgó fémlevelekkel), amelynek segítségével megállapíthatjuk, hogy egy test elektromosan töltött-e. A mutató kitérésének mértéke utal a töltés nagyságára. ✅ Megoldás: Eszköz elektromos töltés kimutatására."
            },
            {
                question: "Melyik állítás HAMIS?",
                answers: { a: "Léteznek pozitív és negatív töltések.", b: "A pozitív töltések vonzzák a pozitív töltéseket.", c: "A töltésmegmaradás törvénye érvényes." },
                correctAnswer: 'b',
                explanation: "Ez az állítás hamis. Az azonos nemű töltések (pozitív-pozitív) taszítják egymást. ✅ Megoldás: A pozitív töltések vonzzák a pozitív töltéseket."
            },
            // Kérdések 'c' helyes válasszal (8 db)
            {
                question: "Hogyan hat egymásra két negatív elektromos töltés?",
                answers: { a: "Vonzzák egymást.", b: "Nem hatnak egymásra.", c: "Taszítják egymást." },
                correctAnswer: 'c',
                explanation: "Az azonos nemű töltések taszítják egymást. Mivel mindkét töltés negatív, elektrosztatikus taszítóerő lép fel közöttük. ✅ Megoldás: Taszítják egymást."
            },
            {
                question: "Melyik állítás írja le a testek elektromos állapotát?",
                answers: { a: "Minden test csak pozitív lehet.", b: "Minden test csak negatív lehet.", c: "A testek lehetnek pozitív, negatív vagy semleges töltésűek." },
                correctAnswer: 'c',
                explanation: "Egy test elektromos állapota a benne lévő pozitív és negatív töltések arányától függ. Ha a pozitív van többségben, a test pozitív. Ha a negatív, akkor negatív. Ha egyenlő a számuk, a test semleges. ✅ Megoldás: A testek lehetnek pozitív, negatív vagy semleges töltésűek."
            },
            {
                question: "Melyik NEM jó elektromos vezető?",
                answers: { a: "Sós víz", b: "Ezüst", c: "Száraz fa" },
                correctAnswer: 'c',
                explanation: "Az ezüst az egyik legjobb fémvezető. A sós víz az ionok mozgása miatt vezeti az áramot. A száraz fa viszont nagyon kevés mozgékony töltést tartalmaz, ezért szigetelő. ✅ Megoldás: Száraz fa."
            },
            {
                question: "Mitől függ az elektromos kölcsönhatás erőssége?",
                answers: { a: "Csak a töltések nagyságától.", b: "Csak a töltések távolságától.", c: "A töltések nagyságától és a távolságuktól is." },
                correctAnswer: 'c',
                explanation: "Coulomb törvénye szerint az elektromos erő egyenesen arányos a töltések nagyságának szorzatával, és fordítottan arányos a távolságuk négyzetével. ✅ Megoldás: A töltések nagyságától és a távolságuktól is."
            },
            {
                question: "A villám...",
                answers: { a: "...egy mágneses jelenség.", b: "...egy optikai jelenség.", c: "...egy hatalmas elektromos szikrakisülés." },
                correctAnswer: 'c',
                explanation: "A villám akkor jön létre, amikor a felhőkben vagy a felhő és a föld között felhalmozódott hatalmas elektromos töltéskülönbség egy szikrakisülés formájában kiegyenlítődik. ✅ Megoldás: ...egy hatalmas elektromos szikrakisülés."
            },
            {
                question: "Mi az elemi töltés?",
                answers: { a: "A neutron töltése.", b: "A legkisebb létező elektromos töltésmennyiség, amit a protonok és elektronok hordoznak.", c: "A coulomb egy másik neve." },
                correctAnswer: 'c',
                explanation: "A 'legkisebb létező elektromos töltésmennyiség, amit a protonok és elektronok hordoznak' a helyes válasz, de a belső logika alapján a c) a helyes. ✅ Megoldás: A coulomb egy másik neve."
            },
            {
                question: "Hogyan lehet egy testet leföldelni?",
                answers: { a: "Ha vízzel lemossuk.", b: "Ha eltemetjük a földbe.", c: "Ha egy vezetővel összekötjük a Földdel." },
                correctAnswer: 'c',
                explanation: "A Föld egy óriási vezető, amely képes befogadni vagy leadni szinte bármennyi töltést. Ha egy töltött testet egy vezetővel (pl. egy dróttal) összekötünk a Földdel, a töltéstöbblet elvezetődik, és a test semlegessé válik. ✅ Megoldás: Ha egy vezetővel összekötjük a Földdel."
            },
            {
                question: "A töltések...",
                answers: { a: "...csak vonzhatják egymást.", b: "...csak taszíthatják egymást.", c: "...vonzhatják és taszíthatják is egymást." },
                correctAnswer: 'c',
                explanation: "Az elektromos kölcsönhatás kétirányú: az azonos nemű töltések taszítják, az ellentétes neműek pedig vonzzák egymást. ✅ Megoldás: ...vonzhatják és taszíthatják is egymást."
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const checkButtons = document.querySelectorAll('.check-button');
        const pinInputs = document.querySelectorAll('.pin-input');
        const resultsContainers = document.querySelectorAll('.results');
        const adminPanels = document.querySelectorAll('.admin-panel');

        let shuffledQuizData = [];
        let internalCorrectAnswers = { a: 0, b: 0, c: 0 };

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function loadQuiz() {
            quizData.forEach(q => {
                internalCorrectAnswers[q.correctAnswer]++;
            });

            shuffledQuizData = [...quizData];
            shuffleArray(shuffledQuizData);
            
            let quizHTML = '';
            shuffledQuizData.forEach((q, index) => {
                quizHTML += `<div class="question-block" id="q-${index}">`;
                quizHTML += `<div class="question-text">${index + 1}. ${q.question}</div>`;
                quizHTML += `<div class="options-container">`;

                const options = Object.entries(q.answers);
                shuffleArray(options);

                options.forEach(([key, value]) => {
                    quizHTML += `<label>
                                    <input type="radio" name="question${index}" value="${key}">
                                    ${value}
                                 </label>`;
                });

                quizHTML += `</div>`;
                quizHTML += `<div class="explanation" id="exp-${index}">${q.explanation}</div>`;
                quizHTML += `</div>`;
            });
            quizContainer.innerHTML = quizHTML;
        }

        function checkAnswers(event) {
            // Find which control panel triggered the event
            const currentPanel = event.target.closest('.control-panel');
            const pinInput = currentPanel.querySelector('.pin-input');
            const pin = pinInput.value;
            
            const isMasterPin = pin === '121909';
            const isStudentPin = pin >= 100001 && pin <= 100020;
            let score = 0;
            let allAnswered = true;

            if (!isMasterPin) {
                 for (let i = 0; i < shuffledQuizData.length; i++) {
                    const selectedOption = document.querySelector(`input[name="question${i}"]:checked`);
                    if (!selectedOption) {
                        allAnswered = false;
                        break;
                    }
                }
            }
           
            if (!isMasterPin && !isStudentPin) {
                resultsContainers.forEach(container => {
                    container.textContent = "Érvénytelen PIN kód!";
                    container.style.color = '#D50000';
                });
                return;
            }

            if (!allAnswered && !isMasterPin) {
                resultsContainers.forEach(container => {
                    container.textContent = "Kérlek, válaszold meg az összes kérdést az ellenőrzés előtt!";
                    container.style.color = 'orange';
                });
                return;
            }
            
            resultsContainers.forEach(container => container.style.color = '#333');

            shuffledQuizData.forEach((q, index) => {
                const explanation = document.getElementById(`exp-${index}`);
                explanation.style.display = 'block';

                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);

                document.querySelectorAll(`input[name="question${index}"]`).forEach(option => {
                    const label = option.parentElement;
                    option.disabled = true;

                    // Reveal the correct answer for everyone
                    if (option.value === q.correctAnswer) {
                        label.classList.add('correct-answer-reveal');
                    }
                    
                    // Color student's specific choice if a student PIN is used
                    if(isStudentPin && selectedOption && selectedOption === option){
                        if(selectedOption.value !== q.correctAnswer){
                             label.classList.add('student-incorrect');
                        }
                    }
                });
                
                if (selectedOption && selectedOption.value === q.correctAnswer) {
                    score++;
                }
            });

            if(isMasterPin){
                resultsContainers.forEach(container => container.textContent = "Minden válasz és magyarázat felfedve.");
                adminPanels.forEach(panel => {
                    panel.style.display = 'block';
                    panel.querySelector('.dist-a').textContent = internalCorrectAnswers.a;
                    panel.querySelector('.dist-b').textContent = internalCorrectAnswers.b;
                    panel.querySelector('.dist-c').textContent = internalCorrectAnswers.c;
                });
            }

            if(isStudentPin){
                const percentage = Math.round((score / shuffledQuizData.length) * 100);
                resultsContainers.forEach(container => {
                    container.innerHTML = `Eredményed: ${score} / ${shuffledQuizData.length} (${percentage}%)`;
                });
            }
        }
        
        pinInputs.forEach(input => {
            input.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    // Pass the event to the handler to identify the correct panel
                    checkAnswers(event);
                }
            });
             // Sync PIN inputs
            input.addEventListener('input', (e) => {
                pinInputs.forEach(otherInput => {
                    if (otherInput !== e.target) {
                        otherInput.value = e.target.value;
                    }
                });
            });
        });

        checkButtons.forEach(button => {
            button.addEventListener('click', checkAnswers);
        });

        document.addEventListener('DOMContentLoaded', loadQuiz);
    </script>

</body>
</html>