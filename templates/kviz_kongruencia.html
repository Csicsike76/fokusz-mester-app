<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: Kongruens háromszögek</title>
  <style>
    :root {
      --primary-color: #388d3c; /* Zöld */
      --secondary-color: #d52b1e; /* Piros */
      --light-green: #e8f5e9;
      --light-red: #ffebee;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, var(--secondary-color), var(--text-light), var(--primary-color));
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: var(--light-green);
      border-color: var(--primary-color);
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: var(--light-red);
      border-color: var(--secondary-color);
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #2a6a2d;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: Kongruens háromszögek</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
        { q: "Mit jelent az, hogy két háromszög kongruens (egybevágó)?", a: "A szögeik összege megegyezik.", b: "A területük megegyezik.", c: "Alakjuk és méretük is megegyezik, fedésbe hozhatók.", correct: "c", exp: "Két síkidom akkor kongruens (egybevágó), ha létezik olyan távolságtartó transzformáció (eltolás, forgatás, tükrözés), ami az egyiket a másikba viszi. Ez azt jelenti, hogy tökéletesen 'ráhelyezhetők' egymásra." },
        { q: "Melyik NEM az általános háromszögek egybevágóságának alapesete?", a: "Oldal-Oldal-Oldal (O.O.O.)", b: "Szög-Oldal-Szög (Sz.O.Sz.)", c: "Szög-Szög-Szög (Sz.Sz.Sz.)", correct: "c", exp: "A Sz.Sz.Sz. a hasonlóság alapesete. Ha háromszögek szögei megegyeznek, csak annyit tudunk, hogy hasonlók, de nem feltétlenül egybevágóak. Az egybevágósághoz legalább egy oldalegyezés is szükséges." },
        { q: "Két háromszögben egyenlő két-két oldal, és az általuk közbezárt szög. Milyen alapeset alapján kongruensek?", a: "Sz.O.Sz.", b: "O.Sz.O.", c: "O.O.O.", correct: "b", exp: "Ez az Oldal-Szög-Oldal (O.Sz.O.) egybevágósági alapeset. A tétel kimondja, hogy ha két háromszögben két-két oldal hossza és az ezen oldalak által közbezárt szög megegyezik, akkor a két háromszög egybevágó." },
        { q: "Egy ABC háromszögben AB=5, BC=7, ABC∢=40°. Egy MNP háromszögben MN=5, NP=7, MNP∢=40°. Mi a két háromszög viszonya?", a: "Hasonlók, de nem kongruensek.", b: "Kongruensek az O.Sz.O. tétel alapján.", c: "Nem lehet eldönteni.", correct: "b", exp: "Megadtak két-két oldalt (5 és 7) és a közbezárt szöget (40°), amelyek mindkét háromszögben megegyeznek. Az Oldal-Szög-Oldal alapeset szerint a két háromszög egybevágó." },
        { q: "Két háromszögben megegyezik egy-egy oldal, és a rajta fekvő két-két szög. Milyen alapeset alapján kongruensek?", a: "Sz.O.Sz.", b: "O.Sz.O.", c: "Sz.Sz.O.", correct: "a", exp: "Ez a Szög-Oldal-Szög (Sz.O.Sz.) egybevágósági alapeset. Ha egy-egy oldaluk és a rajta fekvő két szögük páronként megegyezik, a két háromszög egybevágó." },
        { q: "Az ABC∆ ≅ DEF∆ jelölés mit jelent?", a: "A két háromszög hasonló.", b: "A két háromszög kongruens (egybevágó).", c: "A két háromszög kerülete egyenlő.", correct: "b", exp: "A ≅ szimbólum a kongruencia (egybevágóság) jele a geometriában." },
        { q: "Két derékszögű háromszög egybevágó, ha...", a: "...egyik hegyesszögük egyenlő.", b: "...befogóik páronként egyenlőek.", c: "...átfogójuk egyenlő.", correct: "b", exp: "Ha a két befogó páronként egyenlő, akkor a köztük lévő szög (a derékszög) is egyenlő. Így az O.Sz.O. tétel szerint egybevágóak. Ezt B.B. (Befogó-Befogó) esetnek is hívjuk." },
        { q: "Miért fontos a megfelelő elemek sorrendje az ABC∆ ≅ MNP∆ jelölésben?", a: "Mert jelzi, hogy melyik csúcs, oldal és szög felel meg egymásnak.", b: "Csak esztétikai szerepe van.", c: "Az ábécé sorrendet jelöli.", correct: "a", exp: "A sorrend kritikus. Az ABC∆ ≅ MNP∆ azt jelenti, hogy A∢=M∢, B∢=N∢, C∢=P∢, valamint AB=MN, BC=NP, AC=MP. Egy másik sorrend (pl. ABC∆ ≅ NMP∆) más megfeleltetést jelentene." },
        { q: "Két háromszög mindhárom oldala páronként egyenlő. Melyik tétel alapján kongruensek?", a: "O.Sz.O.", b: "O.O.O.", c: "Sz.O.Sz.", correct: "b", exp: "Ez az Oldal-Oldal-Oldal (O.O.O.) egybevágósági alapeset. Ha három oldal hossza adott, abból (ha teljesül a háromszög-egyenlőtlenség) csak egyféle háromszög szerkeszthető." },
        { q: "Ha két háromszög kongruens, akkor a területeik...", a: "...is egyenlőek.", b: "...aránya 2.", c: "...lehetnek különbözőek.", correct: "a", exp: "Mivel a kongruens háromszögek méretre és alakra is megegyeznek, minden megfelelő méretük, így a kerületük és a területük is egyenlő." },
        { q: "Melyik feltétel NEM elegendő két derékszögű háromszög egybevágóságához?", a: "Befogójuk és átfogójuk egyenlő.", b: "Egy-egy hegyesszögük és az átfogójuk egyenlő.", c: "Mindhárom szögük egyenlő.", correct: "c", exp: "A szögek egyenlősége csak a hasonlóságot garantálja, az egybevágósághoz legalább egy oldalegyezés is kell. Az 'a' (Á.B.) és 'b' (Á.Sz.) a derékszögű háromszögek speciális egybevágósági esetei." },
        { q: "Egy háromszög oldalai 5, 6, 7. Egy másiké 7, 5, 6. Kongruensek-e?", a: "Igen, az O.O.O. tétel alapján.", b: "Nem, mert a sorrend más.", c: "Csak ha van derékszögük.", correct: "a", exp: "Igen. Az O.O.O. tételnél elég, ha a két háromszög oldalainak halmaza megegyezik, hiszen a megfelelő oldalakat párosítani tudjuk (5-5, 6-6, 7-7). Az oldalak páronként egyenlőek, tehát a háromszögek kongruensek." },
        { q: "Az O-Sz-O alapesetben a szögnek...", a: "...bármelyik szögnek lehet.", b: "...a két adott oldal által közbezárt szögnek kell lennie.", c: "...a nagyobbik oldallal szemközti szögnek kell lennie.", correct: "b", exp: "Az Oldal-Szög-Oldal tétel csak akkor érvényes, ha a két oldal által KÖZBEZÁRT szög egyezik meg. Máskülönben az eset kétértelmű lehet (O.O.Sz. eset)." },
        { q: "Egy egyenlő szárú háromszög alapja 10, a szárai 8. Egy másik egyenlő szárú háromszög alapja 10, szárai 8. Kongruensek?", a: "Nem feltétlenül.", b: "Igen, az O.O.O. tétel miatt.", c: "Igen, az O.Sz.O. tétel miatt.", correct: "b", exp: "Mivel mindhárom oldaluk páronként megegyezik (8=8, 8=8, 10=10), az O.O.O. tétel szerint a két háromszög kongruens." },
        { q: "Milyen transzformációk visznek át egy alakzatot kongruens alakzatba?", a: "Csak a nagyítás és kicsinyítés.", b: "Csak az eltolás.", c: "Eltolás, forgatás és tükrözés.", correct: "c", exp: "Azokat a transzformációkat, amelyek a távolságot megtartják (azaz az alakzat méretét nem változtatják), egybevágósági transzformációknak nevezzük. Ilyen az eltolás, a forgatás és a tengelyes (vagy középpontos) tükrözés." },
        { q: "Ha ABC∆ ≅ XYZ∆, akkor melyik állítás igaz?", a: "AC = YZ", b: "BC = YZ", c: "AB = XZ", correct: "b", exp: "A kongruencia jelölésében a megfelelő csúcsok sorrendje számít. A BC oldalnak (2. és 3. csúcs) az YZ oldal (2. és 3. csúcs) felel meg, tehát ezek egyenlő hosszúak." },
        { q: "Két háromszög két-két szöge és a nagyobbik szöggel szemközti oldala egyenlő. Kongruensek?", a: "Igen, ez a Sz-Sz-O alapeset.", b: "Nem, ez nem elég.", c: "Csak akkor, ha derékszögűek.", correct: "a", exp: "Ez a Szög-Szög-Oldal (Sz.Sz.O.) esete. Ha két szög és a nagyobbikkal szemközti oldal egyenlő, az egyértelműen meghatározza a háromszöget, tehát kongruensek." },
        { q: "Egy rombuszt az egyik átlója két háromszögre bont. Milyenek ezek a háromszögek?", a: "Általánosak", b: "Hasonlók, de nem kongruensek", c: "Kongruensek", correct: "c", exp: "A rombusz négy oldala egyenlő. Az átló közös. Az O.O.O. tétel alapján a két háromszög kongruens. (Mivel egyenlő szárúak is, ez az Sz-O-Sz tételből is következik)." },
        { q: "Melyik állítás igaz a derékszögű háromszögekre?", a: "Ha átfogójuk és egy hegyesszögük egyenlő, kongruensek (Á.Sz.).", b: "Ha átfogójuk és egy befogójuk egyenlő, kongruensek (Á.B.).", c: "Mindkettő igaz.", correct: "c", exp: "Mindkettő a derékszögű háromszögek speciális egybevágósági esete. Az Á.Sz. a Sz.O.Sz., az Á.B. pedig az O.O.Sz. esetből vezethető le a Pitagorasz-tétel segítségével." },
        { q: "Miért NEM elég két oldal egyezése az egybevágósághoz?", a: "Mert a harmadik oldal bármekkora lehet.", b: "Mert a szögek ettől még lehetnek különbözőek.", c: "Mert a harmadik oldal és a szögek is megváltozhatnak.", correct: "c", exp: "Ha csak két oldal adott, a harmadik oldal és a szögek is 'mozoghatnak'. Gondolj két egymáshoz csuklósan rögzített pálcára: a végpontjaik távolsága és a szögek is változtathatóak." },
        { q: "Egy ABC∆ és egy DEF∆ háromszögben AB=DE, BC=EF, és C∢=F∢. Biztosan kongruensek?", a: "Igen, ez az O.O.Sz. eset.", b: "Nem, mert a szög nem a két oldal között van.", c: "Igen, mert három adat megegyezik.", correct: "b", exp: "Ez az Oldal-Oldal-Szög eset, ami nem egybevágósági alapeset. A szögnek a két adott oldal által közbezárt szögnek kellene lennie (B∢=E∢) az O.Sz.O. tételhez." },
        { q: "Ha két háromszög kongruens, akkor a kerületük...", a: "...is egyenlő.", b: "...egymás reciprokai.", c: "...aránya 2.", correct: "a", exp: "Mivel a kongruens háromszögek megfelelő oldalai páronként egyenlő hosszúak, az oldalak összegéből számolt kerületük is szükségszerűen megegyezik." },
        { q: "Egy paralelogrammát az egyik átlója két háromszögre bontja. Melyik tétel alapján kongruensek?", a: "Sz.O.Sz.", b: "O.O.O.", c: "O.Sz.O.", correct: "b", exp: "A paralelogramma szemközti oldalai egyenlőek (a=c, b=d), az átló pedig közös. Így a két háromszögnek mindhárom oldala páronként egyenlő, tehát az O.O.O. tétel szerint kongruensek." },
        { q: "Mi a 'kongruencia' szó magyar megfelelője?", a: "Hasonlóság", b: "Azonosság", c: "Egybevágóság", correct: "c", exp: "A 'kongruens' latin eredetű szó, a magyar nyelvben az 'egybevágó' kifejezést használjuk rá, ami szemléletesen utal arra, hogy a két alakzat fedésbe hozható." },
        { q: "Két háromszögben a szögek 50°, 60°, 70°. Az 50° és 60° közötti oldal mindkettőben 10 cm. Kongruensek?", a: "Igen, a Sz.O.Sz. tétel alapján.", b: "Nem, mert a többi oldal nem ismert.", c: "Igen, mert hasonlók és van egyenlő oldaluk.", correct: "a", exp: "Az 50° és 60° közötti oldal a 70°-os szöggel van szemben. A tétel: két szög (50°, 60°) és a közös oldaluk (a 70°-kal szemközti) egyenlő. A Szög-Oldal-Szög tétel alapján kongruensek." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>