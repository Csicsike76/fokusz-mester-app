<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kvíz: 7.1 Magasságtétel, befogótétel</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #007BFF;
            --secondary-color: #f1f1f1;
            --background-color: #f8f9fa;
            --text-color: #333;
            --correct-color: #28a745;
            --correct-bg: #d4edda;
            --incorrect-color: #dc3545;
            --incorrect-bg: #f8d7da;
            --neutral-border: #dee2e6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            padding: 20px;
            background: linear-gradient(90deg, #CD2A3E 33.3%, #FFFFFF 33.3%, #FFFFFF 66.6%, #477050 66.6%);
            text-align: center;
        }

        header h1 {
            color: var(--text-color);
            margin: 0;
            font-size: 2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        main {
            padding: 30px;
        }

        #quiz-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .question-block {
            border: 1px solid var(--neutral-border);
            border-radius: 10px;
            padding: 20px;
            transition: box-shadow 0.3s;
        }

        .question-block:focus-within {
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.25);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .options label {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--neutral-border);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .options label:hover {
            background-color: #f8f9fa;
        }

        .options input[type="radio"] {
            margin-right: 15px;
            accent-color: var(--primary-color);
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
            display: none;
            font-size: 0.95em;
        }
        
        .explanation strong {
            display: block;
            margin-bottom: 5px;
        }
        
        .evaluation-block {
            margin-top: 30px;
            margin-bottom: 20px;
        }

        .controls-container {
            padding: 20px;
            background-color: #fdfdfd;
            border: 1px dashed var(--neutral-border);
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .controls-container label {
            font-weight: 600;
        }

        .pin-code-input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--neutral-border);
            width: 120px;
            text-align: center;
            font-size: 1em;
        }

        .check-btn {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
        }

        .check-btn:hover {
            background-color: #0056b3;
        }
        
        .check-btn:active {
            transform: scale(0.98);
        }
        
        .check-btn:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }

        .result-container {
            margin-top: 15px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 700;
            min-height: 1.5em;
        }

        .admin-panel {
            margin-top: 10px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: #856404;
        }

        /* Visszajelző stílusok */
        .correct-answer {
            background-color: var(--correct-bg) !important;
            border-color: var(--correct-color) !important;
        }

        .incorrect-answer {
            background-color: var(--incorrect-bg) !important;
            border-color: var(--incorrect-color) !important;
        }
        
        .master-correct::before {
            content: '✅ ';
            font-weight: bold;
        }

        .label-correct::before {
            content: '✅ ';
        }
        
        .label-incorrect::before {
            content: '❌ ';
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            main {
                padding: 15px;
            }
            header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <header>
            <h1>Kvíz: 7.1 Magasságtétel, befogótétel</h1>
        </header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN kód:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellenőrzés</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;">
                    <p>Adminisztrátori mód aktív. A helyes válaszok és a magyarázatok feloldva.</p>
                </div>
            </div>

            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

            <form id="quiz-form" autocomplete="off">
                <div id="questions-container"></div>
            </form>

            <div class="evaluation-block" id="bottom-evaluation">
                <div class="controls-container">
                    <label for="pin-code-bottom">PIN kód:</label>
                    <input type="password" id="pin-code-bottom" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellenőrzés</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;">
                    <p>Adminisztrátori mód aktív. A helyes válaszok és a magyarázatok feloldva.</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        const quizData = [
            {
                question: "Melyik a magasságtétel helyes képlete?",
                options: { a: "m² = p * q", b: "a² = c * p", c: "m = p + q" },
                correct: "a",
                explanation: "A magasságtétel szerint a derékszögű háromszög átfogóhoz tartozó magasságának (m) négyzete egyenlő az átfogón létrehozott két szakasz (p és q) szorzatával."
            },
            {
                question: "Melyik a befogótétel helyes képlete az 'a' befogóra?",
                options: { a: "a² = p * q", b: "a² = c * p", c: "a = c + p" },
                correct: "b",
                explanation: "A befogótétel szerint a derékszögű háromszög 'a' befogójának négyzete egyenlő az átfogó (c) és a befogó átfogóra eső vetületének (p) szorzatával."
            },
            {
                question: "Egy derékszögű háromszög átfogóját a magasság egy 4 cm és egy 9 cm hosszú szakaszra bontja. Milyen magas a háromszög?",
                options: { a: "13 cm", b: "36 cm", c: "6 cm" },
                correct: "c",
                explanation: "A magasságtételt használjuk: m² = p * q = 4 * 9 = 36. Ebből m = √36 = 6 cm."
            },
            {
                question: "Egy derékszögű háromszög átfogója (c) 10 cm, az egyik befogó vetülete (p) pedig 4 cm. Milyen hosszú az ehhez a vetülethez tartozó befogó (a)?",
                options: { a: "kb. 6.3 cm", b: "40 cm", c: "6 cm" },
                correct: "a",
                explanation: "A befogótételt használjuk: a² = c * p = 10 * 4 = 40. Ebből a = √40 ≈ 6.32 cm. (A helyes válasz: √40, ami a 6 cm-hez van legközelebb. A pontos válasz: 2√10 cm.) A válaszok pontosításra szorulnak, válasszuk a legközelebbi értéket. Helyesbítés: A feladat hibás, a pontos válasz 2√10 cm. A kérdést átírom: c=10, p=3.6. a=? a²=10*3.6=36 -> a=6. Így a C válasz lesz a helyes."
            },
            {
                question: "Egy derékszögű háromszög átfogójának szeletei p=2 cm és q=8 cm. Mekkora az átfogó?",
                options: { a: "16 cm", b: "6 cm", c: "10 cm" },
                correct: "c",
                explanation: "Az átfogó hossza a két szelet (vetület) összegével egyenlő: c = p + q = 2 + 8 = 10 cm."
            },
            {
                question: "Melyik háromszögre érvényes a magasság- és a befogótétel?",
                options: { a: "Csak derékszögű háromszögekre.", b: "Minden háromszögre.", c: "Csak egyenlő szárú háromszögekre." },
                correct: "a",
                explanation: "Ezek a tételek, azaz metrikus összefüggések, a derékszögű háromszögek különleges tulajdonságai, amelyek a háromszög belső hasonlóságaiból fakadnak."
            },
            {
                question: "Ha m=12 és p=9, mekkora q a magasságtétel szerint?",
                options: { a: "1.33", b: "16", c: "108" },
                correct: "b",
                explanation: "A magasságtétel m² = p * q. Behelyettesítve: 12² = 9 * q, azaz 144 = 9q. Ebből q = 144 / 9 = 16."
            },
            {
                question: "Ha egy derékszögű háromszög 'b' befogója 20, átfogója 'c' pedig 25, mekkora a 'b' befogó vetülete (q)?",
                options: { a: "16", b: "22.5", c: "1.25" },
                correct: "a",
                explanation: "A befogótétel b² = c * q. Behelyettesítve: 20² = 25 * q, azaz 400 = 25q. Ebből q = 400 / 25 = 16."
            },
            {
                question: "Az átfogóhoz tartozó magasság két háromszögre bontja az eredeti derékszögű háromszöget. Milyenek ezek a háromszögek?",
                options: { a: "Egybevágóak.", b: "Hasonlóak az eredetihez és egymáshoz is.", c: "Nincs közöttük kapcsolat." },
                correct: "b",
                explanation: "A magasság által levágott két kisebb derékszögű háromszög szögei megegyeznek az eredeti nagy háromszög szögeivel, ezért mindhárom háromszög hasonló egymáshoz. Ebből a hasonlóságból származik a két tétel."
            },
            {
                question: "Mi a 'p' és 'q' szakaszok neve a tételekben?",
                options: { a: "Befogók.", b: "A befogók vetületei az átfogón.", c: "A háromszög magasságai." },
                correct: "b",
                explanation: "A 'p' és 'q' szakaszokat a befogók átfogóra eső merőleges vetületeinek nevezzük."
            },
            {
                question: "Egy derékszögű háromszög átfogójának szeletei p=9 és q=16. Mekkora az átfogóhoz tartozó magasság?",
                options: { a: "25", b: "12", c: "144" },
                correct: "b",
                explanation: "A magasságtétel szerint m² = p * q = 9 * 16 = 144. Ebből m = √144 = 12."
            },
            {
                question: "Az előző feladatban (p=9, q=16), mekkora az 'a' befogó, ha annak vetülete a 'p' szakasz?",
                options: { a: "15", b: "225", c: "13.5" },
                correct: "a",
                explanation: "Először az átfogó kell: c = p + q = 9 + 16 = 25. A befogótétel szerint a² = c * p = 25 * 9 = 225. Ebből a = √225 = 15."
            },
            {
                question: "Az előző feladatban (p=9, q=16), mekkora a 'b' befogó, ha annak vetülete a 'q' szakasz?",
                options: { a: "20", b: "400", c: "22" },
                correct: "a",
                explanation: "Az átfogó c = 25. A befogótétel szerint b² = c * q = 25 * 16 = 400. Ebből b = √400 = 20."
            },
            {
                question: "Egy derékszögű háromszög átfogója 13 cm, egyik befogója 5 cm. Mekkora ennek a befogónak a vetülete az átfogón?",
                options: { a: "kb. 2.6 cm", b: "kb. 1.9 cm", c: "5 cm" },
                correct: "b",
                explanation: "A befogótétel a² = c * p. Behelyettesítve: 5² = 13 * p, azaz 25 = 13p. Ebből p = 25/13 ≈ 1.92 cm."
            },
            {
                question: "Mi a magasságtétel mértani közepekkel megfogalmazva?",
                options: { a: "A magasság mértani közepe a két befogónak.", b: "A magasság mértani közepe az átfogó két szeletének.", c: "A befogó mértani közepe az átfogónak és a magasságnak." },
                correct: "b",
                explanation: "Az m² = p * q egyenletből m = √(p*q), ami azt jelenti, hogy a magasság a két átfogó-szelet (p és q) mértani közepe."
            },
            {
                question: "Mi a befogótétel mértani közepekkel megfogalmazva?",
                options: { a: "A befogó mértani közepe az átfogónak és a magasságnak.", b: "A befogó mértani közepe a másik befogónak és a magasságnak.", c: "A befogó mértani közepe az átfogónak és a saját vetületének." },
                correct: "c",
                explanation: "Az a² = c * p egyenletből a = √(c*p), ami azt jelenti, hogy a befogó az átfogó és a saját átfogóra eső vetületének mértani közepe."
            },
            {
                question: "Egy derékszögű háromszög befogói 6 és 8. Mekkora a területe?",
                options: { a: "48", b: "24", c: "14" },
                correct: "b",
                explanation: "A derékszögű háromszög területe a két befogó szorzatának a fele: T = (a*b)/2 = (6*8)/2 = 48/2 = 24."
            },
            {
                question: "Az előző feladatban (befogók 6 és 8), mekkora az átfogóhoz tartozó magasság?",
                options: { a: "10", b: "2.4", c: "4.8" },
                correct: "c",
                explanation: "Pitagorasz-tétel: c²=6²+8²=36+64=100, tehát c=10. A terület kétféleképpen írható fel: T=(a*b)/2 = (c*m)/2. Tudjuk, hogy T=24, tehát 24=(10*m)/2. Ebből 24=5m, m=24/5=4.8."
            },
            {
                question: "Az átfogóhoz tartozó magasság egyenlő lehet-e az egyik befogóval?",
                options: { a: "Igen, mindig.", b: "Nem, soha.", c: "Csak ha a háromszög egyenlő szárú." },
                correct: "b",
                explanation: "Nem. A háromszögben a derékszögű csúcsból induló magasság (m) mindig rövidebb, mint a szintén onnan induló befogók (a, b)."
            },
            {
                question: "Egy derékszögű háromszög átfogójának szeletei p=3.6 cm és q=6.4 cm. Mekkora az 'a' befogó (p vetülettel)?",
                options: { a: "6 cm", b: "10 cm", c: "8 cm" },
                correct: "a",
                explanation: "Az átfogó c = p + q = 3.6 + 6.4 = 10 cm. A befogótétel: a² = c * p = 10 * 3.6 = 36. Ebből a = √36 = 6 cm."
            },
            {
                question: "Melyik híres tétel vezethető le a befogótételből?",
                options: { a: "Thalész-tétel", b: "Pitagorasz-tétel", c: "Szögfelezőtétel" },
                correct: "b",
                explanation: "Ha összeadjuk a két befogótételt (a² = c*p és b² = c*q), kapjuk: a² + b² = c*p + c*q = c*(p+q). Mivel p+q = c, ezért a² + b² = c*c = c². Ez a Pitagorasz-tétel."
            },
            {
                question: "Egy derékszögű háromszögben c=50, p=18. Mekkora q?",
                options: { a: "32", b: "68", c: "2.78" },
                correct: "a",
                explanation: "Az átfogó a két szelet összege: c = p + q. Ebből q = c - p = 50 - 18 = 32."
            },
            {
                question: "Az előző feladatban (c=50, p=18, q=32), mekkora a magasság (m)?",
                options: { a: "25", b: "576", c: "24" },
                correct: "c",
                explanation: "A magasságtétel: m² = p * q = 18 * 32 = 576. Ebből m = √576 = 24."
            },
            {
                question: "Egy derékszögű háromszög átfogója 20, egyik befogója 12. Mekkora ennek a befogónak a vetülete?",
                options: { a: "7.2", b: "14.4", c: "1.67" },
                correct: "a",
                explanation: "A befogótétel: a² = c * p. Behelyettesítve: 12² = 20 * p, azaz 144 = 20p. Ebből p = 144 / 20 = 7.2."
            },
            {
                question: "Az átfogóhoz tartozó magasság mindig...",
                options: { a: "...felezi az átfogót.", b: "...kisebb, mint az átfogó fele, vagy egyenlő vele.", c: "...nagyobb, mint az átfogó." },
                correct: "b",
                explanation: "A magasság akkor a legnagyobb, ha a háromszög egyenlő szárú (p=q), ekkor m = p = c/2. Minden más esetben a magasság rövidebb lesz, mint az átfogó fele. Ez a Thalész-körből is látszik, ahol a magasság egy, az átmérőre bocsátott merőleges."
            }
        ];
        
        // A 4. kérdés javítása a magyarázat szerint:
        quizData[3] = {
            question: "Egy derékszögű háromszög átfogója (c) 10 cm, az egyik befogó vetülete (p) pedig 3.6 cm. Milyen hosszú az ehhez a vetülethez tartozó befogó (a)?",
            options: { a: "10 cm", b: "36 cm", c: "6 cm" },
            correct: "c",
            explanation: "A befogótételt használjuk: a² = c * p = 10 * 3.6 = 36. Ebből a = √36 = 6 cm."
        };


        const questionsContainer = document.getElementById('questions-container');
        const checkBtns = document.querySelectorAll('.check-btn');
        const pinInputs = document.querySelectorAll('.pin-code-input');
        const resultContainers = document.querySelectorAll('.result-container');
        const adminPanels = document.querySelectorAll('.admin-panel');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">
                            <label for="q${index}a">
                                <input type="radio" name="question${index}" id="q${index}a" value="a">
                                ${item.options.a}
                            </label>
                            <label for="q${index}b">
                                <input type="radio" name="question${index}" id="q${index}b" value="b">
                                ${item.options.b}
                            </label>
                            <label for="q${index}c">
                                <input type="radio" name="question${index}" id="q${index}c" value="c">
                                ${item.options.c}
                            </label>
                        </div>
                        <div class="explanation" id="explanation-${index}">
                            <strong>Magyarázat:</strong> ${item.explanation}
                        </div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = pinInputs[0].value; // Elég az elsőből olvasni, mert szinkronizáltak
            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('Érvénytelen PIN kód! Kérjük, adjon meg egy érvényes tanulói (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`Kérjük, válaszolj az összes kérdésre! Jelenleg ${answeredQuestions}/${shuffledData.length} kérdésre válaszoltál.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtns.forEach(btn => btn.disabled = true);
            pinInputs.forEach(input => input.disabled = true);

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);

                if (isMaster) {
                    explanationDiv.style.display = 'block';
                    const correctLabel = document.querySelector(`label[for="q${index}${item.correct}"]`);
                    correctLabel.classList.add('master-correct');
                } else {
                    explanationDiv.style.display = 'block';
                }

                if (selectedOption) {
                    const selectedLabel = selectedOption.parentElement;
                    if (selectedOption.value === item.correct) {
                        score++;
                        selectedLabel.classList.add('correct-answer', 'label-correct');
                    } else {
                        selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                        const correctLabel = document.querySelector(`label[for="q${index}${item.correct}"]`);
                        correctLabel.classList.add('correct-answer');
                    }
                } else if (isMaster) {
                    const correctLabel = document.querySelector(`label[for="q${index}${item.correct}"]`);
                    correctLabel.classList.add('correct-answer');
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            const resultText = `Eredményed: ${score} / ${shuffledData.length} (${percentage}%)`;
            resultContainers.forEach(container => container.innerHTML = resultText);

            if (isMaster) {
                adminPanels.forEach(panel => panel.style.display = 'block');
            }
        }

        // Eseménykezelők hozzáadása az összes vezérlőhöz
        document.addEventListener('DOMContentLoaded', renderQuiz);
        
        checkBtns.forEach(btn => {
            btn.addEventListener('click', checkAnswers);
        });

        pinInputs.forEach(input => {
            // Enter gombos ellenőrzés
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
            // PIN mezők szinkronizálása
            input.addEventListener('input', (e) => {
                pinInputs.forEach(otherInput => {
                    if (otherInput !== e.target) {
                        otherInput.value = e.target.value;
                    }
                });
            });
        });

    </script>
</body>
</html>