<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kv√≠z: F√ºggv√©nyek grafikus √°br√°zol√°sa</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #007BFF;
            --secondary-color: #f1f1f1;
            --background-color: #f8f9fa;
            --text-color: #333;
            --correct-color: #28a745;
            --correct-bg: #d4edda;
            --incorrect-color: #dc3545;
            --incorrect-bg: #f8d7da;
            --neutral-border: #dee2e6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            padding: 20px;
            background: linear-gradient(90deg, #CD2A3E 33.3%, #FFFFFF 33.3%, #FFFFFF 66.6%, #477050 66.6%);
            text-align: center;
        }

        header h1 {
            color: var(--text-color);
            margin: 0;
            font-size: 2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        main {
            padding: 30px;
        }

        #quiz-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .question-block {
            border: 1px solid var(--neutral-border);
            border-radius: 10px;
            padding: 20px;
            transition: box-shadow 0.3s;
        }

        .question-block:focus-within {
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.25);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .options label {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--neutral-border);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .options label:hover {
            background-color: #f8f9fa;
        }

        .options input[type="radio"] {
            margin-right: 15px;
            accent-color: var(--primary-color);
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
            display: none;
            font-size: 0.95em;
        }
        
        .explanation strong {
            display: block;
            margin-bottom: 5px;
        }
        
        .evaluation-block {
            margin-bottom: 20px;
        }

        .controls-container {
            padding: 20px;
            background-color: #fdfdfd;
            border: 1px dashed var(--neutral-border);
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .controls-container label {
            font-weight: 600;
        }

        .pin-code-input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--neutral-border);
            width: 120px;
            text-align: center;
            font-size: 1em;
        }

        .check-btn {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
        }

        .check-btn:hover {
            background-color: #0056b3;
        }
        
        .check-btn:active {
            transform: scale(0.98);
        }
        
        .check-btn:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }

        .result-container {
            margin-top: 15px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 700;
            min-height: 1.5em;
        }

        .admin-panel {
            margin-top: 10px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: #856404;
        }

        /* Visszajelz≈ë st√≠lusok */
        .correct-answer {
            background-color: var(--correct-bg) !important;
            border-color: var(--correct-color) !important;
        }

        .incorrect-answer {
            background-color: var(--incorrect-bg) !important;
            border-color: var(--incorrect-color) !important;
        }
        
        .master-correct::before {
            content: '‚úÖ Helyes: ';
            font-weight: bold;
        }

        .label-correct::before {
            content: '‚úÖ ';
        }
        
        .label-incorrect::before {
            content: '‚ùå ';
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            main {
                padding: 15px;
            }
            header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <header>
            <h1>Kv√≠z: f(x) = ax + b alak√∫ f√ºggv√©nyek √°br√°zol√°sa</h1>
        </header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN k√≥d:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellen≈ërz√©s</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;">
                    <p>Mester m√≥d akt√≠v. V√°laszok eloszl√°sa: 8 'a', 9 'b', 8 'c'.</p>
                </div>
            </div>

            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

            <form id="quiz-form" autocomplete="off">
                <div id="questions-container"></div>
            </form>
            
        </main>
    </div>

    <script>
        const quizData = [
            { question: "Mi az els≈ë l√©p√©s az f(x) = 2x + 3 f√ºggv√©ny √°br√°zol√°sakor a param√©terekkel?", options: { a: "A meredeks√©g szerint l√©p√ºnk.", b: "√ârt√©kt√°bl√°zatot k√©sz√≠t√ºnk.", c: "Megkeress√ºk a 3-at az y-tengelyen." }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A legegyszer≈±bb m√≥dszer, ha a 'b' param√©tert, azaz az y-tengelymetszetet haszn√°ljuk kezd≈ëpontnak. üîπ 2. L√©p√©s: A 'b' √©rt√©ke itt 3, teh√°t az els≈ë pontunk a (0; 3) lesz, ami az y-tengelyen a 3-n√°l van. ‚úÖ Megold√°s: Megkeress√ºk a 3-at az y-tengelyen." },
            { question: "Mit jelent a 2-es meredeks√©g az f(x) = 2x + 3 f√ºggv√©nyben?", options: { a: "1-et jobbra, 2-t fel", b: "2-t jobbra, 3-at fel", c: "2-t jobbra, 1-et fel" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A meredeks√©get t√∂rtk√©nt is fel√≠rhatjuk: a = 2 = 2/1. üîπ 2. L√©p√©s: A nevez≈ë (1) a v√≠zszintes l√©p√©st, a sz√°ml√°l√≥ (2) a f√ºgg≈ëleges l√©p√©st jelenti. Mivel pozit√≠v, felfel√© l√©p√ºnk. ‚úÖ Megold√°s: B√°rmely pontb√≥l 1-et jobbra, 2-t felfel√© l√©pve a grafikon egy √∫jabb pontj√°t kapjuk." },
            { question: "H√°ny pontot kell minimum kisz√°molnunk √©s √°br√°zolnunk egy egyenes megrajzol√°s√°hoz?", options: { a: "1", b: "2", c: "3" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A geometria alapt√©tele szerint k√©t k√ºl√∂nb√∂z≈ë ponton √°t pontosan egy egyenes fektethet≈ë. üîπ 2. L√©p√©s: Teh√°t el√©g k√©t pontot meghat√°roznunk a grafikonon, √©s egy vonalz√≥val √∂sszek√∂tve ≈ëket megkapjuk a teljes f√ºggv√©nygrafikont. ‚úÖ Megold√°s: Minimum 2 pont sz√ºks√©ges." },
            { question: "Egy f√ºggv√©ny grafikonja az y-tengelyt a 4-n√©l metszi. Melyik pont van biztosan a grafikonon?", options: { a: "(4; 0)", b: "(0; 4)", c: "(4; 4)" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az y-tengelyen minden pont x koordin√°t√°ja 0. üîπ 2. L√©p√©s: Ha a metszet a 4-n√©l van, az azt jelenti, hogy az y koordin√°ta 4. ‚úÖ Megold√°s: A (0; 4) pont van a grafikonon." },
            { question: "Mi a legegyszer≈±bb m√≥dja az f(x) = 5 f√ºggv√©ny √°br√°zol√°s√°nak?", options: { a: "egy v√≠zszintes egyenest h√∫zunk az y=5 magass√°gban", b: "egy f√ºgg≈ëleges egyenest h√∫zunk az x=5 helyen", c: "az orig√≥n √°tmen≈ë egyenest h√∫zunk" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Ez egy konstans f√ºggv√©ny, ami azt jelenti, hogy minden x-hez ugyanazt az y √©rt√©ket, az 5-√∂t rendeli. üîπ 2. L√©p√©s: A pontjai p√©ld√°ul (0;5), (1;5), (2;5). Ezek egy v√≠zszintes egyenesen helyezkednek el. ‚úÖ Megold√°s: Egy v√≠zszintes egyenest h√∫zunk az y=5 magass√°gban." },
            { question: "Egy line√°ris f√ºggv√©ny grafikonja √°tmegy a (0; -2) √©s (1; 1) pontokon. Mi a f√ºggv√©ny hozz√°rendel√©si szab√°lya?", options: { a: "f(x) = 2x - 3", b: "f(x) = 3x - 2", c: "f(x) = -2x + 3" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az y-tengelymetszet (b) a (0; -2) pontb√≥l leolvashat√≥, teh√°t b=-2. üîπ 2. L√©p√©s: A meredeks√©g (a): 1-et jobbra l√©pt√ºnk (0-r√≥l 1-re), √©s 3-at felfel√© (-2-r≈ël 1-re). Teh√°t a=3/1=3. üîπ 3. L√©p√©s: A szab√°ly: f(x) = 3x - 2. ‚úÖ Megold√°s: f(x) = 3x - 2." },
            { question: "Melyik m√≥dszerrel lehet B√ÅRMILYEN f√ºggv√©nyt √°br√°zolni?", options: { a: "meredeks√©g √©s y-metszet", b: "z√©rushely-sz√°m√≠t√°s", c: "√©rt√©kt√°bl√°zat" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A meredeks√©ges m√≥dszer csak line√°ris f√ºggv√©nyekre m≈±k√∂dik. A z√©rushely egyetlen pont, ami nem el√©g. üîπ 2. L√©p√©s: Az √©rt√©kt√°bl√°zat univerz√°lis: kiv√°lasztunk x √©rt√©keket, kisz√°moljuk a hozz√°juk tartoz√≥ y √©rt√©keket, √©s a kapott (x;y) pontokat √°br√°zoljuk. Ez minden f√ºggv√©nyt√≠pusn√°l alkalmazhat√≥. ‚úÖ Megold√°s: √ârt√©kt√°bl√°zattal." },
            { question: "Hogyan √°br√°zoljuk a P(-1; -4) pontot?", options: { a: "1-et jobbra, 4-et le", b: "1-et balra, 4-et le", c: "1-et le, 4-et balra" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az els≈ë koordin√°ta (x=-1) azt jelenti, hogy az orig√≥b√≥l 1 egys√©get balra l√©p√ºnk. üîπ 2. L√©p√©s: A m√°sodik koordin√°ta (y=-4) azt jelenti, hogy onnan 4 egys√©get lefel√© l√©p√ºnk. ‚úÖ Megold√°s: 1-et balra, 4-et le." },
            { question: "Milyen meredeks√©g≈± az f(x) = 4 - x f√ºggv√©ny?", options: { a: "4", b: "-1", c: "1" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: √çrjuk √°t a f√ºggv√©nyt ax+b sorrendbe: f(x) = -x + 4. üîπ 2. L√©p√©s: Ezt fel√≠rhatjuk f(x) = (-1)*x + 4 alakban is. Az x egy√ºtthat√≥ja a meredeks√©g. ‚úÖ Megold√°s: A meredeks√©g -1." },
            { question: "Melyik pont van az f(x) = -2x + 7 grafikonj√°n?", options: { a: "(3; 1)", b: "(1; 9)", c: "(2; 11)" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Helyettes√≠ts√ºk be a 3-at: f(3) = -2 * 3 + 7 = -6 + 7 = 1. üîπ 2. L√©p√©s: A kapott y √©rt√©k 1, ami megegyezik a pont y koordin√°t√°j√°val. ‚úÖ Megold√°s: A (3; 1) pont rajta van a grafikonon." },
            { question: "Mi az els≈ë l√©p√©s egy pont koordin√°ta-rendszerben val√≥ leolvas√°sakor?", options: { a: "A v√≠zszintes (x) koordin√°ta megkeres√©se.", b: "A f√ºgg≈ëleges (y) koordin√°ta megkeres√©se.", c: "A t√°vols√°g megm√©r√©se az orig√≥t√≥l." }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A pontok koordin√°t√°it mindig (x; y) sorrendben adjuk meg. üîπ 2. L√©p√©s: Ez√©rt a leolvas√°st is mindig a v√≠zszintes tengelyen kezdj√ºk, hogy megtal√°ljuk az els≈ë, x koordin√°t√°t. ‚úÖ Megold√°s: A v√≠zszintes (x) koordin√°ta megkeres√©se." },
            { question: "Az f(x) = x grafikonja...", options: { a: "egy f√ºgg≈ëleges egyenes.", b: "egy az orig√≥n √°tmen≈ë, 45¬∞-os egyenes.", c: "egy v√≠zszintes egyenes." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A szab√°ly szerint y=x. N√©h√°ny pontja: (0;0), (1;1), (2;2). üîπ 2. L√©p√©s: Ezek a pontok egy olyan egyenesen vannak, ami √°thalad az orig√≥n √©s 'felezi' az I. √©s III. s√≠knegyedet. ‚úÖ Megold√°s: Egy, az orig√≥n √°tmen≈ë, 45¬∞-os egyenes." },
            { question: "Mi a grafikonja az f(x) = -3 f√ºggv√©nynek?", options: { a: "F√ºgg≈ëleges egyenes az x=-3-n√°l.", b: "Az orig√≥n √°tmen≈ë egyenes.", c: "V√≠zszintes egyenes az y=-3-n√°l." }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Ez egy konstans f√ºggv√©ny, minden x-hez a -3 √©rt√©ket rendeli. üîπ 2. L√©p√©s: A pontjai (0;-3), (1;-3), (2;-3) stb., amelyek egy v√≠zszintes egyenest alkotnak az y tengely -3-as √©rt√©k√©n√©l. ‚úÖ Megold√°s: V√≠zszintes egyenes az y=-3-n√°l." },
            { question: "Egy f√ºggv√©ny meredeks√©ge 0. Milyen a grafikonja?", options: { a: "v√≠zszintes egyenes", b: "f√ºgg≈ëleges egyenes", c: "45¬∞-os egyenes" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A 0 meredeks√©g azt jelenti, hogy a f√ºggv√©ny se nem emelkedik, se nem s√ºllyed. üîπ 2. L√©p√©s: Ez egy konstans f√ºggv√©nyt √≠r le, aminek a grafikonja mindig egy v√≠zszintes egyenes. ‚úÖ Megold√°s: V√≠zszintes egyenes." },
            { question: "Egy grafikonr√≥l leolvasod, hogy az y-tengelyt a -1-n√©l metszi, √©s 1-et jobbra l√©pve 2-t kell felfel√© l√©pni. Mi a szab√°ly?", options: { a: "f(x) = 2x - 1", b: "f(x) = -x + 2", c: "f(x) = x - 2" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Az y-tengelymetszet (b) a -1. üîπ 2. L√©p√©s: A meredeks√©g (a) az '1 jobbra, 2 fel' l√©p√©sb≈ël ad√≥dik: a = 2/1 = 2. üîπ 3. L√©p√©s: A szab√°ly f(x) = ax + b, teh√°t f(x) = 2x - 1. ‚úÖ Megold√°s: f(x) = 2x - 1." },
            { question: "Hol helyezkedik el a P(0; 5) pont?", options: { a: "az x tengelyen", b: "az y tengelyen", c: "az orig√≥ban" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A pont x koordin√°t√°ja 0. üîπ 2. L√©p√©s: Ha az x koordin√°ta nulla, a pont nem mozdul el sem jobbra, sem balra az orig√≥t√≥l, teh√°t a f√ºgg≈ëleges (y) tengelyen van. ‚úÖ Megold√°s: A pont az y tengelyen van." },
            { question: "Mi az f(x) = -5x + 10 z√©rushelye?", options: { a: "x = 10", b: "x = 2", c: "x = -2" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A z√©rushelyhez megoldjuk az f(x) = 0 egyenletet: -5x + 10 = 0. üîπ 2. L√©p√©s: Vonjunk ki 10-et: -5x = -10. Osszunk -5-tel: x = 2. ‚úÖ Megold√°s: A z√©rushelye az x=2." },
            { question: "H√°ny pontot kell √°br√°zolni egy √©rt√©kt√°bl√°zatb√≥l a biztos √°br√°zol√°shoz?", options: { a: "1", b: "2 (√©s egy harmadikat ellen≈ërz√©sk√©pp)", c: "mindig 5-√∂t" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: K√©t pont egy√©rtelm≈±en meghat√°roz egy egyenest. üîπ 2. L√©p√©s: A gyakorlatban √©rdemes egy harmadik pontot is kisz√°molni √©s √°br√°zolni, hogy ellen≈ërizz√ºk, nem sz√°moltuk-e el magunkat. Ha a harmadik pont is ugyanarra az egyenesre esik, j√≥l dolgoztunk. ‚úÖ Megold√°s: 2 pont el√©g, de 3 az ellen≈ërz√©s miatt javasolt." },
            { question: "Melyik f√ºggv√©ny metszi magasabban az y-tengelyt: f(x)=x+5 vagy g(x)=2x+3?", options: { a: "az f(x)", b: "a g(x)", c: "ugyanott metszik" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Az y-tengelymetszetet a 'b' param√©ter √©rt√©ke adja meg. üîπ 2. L√©p√©s: Az f(x) eset√©ben b=5, a g(x) eset√©ben b=3. üîπ 3. L√©p√©s: Mivel 5 > 3, az f(x) metszi magasabban az y-tengelyt. ‚úÖ Megold√°s: Az f(x)." },
            { question: "Melyik f√ºggv√©ny grafikonja p√°rhuzamos az x-tengellyel?", options: { a: "f(x) = x", b: "f(x) = 2x+1", c: "f(x) = 4" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A v√≠zszintes x-tengellyel p√°rhuzamos egyenes szint√©n v√≠zszintes. üîπ 2. L√©p√©s: A v√≠zszintes egyenesek a konstans f√ºggv√©nyek grafikonjai, ahol a meredeks√©g 0. Az f(x)=4 egy ilyen f√ºggv√©ny. ‚úÖ Megold√°s: Az f(x) = 4." },
            { question: "Mi az els≈ë koordin√°ta (x) neve?", options: { a: "ordin√°ta", b: "abszcissza", c: "koordin√°ta" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Mindk√©t sz√°m a pont koordin√°t√°ja. üîπ 2. L√©p√©s: Az els≈ë (x) koordin√°t√°t abszcissz√°nak, a m√°sodikat (y) ordin√°t√°nak nevezz√ºk. ‚úÖ Megold√°s: Az x-koordin√°ta neve abszcissza." },
            { question: "Mi a m√°sodik koordin√°ta (y) neve?", options: { a: "abszcissza", b: "ordin√°ta", c: "koordin√°ta" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Mindk√©t sz√°m a pont koordin√°t√°ja. üîπ 2. L√©p√©s: Az els≈ë (x) koordin√°t√°t abszcissz√°nak, a m√°sodikat (y) ordin√°t√°nak nevezz√ºk. ‚úÖ Megold√°s: Az y-koordin√°ta neve ordin√°ta." },
            { question: "Egy f√ºggv√©ny grafikonja √°tmegy a (0,0) √©s (2,4) pontokon. Mi a szab√°lya?", options: { a: "f(x) = x+2", b: "f(x) = 4x", c: "f(x) = 2x" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Mivel √°tmegy az orig√≥n (0,0), a 'b' param√©ter 0. A szab√°ly f(x) = ax alak√∫. üîπ 2. L√©p√©s: Helyettes√≠ts√ºk be a m√°sik pontot: 4 = a * 2. Ebb≈ël a=2. ‚úÖ Megold√°s: A szab√°ly f(x) = 2x." },
            { question: "Mit √°br√°zolunk a f√ºggv√©ny grafikonj√°n?", options: { a: "az √©rtelmez√©si tartom√°nyt", b: "a hozz√°rendel√©si szab√°lyt", c: "az √∂sszetartoz√≥ (x;y) pontp√°rokat" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A grafikon a f√ºggv√©ny vizu√°lis megjelen√≠t√©se. üîπ 2. L√©p√©s: Minden pontja egy (x; y) sz√°mp√°rnak felel meg, ahol y = f(x). ‚úÖ Megold√°s: Az √∂sszetartoz√≥ (x;y) pontp√°rokat √°br√°zoljuk." }
        ];

        const questionsContainer = document.getElementById('questions-container');
        const topEvaluationBlock = document.getElementById('top-evaluation');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function shuffleOptions(options) {
            const optionsArray = Object.entries(options).map(([key, text]) => ({ key, text }));
            return shuffle([...optionsArray]);
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                const randomizedOptions = shuffleOptions(item.options);
                const optionLetters = ['a', 'b', 'c'];
                
                let optionsHTML = '';
                randomizedOptions.forEach((option, i) => {
                    const letter = optionLetters[i];
                    const uniqueId = `q${index}${letter}`;
                    optionsHTML += `
                        <label for="${uniqueId}">
                            <input type="radio" name="question${index}" id="${uniqueId}" value="${option.key}">
                            ${letter}) ${option.text}
                        </label>
                    `;
                });

                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">${optionsHTML}</div>
                        <div class="explanation" id="explanation-${index}">${item.explanation}</div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = topEvaluationBlock.querySelector('.pin-code-input').value;
            const checkBtn = topEvaluationBlock.querySelector('.check-btn');
            const resultContainer = topEvaluationBlock.querySelector('.result-container');
            const adminPanel = topEvaluationBlock.querySelector('.admin-panel');

            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('√ârv√©nytelen PIN k√≥d! K√©rj√ºk, adjon meg egy √©rv√©nyes tanul√≥i (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`K√©rj√ºk, v√°laszolj az √∂sszes k√©rd√©sre! Jelenleg ${answeredQuestions}/${shuffledData.length} k√©rd√©sre v√°laszolt√°l.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtn.disabled = true;
            topEvaluationBlock.querySelector('.pin-code-input').disabled = true;

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);
                explanationDiv.style.display = 'block';

                if (isMaster) {
                    document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                        if (radio.value === item.correctAnswer) {
                            radio.parentElement.classList.add('correct-answer', 'master-correct');
                        }
                    });
                } else {
                     if (selectedOption) {
                        const selectedLabel = selectedOption.parentElement;
                        if (selectedOption.value === item.correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct-answer', 'label-correct');
                        } else {
                            selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                             document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                                if (radio.value === item.correctAnswer) {
                                    radio.parentElement.classList.add('correct-answer');
                                }
                            });
                        }
                    } else { 
                         document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                            if (radio.value === item.correctAnswer) {
                                radio.parentElement.classList.add('correct-answer');
                            }
                        });
                    }
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            if (!isMaster) {
                resultContainer.innerHTML = `Eredm√©nyed: ${score} / ${shuffledData.length} (${percentage}%)`;
            } else {
                 resultContainer.innerHTML = `Mester m√≥d: Helyes v√°laszok √©s magyar√°zatok felfedve.`;
            }


            if (isMaster) {
                adminPanel.style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            
            const mainCheckBtn = topEvaluationBlock.querySelector('.check-btn');
            const mainPinInput = topEvaluationBlock.querySelector('.pin-code-input');

            mainCheckBtn.addEventListener('click', checkAnswers);
            mainPinInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
        });

    </script>
</body>
</html>