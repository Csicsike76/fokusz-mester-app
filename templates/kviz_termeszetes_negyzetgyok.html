<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kv√≠z: Term√©szetes sz√°mok n√©gyzetgy√∂ke (Friss√≠tett Elrendez√©s)</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --light-color: #ecf0f1;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --neutral-color: #95a5a6;
            --white: #ffffff;
            --red-hu: #CD2A3E;
            --green-hu: #436F4D;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-color);
            color: var(--primary-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            line-height: 1.6;
        }
        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .quiz-header {
            padding: 20px 30px;
            background: linear-gradient(135deg, var(--red-hu) 33.33%, var(--white) 33.33%, var(--white) 66.66%, var(--green-hu) 66.66%);
            color: var(--primary-color);
            text-align: center;
        }
        .quiz-header h1 {
            margin: 0;
            font-size: 1.8em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        /* === √öJ: Controls (ellen≈ërz≈ë panel) st√≠lusai === */
        .controls {
            padding: 20px 30px;
            background-color: #f8f9fa; /* Enyh√©n elt√©r≈ë h√°tt√©r a jobb elk√ºl√∂n√ºl√©s√©rt */
            text-align: center;
            border-bottom: 2px solid var(--light-color);
        }
        .pin-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        #pin-input {
            padding: 10px;
            width: 120px;
            border: 2px solid var(--neutral-color);
            border-radius: 5px;
            text-align: center;
            font-size: 1.1em;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        #pin-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 5px var(--accent-color);
        }
        #submit-btn {
            background-color: var(--accent-color);
            color: var(--white);
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s, transform 0.2s;
        }
        #submit-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        #submit-btn:disabled {
            background-color: var(--neutral-color);
            cursor: not-allowed;
            transform: none;
        }
        #results {
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
        }
        #admin-panel {
            display: none;
            margin-top: 15px;
            background-color: var(--light-color);
            padding: 15px;
            border-radius: 5px;
            text-align: left;
        }
        #admin-panel h3 {
            margin-top: 0;
            text-align: center;
        }
        #alert-message {
            display: none;
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            color: var(--white);
            background-color: var(--error-color);
        }
        /* === K√©rd√©sek st√≠lusai === */
        .quiz-body {
            padding: 30px;
        }
        .question {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #bdc3c7;
        }
        .question:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
        }
        .question p {
            font-size: 1.2em;
            margin: 0 0 15px 0;
            font-weight: 600;
        }
        .answers {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .answer {
            display: block;
            background-color: var(--light-color);
            padding: 12px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            border: 1px solid transparent;
        }
        .answer:hover {
            background-color: #dcdde1;
            transform: translateY(-2px);
        }
        .answer input[type="radio"] {
            display: none;
        }
        .answer input[type="radio"]:checked + span {
            font-weight: bold;
            color: var(--accent-color);
        }
        .feedback-icon {
            display: none;
            margin-left: 10px;
            font-weight: bold;
        }
        .correct {
            background-color: #e8f5e9;
            border: 1px solid var(--success-color);
        }
        .incorrect {
            background-color: #fce4e4;
            border: 1px solid var(--error-color);
        }
        .explanation {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background-color: #f8f9fa;
            border-left: 5px solid var(--neutral-color);
            border-radius: 5px;
        }
        .explanation-step { margin-bottom: 10px; }
        .explanation-step b { color: var(--secondary-color); }
        .explanation-solution { margin-top: 10px; font-weight: bold; color: var(--success-color); }
        .explanation-bonus { margin-top: 10px; padding-top: 10px; border-top: 1px dashed var(--neutral-color); font-style: italic; }
    </style>
</head>
<body>

    <div class="quiz-container">
        <div class="quiz-header">
            <h1>Kv√≠z: Term√©szetes sz√°mok n√©gyzetgy√∂ke</h1>
        </div>

        <!-- === M√ìDOS√çTOTT R√âSZ: Az ellen≈ërz≈ë panel fel√ºlre ker√ºlt === -->
        <div class="controls">
            <div class="pin-container">
                <input type="password" id="pin-input" placeholder="PIN k√≥d" autocomplete="off">
                <button id="submit-btn">Ellen≈ërz√©s</button>
            </div>
            <div id="alert-message"></div>
            <!-- Az eredm√©nyek (pontsz√°m, sz√°zal√©k) √©s az admin panel is itt fognak megjelenni -->
            <div id="results"></div>
            <div id="admin-panel">
                <h3>Admin Panel</h3>
                <p>Mester PIN elfogadva. A magyar√°zatok √©s a helyes v√°laszok l√°that√≥k.</p>
                <p id="answer-distribution"></p>
            </div>
        </div>
        <!-- === M√ìDOS√çT√ÅS V√âGE === -->

        <div class="quiz-body" id="quiz-body">
            <!-- Questions will be dynamically inserted here -->
        </div>
    </div>

    <script>
        const fullQuestionPool = [
            // A k√©rd√©sek √©s magyar√°zatok adatb√°zisa v√°ltozatlan marad
            // 8 'a' answers
            { question: "Mennyi a ‚àö361 √©rt√©ke?", answers: { a: "19", b: "18", c: "21" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>üîπ 1. Defin√≠ci√≥:</b> Azt a sz√°mot keress√ºk, amelynek a n√©gyzete 361.</div><div class="explanation-step"><b>üîπ 2. Becsl√©s:</b> 10¬≤=100 √©s 20¬≤=400. A sz√°m 10 √©s 20 k√∂z√∂tt van. Mivel a 361 utols√≥ sz√°mjegye 1, a keresett sz√°m 1-re vagy 9-re v√©gz≈ëdik.</div><div class="explanation-step"><b>üîπ 3. Ellen≈ërz√©s:</b> 19 √ó 19 = 361.</div><div class="explanation-solution">‚úÖ Megold√°s: ‚àö361 = 19.</div>` },
            { question: "Melyik sz√°m n√©gyzete a 225?", answers: { a: "15", b: "25", c: "12.5" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>üîπ 1. K√©rd√©s elemz√©se:</b> Azt a sz√°mot keress√ºk, amire igaz, hogy x¬≤ = 225. Ez a ‚àö225 kisz√°m√≠t√°s√°val egyen√©rt√©k≈±.</div><div class="explanation-step"><b>üîπ 2. Becsl√©s:</b> A sz√°m 5-re v√©gz≈ëdik, mert 225-re v√©gz≈ëdik. 10¬≤=100, 20¬≤=400. A 15-√∂t kell kipr√≥b√°lni.</div><div class="explanation-step"><b>üîπ 3. Ellen≈ërz√©s:</b> 15 √ó 15 = 225.</div><div class="explanation-solution">‚úÖ Megold√°s: A 15 n√©gyzete 225.</div>` },
            { question: "Mi az a sz√°m, aminek a n√©gyzete 49?", answers: { a: "7", b: "4.9", c: "9" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>üîπ 1. Defin√≠ci√≥:</b> Keress√ºk azt az x sz√°mot, melyre x¬≤ = 49.</div><div class="explanation-step"><b>üîπ 2. Sz√°mol√°s:</b> A szorz√≥t√°bl√°b√≥l tudjuk, hogy 7 √ó 7 = 49.</div><div class="explanation-solution">‚úÖ Megold√°s: A 7 az a sz√°m.</div>` },
            { question: "Melyik a legnagyobb t√∂k√©letes n√©gyzet 200-n√°l kisebb?", answers: { a: "196", b: "169", c: "199" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>üîπ 1. Keres√©s:</b> N√©zz√ºk a n√©gyzetsz√°mokat. 13¬≤ = 169. 14¬≤ = 196. 15¬≤ = 225.</div><div class="explanation-step"><b>üîπ 2. K√∂vetkeztet√©s:</b> A 225 m√°r t√∂bb, mint 200. Teh√°t a 196 a legnagyobb, ami 200-n√°l kisebb.</div><div class="explanation-solution">‚úÖ Megold√°s: 196.</div>` },
            { question: "Mennyi a ‚àö0 √©rt√©ke?", answers: { a: "0", b: "1", c: "Nincs √©rtelmezve" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>üîπ 1. Defin√≠ci√≥:</b> Azt a nemnegat√≠v sz√°mot keress√ºk, melynek n√©gyzete 0.</div><div class="explanation-step"><b>üîπ 2. Sz√°mol√°s:</b> 0 √ó 0 = 0.</div><div class="explanation-solution">‚úÖ Megold√°s: ‚àö0 = 0.</div>` },
            { question: "Ha ‚àöx = 20, akkor mennyi az x?", answers: { a: "400", b: "40", c: "100" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>üîπ 1. Egyenlet:</b> ‚àöx = 20.</div><div class="explanation-step"><b>üîπ 2. Megold√°s:</b> Az egyenlet mindk√©t oldal√°t n√©gyzetre emelj√ºk, hogy elt√ºntess√ºk a gy√∂kjelet.</div><div class="explanation-step"><b>üîπ 3. Sz√°mol√°s:</b> (‚àöx)¬≤ = 20¬≤ ‚Üí x = 400.</div><div class="explanation-solution">‚úÖ Megold√°s: x = 400.</div>` },
            { question: "Melyik sz√°m van a ‚àö121 √©s a ‚àö169 k√∂z√∂tt?", answers: { a: "12", b: "10", c: "14" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>üîπ 1. Hat√°r√©rt√©kek:</b> El≈ësz√∂r kisz√°moljuk a hat√°rokat. ‚àö121 = 11. ‚àö169 = 13.</div><div class="explanation-step"><b>üîπ 2. Keres√©s:</b> Azt az eg√©sz sz√°mot keress√ºk, ami 11 √©s 13 k√∂z√∂tt van.</div><div class="explanation-solution">‚úÖ Megold√°s: Ez a 12.</div>` },
            { question: "Melyik sz√°m n√©gyzete a 625?", answers: { a: "25", b: "15", c: "35" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>üîπ 1. K√©rd√©s:</b> x¬≤ = 625. Mi az x?</div><div class="explanation-step"><b>üîπ 2. Becsl√©s:</b> 20¬≤=400, 30¬≤=900. A sz√°m 20 √©s 30 k√∂z√∂tt van, √©s 5-re v√©gz≈ëdik.</div><div class="explanation-step"><b>üîπ 3. Ellen≈ërz√©s:</b> 25 √ó 25 = 625.</div><div class="explanation-solution">‚úÖ Megold√°s: A 25 n√©gyzete 625.</div>` },
            // 9 'b' answers
            { question: "Egy n√©gyzet alak√∫ kert ter√ºlete 256 m¬≤. Milyen hossz√∫ a kert egy oldala?", answers: { a: "15 m", b: "16 m", c: "64 m" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>üîπ 1. K√©plet:</b> A n√©gyzet ter√ºlete T = a¬≤, ahol 'a' az oldal hossza. Ebb≈ël a = ‚àöT.</div><div class="explanation-step"><b>üîπ 2. Behelyettes√≠t√©s:</b> a = ‚àö256.</div><div class="explanation-step"><b>üîπ 3. Sz√°mol√°s:</b> 16 √ó 16 = 256.</div><div class="explanation-solution">‚úÖ Megold√°s: Az oldal hossza 16 m.</div>` },
            { question: "Mennyi a ‚àö(13¬≤) √©rt√©ke?", answers: { a: "169", b: "13", c: "26" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>üîπ 1. T√©tel:</b> Egy nemnegat√≠v sz√°m n√©gyzet√©nek a n√©gyzetgy√∂ke maga a sz√°m. K√©plettel: ‚àö(n¬≤) = n, ha n ‚â• 0.</div><div class="explanation-step"><b>üîπ 2. Alkalmaz√°s:</b> Itt n = 13, teh√°t ‚àö(13¬≤) = 13.</div><div class="explanation-bonus"><b>‚úèÔ∏è B√≥nusz √∫t:</b> 13¬≤ = 169, majd ‚àö169 = 13. Az eredm√©ny ugyanaz.</div><div class="explanation-solution">‚úÖ Megold√°s: 13.</div>` },
            { question: "Mi a `‚àön = 25` egyenlet megold√°sa?", answers: { a: "5", b: "625", c: "50" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>üîπ 1. Egyenlet:</b> ‚àön = 25.</div><div class="explanation-step"><b>üîπ 2. Megold√°s:</b> Az egyenlet mindk√©t oldal√°t n√©gyzetre emelj√ºk.</div><div class="explanation-step"><b>üîπ 3. Sz√°mol√°s:</b> (‚àön)¬≤ = 25¬≤ ‚Üí n = 625.</div><div class="explanation-solution">‚úÖ Megold√°s: n = 625.</div>` },
            { question: "Mennyi a ‚àö81 √©rt√©ke?", answers: { a: "8.1", b: "9", c: "40.5" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>üîπ 1. Defin√≠ci√≥:</b> Azt a sz√°mot keress√ºk, melynek n√©gyzete 81.</div><div class="explanation-step"><b>üîπ 2. Sz√°mol√°s:</b> 9 √ó 9 = 81.</div><div class="explanation-solution">‚úÖ Megold√°s: ‚àö81 = 9.</div>` },
            { question: "Mennyi a ‚àö(3¬≤ + 4¬≤) √©rt√©ke?", answers: { a: "7", b: "5", c: "25" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>üîπ 1. Szab√°ly:</b> A gy√∂kjel alatt kell el≈ësz√∂r elv√©gezni a m≈±veleteket (m≈±veleti sorrend).</div><div class="explanation-step"><b>üîπ 2. Sz√°mol√°s:</b> 3¬≤=9, 4¬≤=16. Teh√°t ‚àö(9 + 16) = ‚àö25.</div><div class="explanation-step"><b>üîπ 3. Gy√∂kvon√°s:</b> ‚àö25 = 5.</div><div class="explanation-bonus"><b>‚úèÔ∏è Figyelem:</b> A m≈±velet NEM egyenl≈ë ‚àö9 + ‚àö16 = 3+4=7-tel!</div><div class="explanation-solution">‚úÖ Megold√°s: 5.</div>` },
            { question: "Ha egy n√©gyzet oldala 11 cm, mennyi a ter√ºlete?", answers: { a: "44 cm¬≤", b: "121 cm¬≤", c: "22 cm¬≤" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>üîπ 1. K√©plet:</b> A n√©gyzet ter√ºlete T = a¬≤.</div><div class="explanation-step"><b>üîπ 2. Behelyettes√≠t√©s:</b> T = 11¬≤.</div><div class="explanation-step"><b>üîπ 3. Sz√°mol√°s:</b> 11 √ó 11 = 121.</div><div class="explanation-solution">‚úÖ Megold√°s: A ter√ºlet 121 cm¬≤.</div>` },
            { question: "Mennyi a ‚àö(10000) √©rt√©ke?", answers: { a: "1000", b: "100", c: "5000" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>üîπ 1. Szab√°ly:</b> 10-hatv√°nyokn√°l a gy√∂kjel alatti null√°k sz√°m√°t felezni kell.</div><div class="explanation-step"><b>üîπ 2. Alkalmaz√°s:</b> A 10000-ben 4 db nulla van. A gy√∂k√©ben 4/2 = 2 db nulla lesz.</div><div class="explanation-step"><b>üîπ 3. Ellen≈ërz√©s:</b> 100 √ó 100 = 10000.</div><div class="explanation-solution">‚úÖ Megold√°s: ‚àö10000 = 100.</div>` },
            { question: "Melyik sz√°m n√©gyzete a 144?", answers: { a: "72", b: "12", c: "14.4" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>üîπ 1. K√©rd√©s:</b> x¬≤ = 144. Mennyi x?</div><div class="explanation-step"><b>üîπ 2. Sz√°mol√°s:</b> 12 √ó 12 = 144.</div><div class="explanation-solution">‚úÖ Megold√°s: A 12 n√©gyzete 144.</div>` },
            { question: "Mennyi a ‚àö289 √©rt√©ke?", answers: { a: "13", b: "17", c: "19" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>üîπ 1. Becsl√©s:</b> 10¬≤=100, 20¬≤=400. A sz√°m 10 √©s 20 k√∂z√∂tt van. 9-re v√©gz≈ëdik, teh√°t a sz√°m 3-ra vagy 7-re v√©gz≈ëdik.</div><div class="explanation-step"><b>üîπ 2. Pr√≥ba:</b> 13¬≤=169 (nem j√≥). 17¬≤ = 289 (j√≥).</div><div class="explanation-solution">‚úÖ Megold√°s: ‚àö289 = 17.</div>` },
            // 8 'c' answers
            { question: "Melyik kifejez√©s √©rt√©ke NEM term√©szetes sz√°m?", answers: { a: "‚àö100", b: "‚àö144", c: "‚àö50" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>üîπ 1. Vizsg√°lat:</b> Meg kell n√©zni, melyik sz√°m nem "t√∂k√©letes n√©gyzet".</div><div class="explanation-step"><b>üîπ 2. Elemz√©s:</b> ‚àö100 = 10 (term√©szetes). ‚àö144 = 12 (term√©szetes). A 50 nem n√©gyzetsz√°m (7¬≤=49, 8¬≤=64).</div><div class="explanation-solution">‚úÖ Megold√°s: A ‚àö50 √©rt√©ke nem term√©szetes sz√°m.</div>` },
            { question: "Mennyi a ‚àö400 √©rt√©ke?", answers: { a: "40", b: "200", c: "20" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>üîπ 1. M√≥dszer:</b> ‚àö400 = ‚àö(4 √ó 100).</div><div class="explanation-step"><b>üîπ 2. T√©tel:</b> A gy√∂kvon√°s szorz√°sra n√©zve sz√©tszedhet≈ë: ‚àöa √ó ‚àöb = ‚àö(a√ób).</div><div class="explanation-step"><b>üîπ 3. Sz√°mol√°s:</b> ‚àö4 √ó ‚àö100 = 2 √ó 10 = 20.</div><div class="explanation-solution">‚úÖ Megold√°s: ‚àö400 = 20.</div>` },
            { question: "Melyik √°ll√≠t√°s igaz?", answers: { a: "‚àö(9+16) = 3+4", b: "‚àö2 nem val√≥s sz√°m", c: "‚àö(9√ó16) = ‚àö9 √ó ‚àö16" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>üîπ A)</b> ‚àö(9+16)=‚àö25=5. De 3+4=7. Hamis.</div><div class="explanation-step"><b>üîπ B)</b> ‚àö2 val√≥s sz√°m (irracion√°lis), de nem racion√°lis. Hamis.</div><div class="explanation-step"><b>üîπ C)</b> ‚àö(9√ó16)=‚àö144=12. √âs ‚àö9√ó‚àö16=3√ó4=12. Igaz.</div><div class="explanation-solution">‚úÖ Megold√°s: A c) √°ll√≠t√°s igaz.</div>` },
            { question: "Mennyi a ‚àö1 √©rt√©ke?", answers: { a: "0", b: "Nincs √©rtelmezve", c: "1" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>üîπ 1. Defin√≠ci√≥:</b> Keress√ºk a sz√°mot, melynek n√©gyzete 1.</div><div class="explanation-step"><b>üîπ 2. Sz√°mol√°s:</b> 1 √ó 1 = 1.</div><div class="explanation-solution">‚úÖ Megold√°s: ‚àö1 = 1.</div>` },
            { question: "Mi a 't√∂k√©letes n√©gyzet' defin√≠ci√≥ja?", answers: { a: "P√°ros sz√°m.", b: "Oszthat√≥ 2-vel.", c: "Egy term√©szetes sz√°m n√©gyzete." }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>üîπ 1. Fogalom:</b> A n√©gyzetsz√°mok azok a sz√°mok, amik el≈ë√°llnak egy term√©szetes sz√°m √∂nmag√°val val√≥ szorzatak√©nt.</div><div class="explanation-step"><b>üîπ 2. P√©ld√°k:</b> 4 (mert 2¬≤), 9 (mert 3¬≤), 16 (mert 4¬≤).</div><div class="explanation-solution">‚úÖ Megold√°s: A c) defin√≠ci√≥ a helyes.</div>` },
            { question: "Mennyi a ‚àö64 √©rt√©ke?", answers: { a: "32", b: "16", c: "8" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>üîπ 1. Defin√≠ci√≥:</b> Keress√ºk a sz√°mot, melynek n√©gyzete 64.</div><div class="explanation-step"><b>üîπ 2. Sz√°mol√°s:</b> 8 √ó 8 = 64.</div><div class="explanation-solution">‚úÖ Megold√°s: ‚àö64 = 8.</div>` },
            { question: "Mennyi a ‚àö4 √ó ‚àö9 √©rt√©ke?", answers: { a: "‚àö13", b: "36", c: "6" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>üîπ 1. M√≥dszer:</b> Elv√©gezz√ºk a gy√∂kvon√°sokat k√ºl√∂n-k√ºl√∂n. ‚àö4=2, ‚àö9=3.</div><div class="explanation-step"><b>üîπ 2. Szorz√°s:</b> 2 √ó 3 = 6.</div><div class="explanation-bonus"><b>‚úèÔ∏è B√≥nusz:</b> Haszn√°lhatjuk a ‚àö(a√ób) = ‚àöa√ó‚àöb azonoss√°got is: ‚àö4√ó‚àö9 = ‚àö(4√ó9) = ‚àö36 = 6.</div><div class="explanation-solution">‚úÖ Megold√°s: 6.</div>` },
            { question: "Melyik a legkisebb h√°romjegy≈± n√©gyzetsz√°m?", answers: { a: "121", b: "101", c: "100" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>üîπ 1. Keres√©s:</b> Keress√ºk a hat√°rt. 9¬≤ = 81 (ez k√©tjegy≈±).</div><div class="explanation-step"><b>üîπ 2. K√∂vetkez≈ë sz√°m:</b> 10¬≤ = 100. Ez az els≈ë olyan n√©gyzetsz√°m, ami m√°r h√°romjegy≈±.</div><div class="explanation-solution">‚úÖ Megold√°s: A legkisebb h√°romjegy≈± n√©gyzetsz√°m a 100.</div>` }
        ];

        // A JavaScript logika v√°ltozatlan marad, mivel az elemek √°thelyez√©se nem befoly√°solja a m≈±k√∂d√©st.
        // Csak az elemeket keres≈ë v√°ltoz√≥k (pl. quizBody, submitBtn) ugyan√∫gy megtal√°lj√°k a c√©lpontjaikat.
        const quizBody = document.getElementById('quiz-body');
        const submitBtn = document.getElementById('submit-btn');
        const pinInput = document.getElementById('pin-input');
        const resultsDiv = document.getElementById('results');
        const adminPanel = document.getElementById('admin-panel');
        const alertMessage = document.getElementById('alert-message');
        const answerDistributionDiv = document.getElementById('answer-distribution');

        let selectedAnswers = {};
        let questionsOnPage = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function buildQuiz() {
            shuffleArray(fullQuestionPool);
            questionsOnPage = fullQuestionPool;

            questionsOnPage.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('question');
                questionDiv.id = `question-${index}`;
                
                const questionText = document.createElement('p');
                questionText.innerHTML = `${index + 1}. ${q.question}`;
                questionDiv.appendChild(questionText);

                const answersDiv = document.createElement('div');
                answersDiv.classList.add('answers');
                
                let answerOptions = Object.entries(q.answers).map(([key, text]) => ({ key, text }));
                shuffleArray(answerOptions);

                const displayLabels = ['a', 'b', 'c'];
                displayLabels.forEach((displayLabel, i) => {
                    const option = answerOptions[i];
                    
                    const label = document.createElement('label');
                    label.classList.add('answer');

                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.name = `question${index}`;
                    radio.value = option.key;
                    radio.id = `q${index}l${displayLabel}`;
                    radio.addEventListener('change', handleAnswerSelection);

                    const span = document.createElement('span');
                    span.innerHTML = `${displayLabel.toUpperCase()}) ${option.text}`;

                    const feedbackIcon = document.createElement('span');
                    feedbackIcon.classList.add('feedback-icon');

                    label.appendChild(radio);
                    label.appendChild(span);
                    label.appendChild(feedbackIcon);
                    answersDiv.appendChild(label);
                });
                
                questionDiv.appendChild(answersDiv);
                
                const explanationDiv = document.createElement('div');
                explanationDiv.classList.add('explanation');
                explanationDiv.innerHTML = q.explanation;
                questionDiv.appendChild(explanationDiv);

                quizBody.appendChild(questionDiv);
            });
        }

        function handleAnswerSelection(event) {
            const questionIndex = event.target.name.replace('question', '');
            selectedAnswers[questionIndex] = event.target.value;
        }
        
        function checkPIN(pin) {
            const masterPIN = "121909";
            if (pin === masterPIN) return "master";
            const studentPIN = parseInt(pin, 10);
            if (studentPIN >= 100001 && studentPIN <= 100020) return "student";
            return null;
        }

        function showAlert(message) {
            alertMessage.textContent = message;
            alertMessage.style.display = 'block';
        }

        function hideAlert() {
            alertMessage.style.display = 'none';
        }

        function revealAllForMaster() {
            questionsOnPage.forEach((q, index) => {
                const questionDiv = document.getElementById(`question-${index}`);
                const correctKey = q.correctAnswer;
                
                const explanation = questionDiv.querySelector('.explanation');
                explanation.style.display = 'block';

                const labels = questionDiv.querySelectorAll('.answer');
                labels.forEach(label => {
                    const radio = label.querySelector('input');
                    radio.disabled = true;
                    const radioValue = radio.value;
                    const feedbackIcon = label.querySelector('.feedback-icon');

                    if (radioValue === correctKey) {
                        label.classList.add('correct');
                        feedbackIcon.style.display = 'inline';
                        feedbackIcon.textContent = ' ‚úÖ Helyes';
                    }
                });
            });

            resultsDiv.textContent = "Mester M√≥d: Megold√°sok felfedve.";
            submitBtn.disabled = true;
            pinInput.disabled = true;

            adminPanel.style.display = 'block';
            const dist = questionsOnPage.reduce((acc, q) => {
                acc[q.correctAnswer] = (acc[q.correctAnswer] || 0) + 1;
                return acc;
            }, {});
            answerDistributionDiv.innerHTML = `<b>El≈ë√≠rt eloszl√°s:</b> 8√ó'a', 9√ó'b', 8√ó'c'.<br><b>T√©nyleges eloszl√°s:</b> A: ${dist.a || 0}, B: ${dist.b || 0}, C: ${dist.c || 0}.`;
        }
        
        function evaluateStudentAnswers() {
            let score = 0;
            questionsOnPage.forEach((q, index) => {
                const questionDiv = document.getElementById(`question-${index}`);
                const selectedKey = selectedAnswers[index];
                const correctKey = q.correctAnswer;
                
                const labels = questionDiv.querySelectorAll('.answer');
                labels.forEach(label => {
                    const radio = label.querySelector('input');
                    radio.disabled = true;
                    const radioValue = radio.value;
                    const feedbackIcon = label.querySelector('.feedback-icon');

                    if (radioValue === selectedKey) {
                        if (selectedKey === correctKey) {
                            score++;
                            label.classList.add('correct');
                            feedbackIcon.style.display = 'inline';
                            feedbackIcon.textContent = ' ‚úÖ';
                        } else {
                            label.classList.add('incorrect');
                            feedbackIcon.style.display = 'inline';
                            feedbackIcon.textContent = ' ‚ùå';
                        }
                    }
                });
            });

            const percentage = Math.round((score / questionsOnPage.length) * 100);
            resultsDiv.textContent = `Eredm√©nyed: ${score} / ${questionsOnPage.length} (${percentage}%)`;
            submitBtn.disabled = true;
            pinInput.disabled = true;
        }

        submitBtn.addEventListener('click', () => {
            hideAlert();
            const pin = pinInput.value;
            const pinType = checkPIN(pin);

            if (pinType === 'master') {
                revealAllForMaster();
                return;
            }

            if (Object.keys(selectedAnswers).length < questionsOnPage.length) {
                showAlert('K√©rlek, v√°laszold meg az √∂sszes k√©rd√©st az ellen≈ërz√©s el≈ëtt!');
                return;
            }

            if (!pinType) {
                showAlert('√ârv√©nytelen PIN k√≥d. K√©rj egyet a tan√°rodt√≥l!');
                return;
            }
            
            evaluateStudentAnswers();
        });

        pinInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                submitBtn.click();
            }
        });

        document.addEventListener('DOMContentLoaded', buildQuiz);
    </script>
</body>
</html>