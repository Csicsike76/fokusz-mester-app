<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KvÃ­z: TermÃ©szetes szÃ¡mok nÃ©gyzetgyÃ¶ke (FrissÃ­tett ElrendezÃ©s)</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --light-color: #ecf0f1;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --neutral-color: #95a5a6;
            --white: #ffffff;
            --red-hu: #CD2A3E;
            --green-hu: #436F4D;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-color);
            color: var(--primary-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            line-height: 1.6;
        }
        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .quiz-header {
            padding: 20px 30px;
            background: linear-gradient(135deg, var(--red-hu) 33.33%, var(--white) 33.33%, var(--white) 66.66%, var(--green-hu) 66.66%);
            color: var(--primary-color);
            text-align: center;
        }
        .quiz-header h1 {
            margin: 0;
            font-size: 1.8em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        /* === ÃšJ: Controls (ellenÅ‘rzÅ‘ panel) stÃ­lusai === */
        .controls {
            padding: 20px 30px;
            background-color: #f8f9fa; /* EnyhÃ©n eltÃ©rÅ‘ hÃ¡ttÃ©r a jobb elkÃ¼lÃ¶nÃ¼lÃ©sÃ©rt */
            text-align: center;
            border-bottom: 2px solid var(--light-color);
        }
        .pin-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        #pin-input {
            padding: 10px;
            width: 120px;
            border: 2px solid var(--neutral-color);
            border-radius: 5px;
            text-align: center;
            font-size: 1.1em;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        #pin-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 5px var(--accent-color);
        }
        #submit-btn {
            background-color: var(--accent-color);
            color: var(--white);
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s, transform 0.2s;
        }
        #submit-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        #submit-btn:disabled {
            background-color: var(--neutral-color);
            cursor: not-allowed;
            transform: none;
        }
        #results {
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
        }
        #admin-panel {
            display: none;
            margin-top: 15px;
            background-color: var(--light-color);
            padding: 15px;
            border-radius: 5px;
            text-align: left;
        }
        #admin-panel h3 {
            margin-top: 0;
            text-align: center;
        }
        #alert-message {
            display: none;
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            color: var(--white);
            background-color: var(--error-color);
        }
        /* === KÃ©rdÃ©sek stÃ­lusai === */
        .quiz-body {
            padding: 30px;
        }
        .question {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #bdc3c7;
        }
        .question:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
        }
        .question p {
            font-size: 1.2em;
            margin: 0 0 15px 0;
            font-weight: 600;
        }
        .answers {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .answer {
            display: block;
            background-color: var(--light-color);
            padding: 12px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            border: 1px solid transparent;
        }
        .answer:hover {
            background-color: #dcdde1;
            transform: translateY(-2px);
        }
        .answer input[type="radio"] {
            display: none;
        }
        .answer input[type="radio"]:checked + span {
            font-weight: bold;
            color: var(--accent-color);
        }
        .feedback-icon {
            display: none;
            margin-left: 10px;
            font-weight: bold;
        }
        .correct {
            background-color: #e8f5e9;
            border: 1px solid var(--success-color);
        }
        .incorrect {
            background-color: #fce4e4;
            border: 1px solid var(--error-color);
        }
        .explanation {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background-color: #f8f9fa;
            border-left: 5px solid var(--neutral-color);
            border-radius: 5px;
        }
        .explanation-step { margin-bottom: 10px; }
        .explanation-step b { color: var(--secondary-color); }
        .explanation-solution { margin-top: 10px; font-weight: bold; color: var(--success-color); }
        .explanation-bonus { margin-top: 10px; padding-top: 10px; border-top: 1px dashed var(--neutral-color); font-style: italic; }
    </style>
</head>
<body>

    <div class="quiz-container">
        <div class="quiz-header">
            <h1>KvÃ­z: TermÃ©szetes szÃ¡mok nÃ©gyzetgyÃ¶ke</h1>
        </div>

        <!-- === MÃ“DOSÃTOTT RÃ‰SZ: Az ellenÅ‘rzÅ‘ panel felÃ¼lre kerÃ¼lt === -->
        <div class="controls">
            <div class="pin-container">
                <input type="password" id="pin-input" placeholder="PIN kÃ³d" autocomplete="off">
                <button id="submit-btn">EllenÅ‘rzÃ©s</button>
            </div>
            <div id="alert-message"></div>
            <!-- Az eredmÃ©nyek (pontszÃ¡m, szÃ¡zalÃ©k) Ã©s az admin panel is itt fognak megjelenni -->
            <div id="results"></div>
            <div id="admin-panel">
                <h3>Admin Panel</h3>
                <p>Mester PIN elfogadva. A magyarÃ¡zatok Ã©s a helyes vÃ¡laszok lÃ¡thatÃ³k.</p>
                <p id="answer-distribution"></p>
            </div>
        </div>
        <!-- === MÃ“DOSÃTÃS VÃ‰GE === -->

        <div class="quiz-body" id="quiz-body">
            <!-- Questions will be dynamically inserted here -->
        </div>
    </div>

    <script>
        const fullQuestionPool = [
            // A kÃ©rdÃ©sek Ã©s magyarÃ¡zatok adatbÃ¡zisa vÃ¡ltozatlan marad
            // 8 'a' answers
            { question: "Mennyi a âˆš361 Ã©rtÃ©ke?", answers: { a: "19", b: "18", c: "21" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. DefinÃ­ciÃ³:</b> Azt a szÃ¡mot keressÃ¼k, amelynek a nÃ©gyzete 361.</div><div class="explanation-step"><b>ğŸ”¹ 2. BecslÃ©s:</b> 10Â²=100 Ã©s 20Â²=400. A szÃ¡m 10 Ã©s 20 kÃ¶zÃ¶tt van. Mivel a 361 utolsÃ³ szÃ¡mjegye 1, a keresett szÃ¡m 1-re vagy 9-re vÃ©gzÅ‘dik.</div><div class="explanation-step"><b>ğŸ”¹ 3. EllenÅ‘rzÃ©s:</b> 19 Ã— 19 = 361.</div><div class="explanation-solution">âœ… MegoldÃ¡s: âˆš361 = 19.</div>` },
            { question: "Melyik szÃ¡m nÃ©gyzete a 225?", answers: { a: "15", b: "25", c: "12.5" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. KÃ©rdÃ©s elemzÃ©se:</b> Azt a szÃ¡mot keressÃ¼k, amire igaz, hogy xÂ² = 225. Ez a âˆš225 kiszÃ¡mÃ­tÃ¡sÃ¡val egyenÃ©rtÃ©kÅ±.</div><div class="explanation-step"><b>ğŸ”¹ 2. BecslÃ©s:</b> A szÃ¡m 5-re vÃ©gzÅ‘dik, mert 225-re vÃ©gzÅ‘dik. 10Â²=100, 20Â²=400. A 15-Ã¶t kell kiprÃ³bÃ¡lni.</div><div class="explanation-step"><b>ğŸ”¹ 3. EllenÅ‘rzÃ©s:</b> 15 Ã— 15 = 225.</div><div class="explanation-solution">âœ… MegoldÃ¡s: A 15 nÃ©gyzete 225.</div>` },
            { question: "Mi az a szÃ¡m, aminek a nÃ©gyzete 49?", answers: { a: "7", b: "4.9", c: "9" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. DefinÃ­ciÃ³:</b> KeressÃ¼k azt az x szÃ¡mot, melyre xÂ² = 49.</div><div class="explanation-step"><b>ğŸ”¹ 2. SzÃ¡molÃ¡s:</b> A szorzÃ³tÃ¡blÃ¡bÃ³l tudjuk, hogy 7 Ã— 7 = 49.</div><div class="explanation-solution">âœ… MegoldÃ¡s: A 7 az a szÃ¡m.</div>` },
            { question: "Melyik a legnagyobb tÃ¶kÃ©letes nÃ©gyzet 200-nÃ¡l kisebb?", answers: { a: "196", b: "169", c: "199" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. KeresÃ©s:</b> NÃ©zzÃ¼k a nÃ©gyzetszÃ¡mokat. 13Â² = 169. 14Â² = 196. 15Â² = 225.</div><div class="explanation-step"><b>ğŸ”¹ 2. KÃ¶vetkeztetÃ©s:</b> A 225 mÃ¡r tÃ¶bb, mint 200. TehÃ¡t a 196 a legnagyobb, ami 200-nÃ¡l kisebb.</div><div class="explanation-solution">âœ… MegoldÃ¡s: 196.</div>` },
            { question: "Mennyi a âˆš0 Ã©rtÃ©ke?", answers: { a: "0", b: "1", c: "Nincs Ã©rtelmezve" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. DefinÃ­ciÃ³:</b> Azt a nemnegatÃ­v szÃ¡mot keressÃ¼k, melynek nÃ©gyzete 0.</div><div class="explanation-step"><b>ğŸ”¹ 2. SzÃ¡molÃ¡s:</b> 0 Ã— 0 = 0.</div><div class="explanation-solution">âœ… MegoldÃ¡s: âˆš0 = 0.</div>` },
            { question: "Ha âˆšx = 20, akkor mennyi az x?", answers: { a: "400", b: "40", c: "100" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. Egyenlet:</b> âˆšx = 20.</div><div class="explanation-step"><b>ğŸ”¹ 2. MegoldÃ¡s:</b> Az egyenlet mindkÃ©t oldalÃ¡t nÃ©gyzetre emeljÃ¼k, hogy eltÃ¼ntessÃ¼k a gyÃ¶kjelet.</div><div class="explanation-step"><b>ğŸ”¹ 3. SzÃ¡molÃ¡s:</b> (âˆšx)Â² = 20Â² â†’ x = 400.</div><div class="explanation-solution">âœ… MegoldÃ¡s: x = 400.</div>` },
            { question: "Melyik szÃ¡m van a âˆš121 Ã©s a âˆš169 kÃ¶zÃ¶tt?", answers: { a: "12", b: "10", c: "14" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. HatÃ¡rÃ©rtÃ©kek:</b> ElÅ‘szÃ¶r kiszÃ¡moljuk a hatÃ¡rokat. âˆš121 = 11. âˆš169 = 13.</div><div class="explanation-step"><b>ğŸ”¹ 2. KeresÃ©s:</b> Azt az egÃ©sz szÃ¡mot keressÃ¼k, ami 11 Ã©s 13 kÃ¶zÃ¶tt van.</div><div class="explanation-solution">âœ… MegoldÃ¡s: Ez a 12.</div>` },
            { question: "Melyik szÃ¡m nÃ©gyzete a 625?", answers: { a: "25", b: "15", c: "35" }, correctAnswer: "a", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. KÃ©rdÃ©s:</b> xÂ² = 625. Mi az x?</div><div class="explanation-step"><b>ğŸ”¹ 2. BecslÃ©s:</b> 20Â²=400, 30Â²=900. A szÃ¡m 20 Ã©s 30 kÃ¶zÃ¶tt van, Ã©s 5-re vÃ©gzÅ‘dik.</div><div class="explanation-step"><b>ğŸ”¹ 3. EllenÅ‘rzÃ©s:</b> 25 Ã— 25 = 625.</div><div class="explanation-solution">âœ… MegoldÃ¡s: A 25 nÃ©gyzete 625.</div>` },
            // 9 'b' answers
            { question: "Egy nÃ©gyzet alakÃº kert terÃ¼lete 256 mÂ². Milyen hosszÃº a kert egy oldala?", answers: { a: "15 m", b: "16 m", c: "64 m" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. KÃ©plet:</b> A nÃ©gyzet terÃ¼lete T = aÂ², ahol 'a' az oldal hossza. EbbÅ‘l a = âˆšT.</div><div class="explanation-step"><b>ğŸ”¹ 2. BehelyettesÃ­tÃ©s:</b> a = âˆš256.</div><div class="explanation-step"><b>ğŸ”¹ 3. SzÃ¡molÃ¡s:</b> 16 Ã— 16 = 256.</div><div class="explanation-solution">âœ… MegoldÃ¡s: Az oldal hossza 16 m.</div>` },
            { question: "Mennyi a âˆš(13Â²) Ã©rtÃ©ke?", answers: { a: "169", b: "13", c: "26" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. TÃ©tel:</b> Egy nemnegatÃ­v szÃ¡m nÃ©gyzetÃ©nek a nÃ©gyzetgyÃ¶ke maga a szÃ¡m. KÃ©plettel: âˆš(nÂ²) = n, ha n â‰¥ 0.</div><div class="explanation-step"><b>ğŸ”¹ 2. AlkalmazÃ¡s:</b> Itt n = 13, tehÃ¡t âˆš(13Â²) = 13.</div><div class="explanation-bonus"><b>âœï¸ BÃ³nusz Ãºt:</b> 13Â² = 169, majd âˆš169 = 13. Az eredmÃ©ny ugyanaz.</div><div class="explanation-solution">âœ… MegoldÃ¡s: 13.</div>` },
            { question: "Mi a `âˆšn = 25` egyenlet megoldÃ¡sa?", answers: { a: "5", b: "625", c: "50" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. Egyenlet:</b> âˆšn = 25.</div><div class="explanation-step"><b>ğŸ”¹ 2. MegoldÃ¡s:</b> Az egyenlet mindkÃ©t oldalÃ¡t nÃ©gyzetre emeljÃ¼k.</div><div class="explanation-step"><b>ğŸ”¹ 3. SzÃ¡molÃ¡s:</b> (âˆšn)Â² = 25Â² â†’ n = 625.</div><div class="explanation-solution">âœ… MegoldÃ¡s: n = 625.</div>` },
            { question: "Mennyi a âˆš81 Ã©rtÃ©ke?", answers: { a: "8.1", b: "9", c: "40.5" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. DefinÃ­ciÃ³:</b> Azt a szÃ¡mot keressÃ¼k, melynek nÃ©gyzete 81.</div><div class="explanation-step"><b>ğŸ”¹ 2. SzÃ¡molÃ¡s:</b> 9 Ã— 9 = 81.</div><div class="explanation-solution">âœ… MegoldÃ¡s: âˆš81 = 9.</div>` },
            { question: "Mennyi a âˆš(3Â² + 4Â²) Ã©rtÃ©ke?", answers: { a: "7", b: "5", c: "25" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. SzabÃ¡ly:</b> A gyÃ¶kjel alatt kell elÅ‘szÃ¶r elvÃ©gezni a mÅ±veleteket (mÅ±veleti sorrend).</div><div class="explanation-step"><b>ğŸ”¹ 2. SzÃ¡molÃ¡s:</b> 3Â²=9, 4Â²=16. TehÃ¡t âˆš(9 + 16) = âˆš25.</div><div class="explanation-step"><b>ğŸ”¹ 3. GyÃ¶kvonÃ¡s:</b> âˆš25 = 5.</div><div class="explanation-bonus"><b>âœï¸ Figyelem:</b> A mÅ±velet NEM egyenlÅ‘ âˆš9 + âˆš16 = 3+4=7-tel!</div><div class="explanation-solution">âœ… MegoldÃ¡s: 5.</div>` },
            { question: "Ha egy nÃ©gyzet oldala 11 cm, mennyi a terÃ¼lete?", answers: { a: "44 cmÂ²", b: "121 cmÂ²", c: "22 cmÂ²" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. KÃ©plet:</b> A nÃ©gyzet terÃ¼lete T = aÂ².</div><div class="explanation-step"><b>ğŸ”¹ 2. BehelyettesÃ­tÃ©s:</b> T = 11Â².</div><div class="explanation-step"><b>ğŸ”¹ 3. SzÃ¡molÃ¡s:</b> 11 Ã— 11 = 121.</div><div class="explanation-solution">âœ… MegoldÃ¡s: A terÃ¼let 121 cmÂ².</div>` },
            { question: "Mennyi a âˆš(10000) Ã©rtÃ©ke?", answers: { a: "1000", b: "100", c: "5000" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. SzabÃ¡ly:</b> 10-hatvÃ¡nyoknÃ¡l a gyÃ¶kjel alatti nullÃ¡k szÃ¡mÃ¡t felezni kell.</div><div class="explanation-step"><b>ğŸ”¹ 2. AlkalmazÃ¡s:</b> A 10000-ben 4 db nulla van. A gyÃ¶kÃ©ben 4/2 = 2 db nulla lesz.</div><div class="explanation-step"><b>ğŸ”¹ 3. EllenÅ‘rzÃ©s:</b> 100 Ã— 100 = 10000.</div><div class="explanation-solution">âœ… MegoldÃ¡s: âˆš10000 = 100.</div>` },
            { question: "Melyik szÃ¡m nÃ©gyzete a 144?", answers: { a: "72", b: "12", c: "14.4" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. KÃ©rdÃ©s:</b> xÂ² = 144. Mennyi x?</div><div class="explanation-step"><b>ğŸ”¹ 2. SzÃ¡molÃ¡s:</b> 12 Ã— 12 = 144.</div><div class="explanation-solution">âœ… MegoldÃ¡s: A 12 nÃ©gyzete 144.</div>` },
            { question: "Mennyi a âˆš289 Ã©rtÃ©ke?", answers: { a: "13", b: "17", c: "19" }, correctAnswer: "b", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. BecslÃ©s:</b> 10Â²=100, 20Â²=400. A szÃ¡m 10 Ã©s 20 kÃ¶zÃ¶tt van. 9-re vÃ©gzÅ‘dik, tehÃ¡t a szÃ¡m 3-ra vagy 7-re vÃ©gzÅ‘dik.</div><div class="explanation-step"><b>ğŸ”¹ 2. PrÃ³ba:</b> 13Â²=169 (nem jÃ³). 17Â² = 289 (jÃ³).</div><div class="explanation-solution">âœ… MegoldÃ¡s: âˆš289 = 17.</div>` },
            // 8 'c' answers
            { question: "Melyik kifejezÃ©s Ã©rtÃ©ke NEM termÃ©szetes szÃ¡m?", answers: { a: "âˆš100", b: "âˆš144", c: "âˆš50" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. VizsgÃ¡lat:</b> Meg kell nÃ©zni, melyik szÃ¡m nem "tÃ¶kÃ©letes nÃ©gyzet".</div><div class="explanation-step"><b>ğŸ”¹ 2. ElemzÃ©s:</b> âˆš100 = 10 (termÃ©szetes). âˆš144 = 12 (termÃ©szetes). A 50 nem nÃ©gyzetszÃ¡m (7Â²=49, 8Â²=64).</div><div class="explanation-solution">âœ… MegoldÃ¡s: A âˆš50 Ã©rtÃ©ke nem termÃ©szetes szÃ¡m.</div>` },
            { question: "Mennyi a âˆš400 Ã©rtÃ©ke?", answers: { a: "40", b: "200", c: "20" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. MÃ³dszer:</b> âˆš400 = âˆš(4 Ã— 100).</div><div class="explanation-step"><b>ğŸ”¹ 2. TÃ©tel:</b> A gyÃ¶kvonÃ¡s szorzÃ¡sra nÃ©zve szÃ©tszedhetÅ‘: âˆša Ã— âˆšb = âˆš(aÃ—b).</div><div class="explanation-step"><b>ğŸ”¹ 3. SzÃ¡molÃ¡s:</b> âˆš4 Ã— âˆš100 = 2 Ã— 10 = 20.</div><div class="explanation-solution">âœ… MegoldÃ¡s: âˆš400 = 20.</div>` },
            { question: "Melyik Ã¡llÃ­tÃ¡s igaz?", answers: { a: "âˆš(9+16) = 3+4", b: "âˆš2 nem valÃ³s szÃ¡m", c: "âˆš(9Ã—16) = âˆš9 Ã— âˆš16" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>ğŸ”¹ A)</b> âˆš(9+16)=âˆš25=5. De 3+4=7. Hamis.</div><div class="explanation-step"><b>ğŸ”¹ B)</b> âˆš2 valÃ³s szÃ¡m (irracionÃ¡lis), de nem racionÃ¡lis. Hamis.</div><div class="explanation-step"><b>ğŸ”¹ C)</b> âˆš(9Ã—16)=âˆš144=12. Ã‰s âˆš9Ã—âˆš16=3Ã—4=12. Igaz.</div><div class="explanation-solution">âœ… MegoldÃ¡s: A c) Ã¡llÃ­tÃ¡s igaz.</div>` },
            { question: "Mennyi a âˆš1 Ã©rtÃ©ke?", answers: { a: "0", b: "Nincs Ã©rtelmezve", c: "1" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. DefinÃ­ciÃ³:</b> KeressÃ¼k a szÃ¡mot, melynek nÃ©gyzete 1.</div><div class="explanation-step"><b>ğŸ”¹ 2. SzÃ¡molÃ¡s:</b> 1 Ã— 1 = 1.</div><div class="explanation-solution">âœ… MegoldÃ¡s: âˆš1 = 1.</div>` },
            { question: "Mi a 'tÃ¶kÃ©letes nÃ©gyzet' definÃ­ciÃ³ja?", answers: { a: "PÃ¡ros szÃ¡m.", b: "OszthatÃ³ 2-vel.", c: "Egy termÃ©szetes szÃ¡m nÃ©gyzete." }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. Fogalom:</b> A nÃ©gyzetszÃ¡mok azok a szÃ¡mok, amik elÅ‘Ã¡llnak egy termÃ©szetes szÃ¡m Ã¶nmagÃ¡val valÃ³ szorzatakÃ©nt.</div><div class="explanation-step"><b>ğŸ”¹ 2. PÃ©ldÃ¡k:</b> 4 (mert 2Â²), 9 (mert 3Â²), 16 (mert 4Â²).</div><div class="explanation-solution">âœ… MegoldÃ¡s: A c) definÃ­ciÃ³ a helyes.</div>` },
            { question: "Mennyi a âˆš64 Ã©rtÃ©ke?", answers: { a: "32", b: "16", c: "8" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. DefinÃ­ciÃ³:</b> KeressÃ¼k a szÃ¡mot, melynek nÃ©gyzete 64.</div><div class="explanation-step"><b>ğŸ”¹ 2. SzÃ¡molÃ¡s:</b> 8 Ã— 8 = 64.</div><div class="explanation-solution">âœ… MegoldÃ¡s: âˆš64 = 8.</div>` },
            { question: "Mennyi a âˆš4 Ã— âˆš9 Ã©rtÃ©ke?", answers: { a: "âˆš13", b: "36", c: "6" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. MÃ³dszer:</b> ElvÃ©gezzÃ¼k a gyÃ¶kvonÃ¡sokat kÃ¼lÃ¶n-kÃ¼lÃ¶n. âˆš4=2, âˆš9=3.</div><div class="explanation-step"><b>ğŸ”¹ 2. SzorzÃ¡s:</b> 2 Ã— 3 = 6.</div><div class="explanation-bonus"><b>âœï¸ BÃ³nusz:</b> HasznÃ¡lhatjuk a âˆš(aÃ—b) = âˆšaÃ—âˆšb azonossÃ¡got is: âˆš4Ã—âˆš9 = âˆš(4Ã—9) = âˆš36 = 6.</div><div class="explanation-solution">âœ… MegoldÃ¡s: 6.</div>` },
            { question: "Melyik a legkisebb hÃ¡romjegyÅ± nÃ©gyzetszÃ¡m?", answers: { a: "121", b: "101", c: "100" }, correctAnswer: "c", explanation: `<div class="explanation-step"><b>ğŸ”¹ 1. KeresÃ©s:</b> KeressÃ¼k a hatÃ¡rt. 9Â² = 81 (ez kÃ©tjegyÅ±).</div><div class="explanation-step"><b>ğŸ”¹ 2. KÃ¶vetkezÅ‘ szÃ¡m:</b> 10Â² = 100. Ez az elsÅ‘ olyan nÃ©gyzetszÃ¡m, ami mÃ¡r hÃ¡romjegyÅ±.</div><div class="explanation-solution">âœ… MegoldÃ¡s: A legkisebb hÃ¡romjegyÅ± nÃ©gyzetszÃ¡m a 100.</div>` }
        ];

        // A JavaScript logika vÃ¡ltozatlan marad, mivel az elemek Ã¡thelyezÃ©se nem befolyÃ¡solja a mÅ±kÃ¶dÃ©st.
        // Csak az elemeket keresÅ‘ vÃ¡ltozÃ³k (pl. quizBody, submitBtn) ugyanÃºgy megtalÃ¡ljÃ¡k a cÃ©lpontjaikat.
        const quizBody = document.getElementById('quiz-body');
        const submitBtn = document.getElementById('submit-btn');
        const pinInput = document.getElementById('pin-input');
        const resultsDiv = document.getElementById('results');
        const adminPanel = document.getElementById('admin-panel');
        const alertMessage = document.getElementById('alert-message');
        const answerDistributionDiv = document.getElementById('answer-distribution');

        let selectedAnswers = {};
        let questionsOnPage = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function buildQuiz() {
            shuffleArray(fullQuestionPool);
            questionsOnPage = fullQuestionPool;

            questionsOnPage.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('question');
                questionDiv.id = `question-${index}`;
                
                const questionText = document.createElement('p');
                questionText.innerHTML = `${index + 1}. ${q.question}`;
                questionDiv.appendChild(questionText);

                const answersDiv = document.createElement('div');
                answersDiv.classList.add('answers');
                
                let answerOptions = Object.entries(q.answers).map(([key, text]) => ({ key, text }));
                shuffleArray(answerOptions);

                const displayLabels = ['a', 'b', 'c'];
                displayLabels.forEach((displayLabel, i) => {
                    const option = answerOptions[i];
                    
                    const label = document.createElement('label');
                    label.classList.add('answer');

                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.name = `question${index}`;
                    radio.value = option.key;
                    radio.id = `q${index}l${displayLabel}`;
                    radio.addEventListener('change', handleAnswerSelection);

                    const span = document.createElement('span');
                    span.innerHTML = `${displayLabel.toUpperCase()}) ${option.text}`;

                    const feedbackIcon = document.createElement('span');
                    feedbackIcon.classList.add('feedback-icon');

                    label.appendChild(radio);
                    label.appendChild(span);
                    label.appendChild(feedbackIcon);
                    answersDiv.appendChild(label);
                });
                
                questionDiv.appendChild(answersDiv);
                
                const explanationDiv = document.createElement('div');
                explanationDiv.classList.add('explanation');
                explanationDiv.innerHTML = q.explanation;
                questionDiv.appendChild(explanationDiv);

                quizBody.appendChild(questionDiv);
            });
        }

        function handleAnswerSelection(event) {
            const questionIndex = event.target.name.replace('question', '');
            selectedAnswers[questionIndex] = event.target.value;
        }
        
        function checkPIN(pin) {
            const masterPIN = "121909";
            if (pin === masterPIN) return "master";
            const studentPIN = parseInt(pin, 10);
            if (studentPIN >= 100001 && studentPIN <= 100020) return "student";
            return null;
        }

        function showAlert(message) {
            alertMessage.textContent = message;
            alertMessage.style.display = 'block';
        }

        function hideAlert() {
            alertMessage.style.display = 'none';
        }

        function revealAllForMaster() {
            questionsOnPage.forEach((q, index) => {
                const questionDiv = document.getElementById(`question-${index}`);
                const correctKey = q.correctAnswer;
                
                const explanation = questionDiv.querySelector('.explanation');
                explanation.style.display = 'block';

                const labels = questionDiv.querySelectorAll('.answer');
                labels.forEach(label => {
                    const radio = label.querySelector('input');
                    radio.disabled = true;
                    const radioValue = radio.value;
                    const feedbackIcon = label.querySelector('.feedback-icon');

                    if (radioValue === correctKey) {
                        label.classList.add('correct');
                        feedbackIcon.style.display = 'inline';
                        feedbackIcon.textContent = ' âœ… Helyes';
                    }
                });
            });

            resultsDiv.textContent = "Mester MÃ³d: MegoldÃ¡sok felfedve.";
            submitBtn.disabled = true;
            pinInput.disabled = true;

            adminPanel.style.display = 'block';
            const dist = questionsOnPage.reduce((acc, q) => {
                acc[q.correctAnswer] = (acc[q.correctAnswer] || 0) + 1;
                return acc;
            }, {});
            answerDistributionDiv.innerHTML = `<b>ElÅ‘Ã­rt eloszlÃ¡s:</b> 8Ã—'a', 9Ã—'b', 8Ã—'c'.<br><b>TÃ©nyleges eloszlÃ¡s:</b> A: ${dist.a || 0}, B: ${dist.b || 0}, C: ${dist.c || 0}.`;
        }
        
        function evaluateStudentAnswers() {
            let score = 0;
            questionsOnPage.forEach((q, index) => {
                const questionDiv = document.getElementById(`question-${index}`);
                const selectedKey = selectedAnswers[index];
                const correctKey = q.correctAnswer;
                
                const labels = questionDiv.querySelectorAll('.answer');
                labels.forEach(label => {
                    const radio = label.querySelector('input');
                    radio.disabled = true;
                    const radioValue = radio.value;
                    const feedbackIcon = label.querySelector('.feedback-icon');

                    if (radioValue === selectedKey) {
                        if (selectedKey === correctKey) {
                            score++;
                            label.classList.add('correct');
                            feedbackIcon.style.display = 'inline';
                            feedbackIcon.textContent = ' âœ…';
                        } else {
                            label.classList.add('incorrect');
                            feedbackIcon.style.display = 'inline';
                            feedbackIcon.textContent = ' âŒ';
                        }
                    }
                });
            });

            const percentage = Math.round((score / questionsOnPage.length) * 100);
            resultsDiv.textContent = `EredmÃ©nyed: ${score} / ${questionsOnPage.length} (${percentage}%)`;
            submitBtn.disabled = true;
            pinInput.disabled = true;
        }

        submitBtn.addEventListener('click', () => {
            hideAlert();
            const pin = pinInput.value;
            const pinType = checkPIN(pin);

            if (pinType === 'master') {
                revealAllForMaster();
                return;
            }

            if (Object.keys(selectedAnswers).length < questionsOnPage.length) {
                showAlert('KÃ©rlek, vÃ¡laszold meg az Ã¶sszes kÃ©rdÃ©st az ellenÅ‘rzÃ©s elÅ‘tt!');
                return;
            }

            if (!pinType) {
                showAlert('Ã‰rvÃ©nytelen PIN kÃ³d. KÃ©rj egyet a tanÃ¡rodtÃ³l!');
                return;
            }
            
            evaluateStudentAnswers();
        });

        pinInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                submitBtn.click();
            }
        });

        document.addEventListener('DOMContentLoaded', buildQuiz);
    </script>
</body>
</html>