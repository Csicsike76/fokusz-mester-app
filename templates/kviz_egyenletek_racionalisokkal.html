<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: Egyenletek a racionális számok halmazán</title>
  <style>
    :root {
      --primary-color: #388d3c; /* Zöld */
      --secondary-color: #d52b1e; /* Piros */
      --light-green: #e8f5e9;
      --light-red: #ffebee;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, var(--secondary-color), var(--text-light), var(--primary-color));
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: var(--light-green);
      border-color: var(--primary-color);
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: var(--light-red);
      border-color: var(--secondary-color);
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #2a6a2d;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: Egyenletek a racionális számok halmazán</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
      { q: "Mi a 2x + 1.5 = 4.5 egyenlet megoldása?", a: "1.5", b: "3", c: "6", correct: "a", exp: "1. Mindkét oldalból kivonunk 1.5-öt: 2x = 3. 2. Mindkét oldalt elosztjuk 2-vel: x = 1.5." },
      { q: "Oldd meg az x/3 - 1 = 2 egyenletet!", a: "3", b: "9", c: "6", correct: "b", exp: "1. Adjunk 1-et mindkét oldalhoz: x/3 = 3. 2. Szorozzuk meg mindkét oldalt 3-mal: x = 9." },
      { q: "Melyik átalakítás NEM ekvivalens, ha az alaphalmaz a racionális számok?", a: "Mindkét oldal szorzása (x-1)-gyel.", b: "Mindkét oldalhoz 1/2 hozzáadása.", c: "Mindkét oldal osztása 5-tel.", correct: "a", exp: "Egy változót tartalmazó kifejezéssel való szorzás nem ekvivalens átalakítás, mert a kifejezés értéke lehet 0, ami hamis megoldásokhoz vezethet, vagy megoldásvesztést okozhat. A 'b' és 'c' opciók ekvivalens átalakítások." },
      { q: "Mi az 5(x - 0.4) = 8 egyenlet megoldása?", a: "2", b: "1.2", c: "2.4", correct: "a", exp: "1. Zárójelbontás: 5x - 2 = 8. 2. Hozzáadunk 2-t mindkét oldalhoz: 5x = 10. 3. Osztunk 5-tel: x = 2." },
      { q: "Egy szám kétharmada 10. Melyik ez a szám?", a: "15", b: "20/3", c: "30", correct: "a", exp: "Az egyenlet: (2/3)⋅x = 10. Az egyenlet megoldásához szorozzuk mindkét oldalt a 2/3 reciprokával, azaz 3/2-del: x = 10 ⋅ (3/2) = 30/2 = 15." },
      { q: "Melyik egyenletnek a megoldása x = -1/2?", a: "2x = 1", b: "x + 1 = 0.5", c: "4x + 3 = 1", correct: "c", exp: "Ellenőrizzük a 'c' választ: 4(-1/2) + 3 = -2 + 3 = 1. Az egyenlőség igaz." },
      { q: "Oldd meg: 0.1x + 2 = 3.2", a: "1.2", b: "12", c: "0.12", correct: "b", exp: "1. Kivonunk 2-t: 0.1x = 1.2. 2. Osztunk 0.1-gyel (ami ugyanaz, mint 10-zel szorozni): x = 1.2 / 0.1 = 12." },
      { q: "Egy téglalap kerülete 15, egyik oldala 3.5. Milyen hosszú a másik oldal?", a: "11.5", b: "4", c: "7.5", correct: "b", exp: "A kerület képlete K=2(a+b). 15 = 2(3.5+b). Osszunk 2-vel: 7.5 = 3.5+b. Vonjunk ki 3.5-et: b=4." },
      { q: "Gondoltam egy számra. A feléhez hozzáadtam a harmadát, így 25-öt kaptam. Mi a gondolt szám?", a: "30", b: "24", c: "50", correct: "a", exp: "Az egyenlet: x/2 + x/3 = 25. Hozzuk közös nevezőre (6): 3x/6 + 2x/6 = 25. 5x/6 = 25. Szorozzunk 6-tal: 5x = 150. Osszunk 5-tel: x = 30." },
      { q: "Mi az -x + 0.5 = -2.5 egyenlet megoldása?", a: "3", b: "-3", c: "-2", correct: "a", exp: "1. Kivonunk 0.5-öt: -x = -2.5 - 0.5 → -x = -3. 2. Szorozzuk mindkét oldalt -1-gyel: x = 3." },
      { q: "Ha egy szám 20%-a 15, akkor mennyi a szám 100%-a?", a: "3", b: "75", c: "300", correct: "b", exp: "Legyen a szám x. Az egyenlet: 0.20 ⋅ x = 15. Osszunk 0.2-vel: x = 15 / 0.2 = 150 / 2 = 75." },
      { q: "Oldd meg: (3/4)x - 2 = 7", a: "12", b: "9", c: "36/4", correct: "a", exp: "1. Hozzáadunk 2-t: (3/4)x = 9. 2. Szorzunk a 3/4 reciprokával, 4/3-dal: x = 9 ⋅ (4/3) = 36/3 = 12." },
      { q: "Mi a 0.2x + 0.3x = 1 egyenlet megoldása?", a: "0.5", b: "1", c: "2", correct: "c", exp: "Először vonjuk össze a bal oldalon az x-es tagokat: 0.5x = 1. Osszunk 0.5-del (ami 2-vel való szorzást jelent): x = 1 / 0.5 = 2." },
      { q: "Milyen x-re lesz 2x+1 és 3x-1 értéke egyenlő?", a: "2", b: "0", c: "Nincs ilyen x.", correct: "a", exp: "Felírjuk az egyenletet: 2x+1 = 3x-1. 1. Kivonunk 2x-et: 1 = x-1. 2. Hozzáadunk 1-et: 2 = x." },
      { q: "Oldd meg: -1/2 * x = 10", a: "5", b: "-5", c: "-20", correct: "c", exp: "Szorozzuk mindkét oldalt -2-vel (az -1/2 reciprokával): x = 10 ⋅ (-2) = -20." },
      { q: "Egy szám és a felének összege 18. Melyik ez a szám?", a: "9", b: "12", c: "27", correct: "b", exp: "Az egyenlet: x + x/2 = 18. 1.5x = 18. x = 18 / 1.5 = 180 / 15 = 12." },
      { q: "Mi az a szám, aminek a tizedrésze 0.7?", a: "0.07", b: "7", c: "70", correct: "b", exp: "Az egyenlet: x/10 = 0.7. Szorozzuk mindkét oldalt 10-zel: x = 7." },
      { q: "Egy üveg 1/3-ig van tele. Ha beleöntünk még 2 decit, félig lesz. Hány decis az üveg?", a: "6 deci", b: "10 deci", c: "12 deci", correct: "c", exp: "Legyen az üveg űrtartalma x. Az egyenlet: x/3 + 2 = x/2. Hozzuk közös nevezőre (6): 2x/6 + 12/6 = 3x/6. Szorozzunk 6-tal: 2x+12=3x. Vonjunk ki 2x-et: x=12." },
      { q: "Mi a 10 = 50x egyenlet megoldása?", a: "0.2", b: "5", c: "500", correct: "a", exp: "Osszuk mindkét oldalt 50-nel: x = 10 / 50 = 1/5 = 0.2." },
      { q: "Egy kert kerülete 50 méter. Az egyik oldala 10 méter. Mivel nem négyzet, milyen hosszú a másik oldala?", a: "40 m", b: "20 m", c: "15 m", correct: "c", exp: "A kerület K=2(a+b). 50 = 2(10+b). Osszunk 2-vel: 25 = 10+b. Vonjunk ki 10-et: b=15 m." },
      { q: "Oldd meg: 0.8 - x = 0.2", a: "1", b: "0.6", c: "-0.6", correct: "b", exp: "Adjunk x-et mindkét oldalhoz: 0.8 = 0.2 + x. Vonjunk ki 0.2-t: x = 0.6." },
      { q: "Miért fontos az 'alaphalmaz' egyenletek megoldásánál?", a: "Mert csak az alaphalmazba eső megoldások érvényesek.", b: "Mert az alaphalmaz határozza meg az együtthatókat.", c: "Nem fontos.", correct: "a", exp: "Hiába kapunk egy matematikai megoldást, ha az nem esik a megengedett értékek halmazába (pl. egy hosszúság nem lehet negatív), akkor az a feladatnak nem megoldása." },
      { q: "Egy apa 30 évvel idősebb a fiánál. Ketten együtt 42 évesek. Hány éves a fiú?", a: "6", b: "12", c: "18", correct: "a", exp: "Legyen a fiú x, az apa x+30. x + (x+30) = 42. 2x+30=42. 2x=12. x=6." },
      { q: "Mi az a szám, aminek a 150%-a 60?", a: "90", b: "40", c: "30", correct: "b", exp: "Az egyenlet: 1.5 ⋅ x = 60. Osszuk mindkét oldalt 1.5-del: x = 60 / 1.5 = 600 / 15 = 40." },
      { q: "Oldd meg: (x - 5)/2 = -3", a: "-1", b: "1", c: "11", correct: "a", exp: "1. Szorozzuk mindkét oldalt 2-vel: x - 5 = -6. 2. Adjunk hozzá 5-öt mindkét oldalhoz: x = -6 + 5 = -1." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>