<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gyakorló Kvíz - Egyszerű áramkörök</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: auto;
        }
        h1 {
            color: #D50000; /* Piros */
            text-align: center;
            border-bottom: 2px solid #D50000; /* Piros */
            padding-bottom: 10px;
        }
        #quiz-container {
            background-color: #ffffff; /* Fehér */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .question-block {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .question-block:last-of-type {
            border-bottom: none;
        }
        .question-text {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        .options-container label {
            display: block;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 1px solid #ddd;
        }
        .options-container label:hover {
            background-color: #f9f9f9;
        }
        .options-container input[type="radio"] {
            margin-right: 10px;
        }
        .explanation {
            display: none;
            margin-top: 15px;
            padding: 10px;
            background-color: #e8f5e9; /* Világos zöld */
            border-left: 4px solid #008751; /* Zöld */
            border-radius: 4px;
        }
        #control-panel {
            text-align: center;
            padding: 20px;
            background-color: #ffffff; /* Fehér */
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        #pin-input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }
        #check-button {
            padding: 10px 20px;
            background-color: #D50000; /* Piros */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }
        #check-button:hover {
            background-color: #a30000; /* Sötétebb piros */
        }
        #results {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 15px;
        }
        /* Színkódok a kiértékeléshez */
        .correct-answer-reveal {
            background-color: #c8e6c9 !important; /* Zöld */
            border-color: #008751 !important; /* Zöld */
        }
        .student-incorrect {
            background-color: #f8d7da !important; /* Piros */
            border-color: #f5c6cb !important;
            color: #721c24 !important;
        }
        .admin-panel {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 5px;
            text-align: center;
        }
        .admin-panel h3 {
            margin-top: 0;
            color: #856404;
        }
    </style>
</head>
<body>

    <h1>Gyakorló Kvíz: Egyszerű áramkörök</h1>

    <div id="control-panel">
        <input type="password" id="pin-input" placeholder="PIN kód">
        <button id="check-button">Ellenőrzés</button>
        <div id="results"></div>
        <div id="admin-panel" class="admin-panel">
            <h3>Adminisztrációs Panel</h3>
            <p>A helyes válaszok és a magyarázatok feloldva.</p>
            <p>Helyes válaszok eloszlása (a/b/c): <span id="dist-a"></span> / <span id="dist-b"></span> / <span id="dist-c"></span></p>
        </div>
    </div>

    <div id="quiz-container">
        <!-- A kvízkérdések ide generálódnak -->
    </div>

    <script>
        const quizData = [
            // Kérdések 'a' helyes válasszal (8 db)
            {
                question: "Mi a kapcsoló feladata egy áramkörben?",
                answers: { a: "Megszakítja vagy zárja az áram útját.", b: "Termeli az elektromos áramot.", c: "Fogyasztja az elektromos energiát." },
                correctAnswer: 'a',
                explanation: "A kapcsoló segítségével tudjuk az áramkört nyitottá (áram nem folyik) vagy zárttá (áram folyik) tenni. Ezzel szabályozzuk az áram útját. ✅ Megoldás: Megszakítja vagy zárja az áram útját. Az áramot az áramforrás termeli, és a fogyasztó használja fel."
            },
            {
                question: "Melyik állítás igaz a zárt áramkörre?",
                answers: { a: "Az áram tud folyni benne.", b: "A kapcsoló nyitott állapotban van.", c: "Nincs benne fogyasztó." },
                correctAnswer: 'a',
                explanation: "Zárt áramkörről akkor beszélünk, ha az áramforrástól a fogyasztón keresztül megszakítás nélkül vezet út vissza az áramforráshoz. Csak zárt áramkörben tud folyni az elektromos áram. ✅ Megoldás: Az áram tud folyni benne."
            },
            {
                question: "Mi történik rövidzárlat esetén?",
                answers: { a: "A fogyasztón a szokásosnál sokkal nagyobb áram folyik keresztül, ami tönkreteheti.", b: "Az áramkörben leáll az áram folyása.", c: "Az izzó fényesebben világít, de nem károsodik." },
                correctAnswer: 'a',
                explanation: "Rövidzárlat akkor jön létre, ha az áram a fogyasztó kikerülésével, egy nagyon kis ellenállású úton záródik. Ekkor a megnövekedett áramerősség miatt a vezetékek felhevülnek és az áramforrás tönkremehet. ✅ Megoldás: A fogyasztón a szokásosnál sokkal nagyobb áram folyik keresztül, ami tönkreteheti."
            },
            {
                question: "Melyik rajzjel jelöli az izzót egy kapcsolási rajzon?",
                answers: { a: "Egy kör, benne egy 'X' jellel.", b: "Egy hosszú és egy rövid párhuzamos vonal.", c: "Egy cikk-cakk vonal." },
                correctAnswer: 'a',
                explanation: "Az izzót, mint egyszerű fogyasztót, egy körrel ábrázoljuk, amelybe egy 'X'-et rajzolunk. ✅ Megoldás: Egy kör, benne egy 'X' jellel. A hosszú és rövid vonal a telepet (áramforrást) jelöli."
            },
            {
                question: "Miért használnak a villanyszerelők gumikesztyűt?",
                answers: { a: "Mert a gumi jó elektromos szigetelő.", b: "Mert a gumi jó elektromos vezető.", c: "Mert a gumi jobban tapad." },
                correctAnswer: 'a',
                explanation: "A gumi kiváló elektromos szigetelőanyag, ami azt jelenti, hogy nem engedi át az elektromos áramot. A gumikesztyű megvédi a szerelőt az esetleges áramütéstől. ✅ Megoldás: Mert a gumi jó elektromos szigetelő."
            },
            {
                question: "Mi az elektromos áram?",
                answers: { a: "A töltéssel rendelkező részecskék egyirányú, rendezett mozgása.", b: "A vezeték melegedése.", c: "A mágneses mező változása." },
                correctAnswer: 'a',
                explanation: "Az elektromos áramot a töltéshordozók, fémekben az elektronok, rendezett, egyirányú áramlása hozza létre egy vezetőben. ✅ Megoldás: A töltéssel rendelkező részecskék egyirányú, rendezett mozgása."
            },
            {
                question: "Melyik NEM szükséges egy egyszerű áramkör működéséhez?",
                answers: { a: "Mágnes", b: "Áramforrás (pl. elem)", c: "Fogyasztó (pl. izzó)" },
                correctAnswer: 'a',
                explanation: "Egy egyszerű áramkör alapvető részei az áramforrás, a fogyasztó és a vezeték. A kapcsoló a működtetéshez kell. A mágnes nem része az alapvető elektromos áramkörnek. ✅ Megoldás: Mágnes."
            },
            {
                question: "Mi a biztosíték szerepe?",
                answers: { a: "Megvédi az áramkört a túláramtól.", b: "Erősíti az áramot.", c: "Tárolja az elektromos energiát." },
                correctAnswer: 'a',
                explanation: "A biztosíték egy biztonsági eszköz. Ha az áramkörben az áramerősség túl naggyá válik (pl. rövidzárlat miatt), a biztosítékban lévő vékony szál elolvad és megszakítja az áramkört, ezzel megelőzve a nagyobb károkat és a tűzveszélyt. ✅ Megoldás: Megvédi az áramkört a túláramtól."
            },
            // Kérdések 'b' helyes válasszal (9 db)
            {
                question: "Mi NEM elektromos vezető?",
                answers: { a: "Arany", b: "Műanyag", c: "Sós víz" },
                correctAnswer: 'b',
                explanation: "Az arany (egy fém) és a sós víz (ionokat tartalmaz) vezetik az elektromos áramot. A műanyag azonban szigetelő, a töltések nem tudnak benne szabadon mozogni. ✅ Megoldás: Műanyag."
            },
            {
                question: "Mi az áramforrás feladata egy áramkörben?",
                answers: { a: "Megszakítja az áram útját.", b: "Energiát biztosít a töltések mozgásához.", c: "Fényt bocsát ki." },
                correctAnswer: 'b',
                explanation: "Az áramforrás (pl. elem, akkumulátor) az, amely a benne lévő kémiai energia átalakításával elektromos mezőt hoz létre, és ezzel energiát biztosít ahhoz, hogy a töltések körbeáramoljanak az áramkörben. ✅ Megoldás: Energiát biztosít a töltések mozgásához."
            },
            {
                question: "Mi a fogyasztó feladata egy áramkörben?",
                answers: { a: "Zárja és nyitja az áramkört.", b: "Az elektromos energiát másfajta energiává (pl. fénnyé, hővé) alakítja.", c: "Mozgásban tartja a töltéseket." },
                correctAnswer: 'b',
                explanation: "A fogyasztó (pl. izzó, motor, hangszóró) az áramkör azon eleme, amely az elektromos energiát valamilyen számunkra hasznos formává alakítja, például fénnyé, hővé vagy mozgási energiává. ✅ Megoldás: Az elektromos energiát másfajta energiává (pl. fénnyé, hővé) alakítja."
            },
            {
                question: "Melyik állítás igaz a nyitott áramkörre?",
                answers: { a: "Az izzó világít.", b: "Nem folyik benne áram.", c: "A kapcsoló zárt állapotban van." },
                correctAnswer: 'b',
                explanation: "Nyitott áramkör esetén az áram útja valahol meg van szakítva, leggyakrabban egy nyitott kapcsolóval. Mivel az út nem folytonos, a töltések nem tudnak körbeáramlani, ezért nem folyik áram. ✅ Megoldás: Nem folyik benne áram."
            },
            {
                question: "Mi a vezeték szerepe az áramkörben?",
                answers: { a: "Fogyasztja az áramot.", b: "Utat biztosít az áramnak az áramkör elemei között.", c: "Szigeteli az áramkört." },
                correctAnswer: 'b',
                explanation: "A vezetékek jó vezető anyagból (általában rézből) készülnek, és az a feladatuk, hogy összekössék az áramkör elemeit (áramforrást, kapcsolót, fogyasztót), és utat biztosítsanak a töltések áramlásának. ✅ Megoldás: Utat biztosít az áramnak az áramkör elemei között."
            },
            {
                question: "Melyik a helyes energiaátalakulás egy zseblámpa izzójában?",
                answers: { a: "Hőenergia → Fényenergia", b: "Elektromos energia → Fény- és hőenergia", c: "Fényenergia → Elektromos energia" },
                correctAnswer: 'b',
                explanation: "Az izzó egy fogyasztó, amely az áramforrásból érkező elektromos energiát alakítja át. Ennek egy része fénnyé (ez a hasznos), másik része pedig hővé alakul. ✅ Megoldás: Elektromos energia → Fény- és hőenergia."
            },
            {
                question: "Miért veszélyes, ha egy hajszárító a fürdőkádba esik?",
                answers: { a: "Mert a víz elrozsdásítja.", b: "Mert a víz jó vezető, és áramütést okozhat.", c: "Mert a víz lehűti a hajszárítót." },
                correctAnswer: 'b',
                explanation: "A csapvíz, főleg ha szappanos, tartalmaz oldott sókat és ionokat, ezért vezeti az elektromos áramot. Ha egy bekapcsolt elektromos eszköz vízbe esik, a víz áramkört hozhat létre a benne tartózkodó ember testén keresztül, ami halálos áramütést okozhat. ✅ Megoldás: Mert a víz jó vezető, és áramütést okozhat."
            },
            {
                question: "Milyen irányúnak tekintjük megegyezés szerint az áram irányát?",
                answers: { a: "A negatívtól a pozitív pólus felé.", b: "A pozitívtól a negatív pólus felé.", c: "Mindkét irányba egyszerre." },
                correctAnswer: 'b',
                explanation: "Ez az úgynevezett technikai áramirány. Bár a fémekben a negatív elektronok áramlanak, a fizikusok régen, megegyezés alapján a pozitív töltések mozgásának irányát nevezték ki az áram irányának. Ez az áramforrás pozitív pólusától a negatív pólusa felé mutat az áramkör külső részén. ✅ Megoldás: A pozitívtól a negatív pólus felé."
            },
            {
                question: "Melyik rajzjel jelöli a telepet (áramforrást)?",
                answers: { a: "Egy kör egy 'A' betűvel.", b: "Egy hosszabb és egy rövidebb, egymással párhuzamos vonal.", c: "Egy megszakított vonal." },
                correctAnswer: 'b',
                explanation: "A galvánelemet vagy telepet egy hosszabb (pozitív pólus) és egy rövidebb (negatív pólus) párhuzamos vonallal jelöljük. ✅ Megoldás: Egy hosszabb és egy rövidebb, egymással párhuzamos vonal. A megszakított vonal a kapcsolót jelöli."
            },
            // Kérdések 'c' helyes válasszal (8 db)
            {
                question: "Melyik NEM szigetelő?",
                answers: { a: "Üveg", b: "Levegő", c: "Vas" },
                correctAnswer: 'c',
                explanation: "Az üveg és a levegő elektromos szigetelők. A vas egy fém, ami kiválóan vezeti az elektromos áramot, tehát elektromos vezető. ✅ Megoldás: Vas."
            },
            {
                question: "Mi az egyszerű áramkör három legfontosabb része?",
                answers: { a: "Kapcsoló, vezeték, motor", b: "Izzó, kapcsoló, biztosíték", c: "Áramforrás, fogyasztó, vezeték" },
                correctAnswer: 'c',
                explanation: "Ahhoz, hogy egy áramkör működőképes legyen, szükség van valamire, ami energiát ad (áramforrás), valamire, ami ezt az energiát felhasználja (fogyasztó), és valamire, ami összeköti őket (vezeték). ✅ Megoldás: Áramforrás, fogyasztó, vezeték."
            },
            {
                question: "Mi a feltétele az elektromos áram létrejöttének?",
                answers: { a: "Mágneses mező jelenléte.", b: "Nagyon magas hőmérséklet.", c: "Zárt áramkör és áramforrás." },
                correctAnswer: 'c',
                explanation: "Elektromos áram csak akkor jöhet létre, ha van egy áramforrás, ami energiát biztosít a töltéseknek, és van egy zárt, folytonos vezető út, amelyen a töltések körbe tudnak áramlani. ✅ Megoldás: Zárt áramkör és áramforrás."
            },
            {
                question: "Mi a különbség egy vezető és egy szigetelő között?",
                answers: { a: "A vezetők drágábbak.", b: "A vezetők mindig fémek, a szigetelők nem.", c: "A vezetőkben könnyen mozognak a töltések, a szigetelőkben nem." },
                correctAnswer: 'c',
                explanation: "A legalapvetőbb különbség az anyagok belső szerkezetében rejlik. A vezetőkben vannak szabadon mozgó töltéshordozók (pl. elektronok), míg a szigetelőkben a töltések erősen kötöttek, így nem tudnak áramot létrehozni. ✅ Megoldás: A vezetőkben könnyen mozognak a töltések, a szigetelőkben nem."
            },
            {
                question: "Mi történik, ha egy zárt áramkörben megszakad a vezeték?",
                answers: { a: "Az izzó fényesebben világít.", b: "Az elem felrobban.", c: "Az áramkör nyitottá válik, az áramlás megszűnik." },
                correctAnswer: 'c',
                explanation: "Ha a vezeték elszakad, az áram útja megszakad. Az áramkör nyitottá válik, a töltések nem tudnak tovább áramlani. Ennek következtében az izzó kialszik. ✅ Megoldás: Az áramkör nyitottá válik, az áramlás megszűnik."
            },
            {
                question: "Melyik rajzjel jelöli a kapcsolót?",
                answers: { a: "Egy kör egy 'V' betűvel.", b: "Egy téglalap.", c: "Egy vonal, ami egy ponton meg van szakítva." },
                correctAnswer: 'c',
                explanation: "A kapcsolót egy vonallal jelöljük, amelyben van egy megszakítás és egy mozgatható 'híd'. A nyitott kapcsolónál a híd fel van hajtva, a zártnál le van csukva, összekötve a vonal két végét. ✅ Megoldás: Egy vonal, ami egy ponton meg van szakítva."
            },
            {
                question: "Miért van a legtöbb elektromos kábel műanyaggal bevonva?",
                answers: { a: "Hogy szebb legyen.", b: "Hogy ne melegedjen annyira.", c: "Mert a műanyag szigetel, és véd az áramütéstől." },
                correctAnswer: 'c',
                explanation: "A kábel belsejében lévő fém a vezető, ami az áramot szállítja. A külső műanyag bevonat egy szigetelő réteg, ami megakadályozza, hogy véletlenül hozzáérjünk a vezetőhöz és áramütést szenvedjünk, valamint megakadályozza a rövidzárlatot. ✅ Megoldás: Mert a műanyag szigetel, és véd az áramütéstől."
            },
            {
                question: "Egy egyszerű áramkörben az elem...",
                answers: { a: "...a fogyasztó.", b: "...a vezeték.", c: "...az áramforrás." },
                correctAnswer: 'c',
                explanation: "Az elem (galvánelem) kémiai energiát alakít át elektromos energiává, ezzel biztosítva a feszültséget, ami mozgásba hozza a töltéseket az áramkörben. Tehát az elem az áramforrás. ✅ Megoldás: ...az áramforrás."
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const checkButton = document.getElementById('check-button');
        const pinInput = document.getElementById('pin-input');
        const resultsContainer = document.getElementById('results');
        const adminPanel = document.getElementById('admin-panel');

        let shuffledQuizData = [];
        let internalCorrectAnswers = { a: 0, b: 0, c: 0 };

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function loadQuiz() {
            quizData.forEach(q => {
                internalCorrectAnswers[q.correctAnswer]++;
            });

            shuffledQuizData = [...quizData];
            shuffleArray(shuffledQuizData);
            
            let quizHTML = '';
            shuffledQuizData.forEach((q, index) => {
                quizHTML += `<div class="question-block" id="q-${index}">`;
                quizHTML += `<div class="question-text">${index + 1}. ${q.question}</div>`;
                quizHTML += `<div class="options-container">`;

                const options = Object.entries(q.answers);
                shuffleArray(options);

                options.forEach(([key, value]) => {
                    quizHTML += `<label>
                                    <input type="radio" name="question${index}" value="${key}">
                                    ${value}
                                 </label>`;
                });

                quizHTML += `</div>`;
                quizHTML += `<div class="explanation" id="exp-${index}">${q.explanation}</div>`;
                quizHTML += `</div>`;
            });
            quizContainer.innerHTML = quizHTML;
        }

        function checkAnswers() {
            const pin = pinInput.value;
            const isMasterPin = pin === '121909';
            const isStudentPin = pin >= 100001 && pin <= 100020;
            let score = 0;
            let allAnswered = true;

            if (!isMasterPin) {
                 for (let i = 0; i < shuffledQuizData.length; i++) {
                    const selectedOption = document.querySelector(`input[name="question${i}"]:checked`);
                    if (!selectedOption) {
                        allAnswered = false;
                        break;
                    }
                }
            }
           
            if (!isMasterPin && !isStudentPin) {
                resultsContainer.textContent = "Érvénytelen PIN kód!";
                resultsContainer.style.color = '#D50000';
                return;
            }

            if (!allAnswered && !isMasterPin) {
                resultsContainer.textContent = "Kérlek, válaszold meg az összes kérdést az ellenőrzés előtt!";
                resultsContainer.style.color = 'orange';
                return;
            }
            resultsContainer.style.color = '#333'; // Reset color

            shuffledQuizData.forEach((q, index) => {
                const explanation = document.getElementById(`exp-${index}`);
                explanation.style.display = 'block';

                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);

                document.querySelectorAll(`input[name="question${index}"]`).forEach(option => {
                    const label = option.parentElement;
                    option.disabled = true;

                    // Reveal the correct answer for everyone
                    if (option.value === q.correctAnswer) {
                        label.classList.add('correct-answer-reveal');
                    }
                    
                    // Color student's specific choice if a student PIN is used
                    if(isStudentPin && selectedOption && selectedOption === option){
                        if(selectedOption.value !== q.correctAnswer){
                             label.classList.add('student-incorrect');
                        }
                    }
                });
                
                if (selectedOption && selectedOption.value === q.correctAnswer) {
                    score++;
                }
            });

            if(isMasterPin){
                resultsContainer.textContent = "Minden válasz és magyarázat felfedve.";
                adminPanel.style.display = 'block';
                document.getElementById('dist-a').textContent = internalCorrectAnswers.a;
                document.getElementById('dist-b').textContent = internalCorrectAnswers.b;
                document.getElementById('dist-c').textContent = internalCorrectAnswers.c;
            }

            if(isStudentPin){
                const percentage = Math.round((score / shuffledQuizData.length) * 100);
                resultsContainer.innerHTML = `Eredményed: ${score} / ${shuffledQuizData.length} (${percentage}%)`;
            }
        }
        
        pinInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                checkButton.click(); // Simulate a button click
            }
        });

        checkButton.addEventListener('click', checkAnswers);
        document.addEventListener('DOMContentLoaded', loadQuiz);
    </script>

</body>
</html>