<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kv√≠z: A f√ºggv√©ny fogalma</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #007BFF;
            --secondary-color: #f1f1f1;
            --background-color: #f8f9fa;
            --text-color: #333;
            --correct-color: #28a745;
            --correct-bg: #d4edda;
            --incorrect-color: #dc3545;
            --incorrect-bg: #f8d7da;
            --neutral-border: #dee2e6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            padding: 20px;
            background: linear-gradient(90deg, #CD2A3E 33.3%, #FFFFFF 33.3%, #FFFFFF 66.6%, #477050 66.6%);
            text-align: center;
        }

        header h1 {
            color: var(--text-color);
            margin: 0;
            font-size: 2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        main {
            padding: 30px;
        }

        #quiz-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .question-block {
            border: 1px solid var(--neutral-border);
            border-radius: 10px;
            padding: 20px;
            transition: box-shadow 0.3s;
        }

        .question-block:focus-within {
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.25);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .options label {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--neutral-border);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .options label:hover {
            background-color: #f8f9fa;
        }

        .options input[type="radio"] {
            margin-right: 15px;
            accent-color: var(--primary-color);
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
            display: none;
            font-size: 0.95em;
        }
        
        .explanation strong {
            display: block;
            margin-bottom: 5px;
        }
        
        .evaluation-block {
            margin-bottom: 20px;
        }

        .controls-container {
            padding: 20px;
            background-color: #fdfdfd;
            border: 1px dashed var(--neutral-border);
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .controls-container label {
            font-weight: 600;
        }

        .pin-code-input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--neutral-border);
            width: 120px;
            text-align: center;
            font-size: 1em;
        }

        .check-btn {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
        }

        .check-btn:hover {
            background-color: #0056b3;
        }
        
        .check-btn:active {
            transform: scale(0.98);
        }
        
        .check-btn:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }

        .result-container {
            margin-top: 15px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 700;
            min-height: 1.5em;
        }

        .admin-panel {
            margin-top: 10px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: #856404;
        }

        /* Visszajelz≈ë st√≠lusok */
        .correct-answer {
            background-color: var(--correct-bg) !important;
            border-color: var(--correct-color) !important;
        }

        .incorrect-answer {
            background-color: var(--incorrect-bg) !important;
            border-color: var(--incorrect-color) !important;
        }
        
        .master-correct::before {
            content: '‚úÖ Helyes: ';
            font-weight: bold;
        }

        .label-correct::before {
            content: '‚úÖ ';
        }
        
        .label-incorrect::before {
            content: '‚ùå ';
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            main {
                padding: 15px;
            }
            header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <header>
            <h1>Kv√≠z: A f√ºggv√©ny fogalma</h1>
        </header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN k√≥d:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellen≈ërz√©s</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;">
                    <p>Mester m√≥d akt√≠v. V√°laszok eloszl√°sa: 8 'a', 9 'b', 8 'c'.</p>
                </div>
            </div>

            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

            <form id="quiz-form" autocomplete="off">
                <div id="questions-container"></div>
            </form>
            
        </main>
    </div>

    <script>
        const quizData = [
            { question: "Mi a f√ºggv√©ny legfontosabb tulajdons√°ga?", options: { a: "Minden elemhez t√∂bb elemet rendel.", b: "Minden elemhez pontosan egy elemet rendel.", c: "A hozz√°rendel√©s mindig szorz√°s." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A f√ºggv√©ny egy√©rtelm≈± hozz√°rendel√©st jelent. üîπ 2. L√©p√©s: Ez azt jelenti, hogy egy bemeneti √©rt√©khez (az √©rtelmez√©si tartom√°nyb√≥l) mindig csak egyetlen kimeneti √©rt√©k tartozhat. ‚úÖ Megold√°s: Minden elemhez pontosan egy elemet rendel." },
            { question: "Mit nevez√ºnk a f√ºggv√©ny √©rtelmez√©si tartom√°ny√°nak?", options: { a: "A lehets√©ges kimeneti √©rt√©kek halmaz√°t.", b: "A lehets√©ges bemeneti √©rt√©kek halmaz√°t.", c: "A hozz√°rendel√©s szab√°ly√°t." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az √©rtelmez√©si tartom√°ny azokat az 'x' √©rt√©keket tartalmazza, amiket a f√ºggv√©nybe 'behelyettes√≠thet√ºnk'. üîπ 2. L√©p√©s: Ezek a bemeneti √©rt√©kek, amiket a f√ºggv√©ny √©rtelmezni tud. ‚úÖ Megold√°s: A lehets√©ges bemeneti √©rt√©kek halmaz√°t." },
            { question: "Mit nevez√ºnk a f√ºggv√©ny √©rt√©kk√©szlet√©nek?", options: { a: "A t√©nylegesen felvett kimeneti √©rt√©kek halmaz√°t.", b: "A lehets√©ges bemeneti √©rt√©kek halmaz√°t.", c: "A f√ºggv√©ny grafikonj√°t." }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Az √©rt√©kk√©szlet azokat az 'y' (vagy f(x)) √©rt√©keket tartalmazza, amiket a f√ºggv√©ny eredm√©ny√ºl ad. üîπ 2. L√©p√©s: Ezek a t√©nyleges kimeneti √©rt√©kek. ‚úÖ Megold√°s: A t√©nylegesen felvett kimeneti √©rt√©kek halmaz√°t." },
            { question: "Adott az f(x) = x + 5 f√ºggv√©ny. Mennyi az f(3) √©rt√©ke?", options: { a: "5", b: "3", c: "8" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Az f(3) azt jelenti, hogy az x hely√©re 3-at kell helyettes√≠teni a szab√°lyba. üîπ 2. L√©p√©s: f(3) = 3 + 5 = 8. ‚úÖ Megold√°s: Az f(3) √©rt√©ke 8." },
            { question: "Adott az f(x) = 2 * x f√ºggv√©ny. Melyik x √©rt√©kre lesz f(x) = 10?", options: { a: "5", b: "10", c: "20" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Az egyenlet, amit meg kell oldanunk: 10 = 2 * x. üîπ 2. L√©p√©s: Az egyenletet 2-vel osztva kapjuk, hogy x = 5. ‚úÖ Megold√°s: Az x=5 √©rt√©kre lesz a f√ºggv√©ny√©rt√©k 10." },
            { question: "Melyik NEM lehet f√ºggv√©ny?", options: { a: "x -> x n√©gyzete", b: "Emberek -> sz√ºlet√©si √©v√ºk", c: "Oszt√°ly -> a tanul√≥k nevei" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Azt a hozz√°rendel√©st keress√ºk, ahol egy bemenethez t√∂bb kimenet tartozhat. üîπ 2. L√©p√©s: Egy sz√°mnak csak egy n√©gyzete van. Egy embernek csak egy sz√ºlet√©si √©ve van. Viszont egy oszt√°lyhoz t√∂bb tanul√≥ is tartozik. ‚úÖ Megold√°s: Az 'Oszt√°ly -> a tanul√≥k nevei' hozz√°rendel√©s nem f√ºggv√©ny." },
            { question: "Mi a hozz√°rendel√©si szab√°ly a 'Minden sz√°mhoz a h√°romszoros√°t rendelj√ºk' f√ºggv√©nyben?", options: { a: "x -> 3x", b: "x -> x+3", c: "x -> x-3" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A 'h√°romszoros√°t' sz√≥ szorz√°st jelent. üîπ 2. L√©p√©s: Ha a bemeneti sz√°m x, akkor a h√°romszorosa 3*x, vagy r√∂viden 3x. ‚úÖ Megold√°s: A hozz√°rendel√©si szab√°ly x -> 3x." },
            { question: "Melyik bet≈±t haszn√°ljuk leggyakrabban a f√ºggv√©nyek elnevez√©s√©re?", options: { a: "x", b: "f, g, h", c: "y" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az 'x' √°ltal√°ban a v√°ltoz√≥t (bemeneti √©rt√©ket), az 'y' pedig a f√ºggv√©ny√©rt√©ket (kimeneti √©rt√©ket) jel√∂li. üîπ 2. L√©p√©s: Mag√°t a f√ºggv√©nyt, a 'g√©pet' vagy a 'szab√°lyt' pedig kisbet≈±kkel, leggyakrabban f, g, vagy h bet≈±kkel jel√∂lj√ºk. ‚úÖ Megold√°s: f, g, h." },
            { question: "Adott az f(x) = 10 - x f√ºggv√©ny. Mennyi az f(10) √©rt√©ke?", options: { a: "10", b: "0", c: "20" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Helyettes√≠ts√ºk be az x hely√©re a 10-et. üîπ 2. L√©p√©s: f(10) = 10 - 10 = 0. ‚úÖ Megold√°s: Az f(10) √©rt√©ke 0." },
            { question: "Mi az 'x' szerepe az f(x) jel√∂l√©sben?", options: { a: "a f√ºggv√©ny neve", b: "a f√ºggv√©ny v√°ltoz√≥ja (bemeneti √©rt√©k)", c: "a f√ºggv√©ny √©rt√©ke (kimeneti √©rt√©k)" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az f(x) jel√∂l√©s azt mutatja, hogy az 'f' f√ºggv√©ny az 'x' v√°ltoz√≥t√≥l f√ºgg. üîπ 2. L√©p√©s: Az 'x' a f√ºggetlen v√°ltoz√≥, az az √©rt√©k, amit behelyettes√≠t√ºnk a f√ºggv√©nybe. ‚úÖ Megold√°s: Az 'x' a f√ºggv√©ny v√°ltoz√≥ja." },
            { question: "Mi az f(x) szerepe az f(x) jel√∂l√©sben?", options: { a: "a f√ºggv√©ny √©rt√©ke (kimeneti √©rt√©k)", b: "a f√ºggv√©ny v√°ltoz√≥ja (bemeneti √©rt√©k)", c: "a hozz√°rendel√©s szab√°lya" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Az f(x) jel√∂l√©s eg√©sze azt az √©rt√©ket jelenti, amit a f√ºggv√©ny a bemeneti 'x' √©rt√©khez rendel. üîπ 2. L√©p√©s: Gyakran haszn√°ljuk helyette az 'y' jel√∂l√©st is a koordin√°ta-rendszerben. ‚úÖ Megold√°s: Az f(x) a f√ºggv√©ny √©rt√©ke." },
            { question: "A 'sz√°m -> a sz√°m k√©tszerese' f√ºggv√©nyben mi a 4 helyen felvett √©rt√©k?", options: { a: "2", b: "8", c: "4" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A hozz√°rendel√©si szab√°ly a 'k√©tszeres√©re venni'. üîπ 2. L√©p√©s: A 4 k√©tszerese 4 * 2 = 8. ‚úÖ Megold√°s: A 4 helyen felvett √©rt√©k 8." },
            { question: "Melyik √°br√°zol√°si m√≥d NEM egy√©rtelm≈±en f√ºggv√©ny?", options: { a: "egy k√©plet, pl. f(x) = x+1", b: "egy t√°bl√°zat, ahol egy x-hez t√∂bb y tartozik", c: "egy ny√≠ldiagram, ahol minden bal oldali elemb≈ël egy ny√≠l indul ki" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A f√ºggv√©ny defin√≠ci√≥ja szerint egy bemenethez (x) csak egy kimenet (y) tartozhat. üîπ 2. L√©p√©s: Ha egy t√°bl√°zatban egy x √©rt√©k mellett t√∂bb y √©rt√©k is szerepel, az a hozz√°rendel√©s nem lehet f√ºggv√©ny. ‚úÖ Megold√°s: Az a t√°bl√°zat, ahol egy x-hez t√∂bb y tartozik." },
            { question: "Egy automata bedobott p√©nzhez egy √ºd√≠t≈ët ad. Ez a hozz√°rendel√©s...", options: { a: "nem f√ºggv√©ny, mert t√∂bb p√©nzt is bedobhatunk.", b: "f√ºggv√©ny, mert egyf√©le p√©nzhez egyf√©le √ºd√≠t≈ët ad.", c: "nem f√ºggv√©ny, mert az √ºd√≠t≈ënek van sz√≠ne." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A bemenet (√©rtelmez√©si tartom√°ny) a bedobott √©rme/bankjegy. A kimenet (√©rt√©kk√©szlet) az √ºd√≠t≈ë. üîπ 2. L√©p√©s: A l√©nyeg, hogy egy adott gombnyom√°shoz (bemenet) pontosan egy √ºd√≠t≈ë (kimenet) tartozik. ‚úÖ Megold√°s: Ez a hozz√°rendel√©s f√ºggv√©ny." },
            { question: "Adott az f(x) = 6 / x f√ºggv√©ny. Mi az f(2) √©rt√©ke?", options: { a: "12", b: "6", c: "3" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Helyettes√≠ts√ºk be az x hely√©re a 2-t. üîπ 2. L√©p√©s: f(2) = 6 / 2 = 3. ‚úÖ Megold√°s: Az f(2) √©rt√©ke 3." },
            { question: "Mi a f√ºggv√©ny 'k√©pe'?", options: { a: "A f√ºggv√©ny grafikonja.", b: "A hozz√°rendel√©si szab√°ly.", c: "Az √©rtelmez√©si tartom√°ny." }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A f√ºggv√©nyt vizu√°lisan is meg lehet jelen√≠teni. üîπ 2. L√©p√©s: A koordin√°ta-rendszerben az √∂sszetartoz√≥ (x, f(x)) pontok halmaz√°t nevezz√ºk a f√ºggv√©ny grafikonj√°nak, vagy m√°s n√©ven a f√ºggv√©ny k√©p√©nek. ‚úÖ Megold√°s: A f√ºggv√©ny grafikonja." },
            { question: "Adott a g(x) = x¬≤ f√ºggv√©ny. Mennyi a g(5) √©rt√©ke?", options: { a: "10", b: "25", c: "5" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A hozz√°rendel√©si szab√°ly a n√©gyzetre emel√©s. üîπ 2. L√©p√©s: Helyettes√≠ts√ºk be az x hely√©re az 5-√∂t: g(5) = 5¬≤ = 5 * 5 = 25. ‚úÖ Megold√°s: A g(5) √©rt√©ke 25." },
            { question: "Ha az √©rtelmez√©si tartom√°ny {1, 2, 3} √©s f(x)=x-1, mi az √©rt√©kk√©szlet?", options: { a: "{1, 2, 3}", b: "{0, 1, 2}", c: "{2, 3, 4}" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Sz√°moljuk ki a f√ºggv√©ny√©rt√©keket az √©rtelmez√©si tartom√°ny minden elem√©re. üîπ 2. L√©p√©s: f(1)=1-1=0. f(2)=2-1=1. f(3)=3-1=2. üîπ 3. L√©p√©s: Az eredm√©ny√ºl kapott √©rt√©kek halmaza az √©rt√©kk√©szlet. ‚úÖ Megold√°s: Az √©rt√©kk√©szlet {0, 1, 2}." },
            { question: "Egy koordin√°ta-rendszerben melyik tengelyen √°br√°zoljuk √°ltal√°ban a bemeneti √©rt√©keket (x)?", options: { a: "a f√ºgg≈ëleges (y) tengelyen", b: "a v√≠zszintes (x) tengelyen", c: "mindkett≈ën" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A Descartes-koordin√°ta-rendszerben a tengelyeknek megvan a szok√°sos szerep√ºk. üîπ 2. L√©p√©s: A v√≠zszintes tengely a f√ºggetlen v√°ltoz√≥ (√°ltal√°ban x) helye, a f√ºgg≈ëleges pedig a f√ºgg≈ë v√°ltoz√≥√© (y vagy f(x)). ‚úÖ Megold√°s: A v√≠zszintes (x) tengelyen." },
            { question: "Adott a h(x) = 5. Mennyi a h(100) √©rt√©ke?", options: { a: "100", b: "5", c: "500" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Ez egy konstans f√ºggv√©ny. A neve azt jelenti, hogy az √©rt√©ke √°lland√≥. üîπ 2. L√©p√©s: Nem sz√°m√≠t, mit helyettes√≠t√ºnk be x hely√©re, az eredm√©ny mindig 5 lesz. ‚úÖ Megold√°s: A h(100) √©rt√©ke 5." },
            { question: "Melyik le√≠r√°s NEM f√ºggv√©ny?", options: { a: "Tanul√≥ -> a magass√°ga cm-ben", b: "Orsz√°g -> a szomsz√©dos orsz√°gai", c: "Aut√≥ -> a gy√°rt√°si √©ve" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Azt keress√ºk, ahol egy bemenethez t√∂bb kimenet tartozhat. üîπ 2. L√©p√©s: Egy tanul√≥nak egy magass√°ga van, egy aut√≥nak egy gy√°rt√°si √©ve. De egy orsz√°gnak (pl. Magyarorsz√°gnak) t√∂bb szomsz√©dja is lehet. ‚úÖ Megold√°s: Az 'Orsz√°g -> a szomsz√©dos orsz√°gai' hozz√°rendel√©s nem f√ºggv√©ny." },
            { question: "A 'sz√°m -> a sz√°m fele' f√ºggv√©nyben mihez tartozik a 10?", options: { a: "5", b: "20", c: "10" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A k√©rd√©s ford√≠tott: a 10 a kimenet (f√ºggv√©ny√©rt√©k). A bemenetet (x) keress√ºk. üîπ 2. L√©p√©s: Az egyenlet: x / 2 = 10. Az egyenletet 2-vel szorozva: x = 20. ‚úÖ Megold√°s: A 20-hoz tartozik a 10." },
            { question: "Mi az f(x) = x+x f√ºggv√©ny egyszer≈±bb alakja?", options: { a: "f(x) = x¬≤", b: "f(x) = x", c: "f(x) = 2x" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Az algebrai kifejez√©st √∂ssze kell vonni. üîπ 2. L√©p√©s: x + x = 2 * x. ‚úÖ Megold√°s: Az egyszer≈±bb alak f(x) = 2x." },
            { question: "Milyen elemekb≈ël √°ll a f√ºggv√©ny?", options: { a: "√©rtelmez√©si tartom√°ny, √©rt√©kk√©szlet, hozz√°rendel√©si szab√°ly", b: "sz√°ml√°l√≥, nevez≈ë, t√∂rtvonal", c: "alap, magass√°g, oldal" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Egy f√ºggv√©nyt h√°rom dolog hat√°roz meg. üîπ 2. L√©p√©s: Kell egy halmaz, ahonnan az √©rt√©keket vessz√ºk (√©rtelmez√©si tartom√°ny), egy halmaz, ahova az √©rt√©kek √©rkeznek (√©rt√©kk√©szlet), √©s egy szab√°ly, ami a hozz√°rendel√©st le√≠rja. ‚úÖ Megold√°s: √ârtelmez√©si tartom√°ny, √©rt√©kk√©szlet, hozz√°rendel√©si szab√°ly." },
            { question: "Adott az f(x) = 3x - 1 f√ºggv√©ny. Mennyi az f(1) √©rt√©ke?", options: { a: "3", b: "1", c: "2" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Helyettes√≠ts√ºk be az x hely√©re az 1-et. üîπ 2. L√©p√©s: f(1) = 3 * 1 - 1 = 3 - 1 = 2. ‚úÖ Megold√°s: Az f(1) √©rt√©ke 2." }
        ];

        const questionsContainer = document.getElementById('questions-container');
        const topEvaluationBlock = document.getElementById('top-evaluation');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function shuffleOptions(options) {
            const optionsArray = Object.entries(options).map(([key, text]) => ({ key, text }));
            return shuffle([...optionsArray]);
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                const randomizedOptions = shuffleOptions(item.options);
                const optionLetters = ['a', 'b', 'c'];
                
                let optionsHTML = '';
                randomizedOptions.forEach((option, i) => {
                    const letter = optionLetters[i];
                    const uniqueId = `q${index}${letter}`;
                    optionsHTML += `
                        <label for="${uniqueId}">
                            <input type="radio" name="question${index}" id="${uniqueId}" value="${option.key}">
                            ${letter}) ${option.text}
                        </label>
                    `;
                });

                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">${optionsHTML}</div>
                        <div class="explanation" id="explanation-${index}">${item.explanation}</div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = topEvaluationBlock.querySelector('.pin-code-input').value;
            const checkBtn = topEvaluationBlock.querySelector('.check-btn');
            const resultContainer = topEvaluationBlock.querySelector('.result-container');
            const adminPanel = topEvaluationBlock.querySelector('.admin-panel');

            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('√ârv√©nytelen PIN k√≥d! K√©rj√ºk, adjon meg egy √©rv√©nyes tanul√≥i (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`K√©rj√ºk, v√°laszolj az √∂sszes k√©rd√©sre! Jelenleg ${answeredQuestions}/${shuffledData.length} k√©rd√©sre v√°laszolt√°l.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtn.disabled = true;
            topEvaluationBlock.querySelector('.pin-code-input').disabled = true;

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);
                explanationDiv.style.display = 'block';

                if (isMaster) {
                    document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                        if (radio.value === item.correctAnswer) {
                            radio.parentElement.classList.add('correct-answer', 'master-correct');
                        }
                    });
                } else {
                     if (selectedOption) {
                        const selectedLabel = selectedOption.parentElement;
                        if (selectedOption.value === item.correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct-answer', 'label-correct');
                        } else {
                            selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                             document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                                if (radio.value === item.correctAnswer) {
                                    radio.parentElement.classList.add('correct-answer');
                                }
                            });
                        }
                    } else { 
                         document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                            if (radio.value === item.correctAnswer) {
                                radio.parentElement.classList.add('correct-answer');
                            }
                        });
                    }
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            if (!isMaster) {
                resultContainer.innerHTML = `Eredm√©nyed: ${score} / ${shuffledData.length} (${percentage}%)`;
            } else {
                 resultContainer.innerHTML = `Mester m√≥d: Helyes v√°laszok √©s magyar√°zatok felfedve.`;
            }


            if (isMaster) {
                adminPanel.style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            
            const mainCheckBtn = topEvaluationBlock.querySelector('.check-btn');
            const mainPinInput = topEvaluationBlock.querySelector('.pin-code-input');

            mainCheckBtn.addEventListener('click', checkAnswers);
            mainPinInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
        });

    </script>
</body>
</html>