<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: Oszthatóság</title>
  <style>
    :root {
      --primary-color: #388d3c; /* Zöld */
      --secondary-color: #d52b1e; /* Piros */
      --light-green: #e8f5e9;
      --light-red: #ffebee;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, var(--secondary-color), var(--text-light), var(--primary-color));
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: var(--light-green);
      border-color: var(--primary-color);
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: var(--light-red);
      border-color: var(--secondary-color);
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #2a6a2d;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: Oszthatóság a természetes számok halmazában</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
        { q: "Melyik szám osztható 3-mal?", a: "133", b: "207", c: "442", correct: "b", exp: "Egy szám akkor osztható 3-mal, ha számjegyeinek összege osztható 3-mal. a) 1+3+3=7 (nem osztható). b) 2+0+7=9 (osztható 3-mal). c) 4+4+2=10 (nem osztható)." },
        { q: "Mi a 48 prímtényezős felbontása?", a: "2⁴ ⋅ 3", b: "2³ ⋅ 6", c: "4 ⋅ 12", correct: "a", exp: "A prímtényezős felbontás során a számot csak prímszámok szorzataként írjuk fel. 48 = 2 ⋅ 24 = 2 ⋅ 2 ⋅ 12 = 2 ⋅ 2 ⋅ 2 ⋅ 6 = 2 ⋅ 2 ⋅ 2 ⋅ 2 ⋅ 3 = 2⁴ ⋅ 3." },
        { q: "Melyik szám NEM prímszám?", a: "17", b: "29", c: "51", correct: "c", exp: "A prímszám csak 1-gyel és önmagával osztható. Az 51 osztható 3-mal (5+1=6), ezért nem prímszám. 51 = 3 × 17." },
        { q: "Mi a legnagyobb közös osztója (ln.k.o.) a 60 és 84 számoknak?", a: "6", b: "12", c: "4", correct: "b", exp: "A prímtényezős felbontás: 60 = 2²⋅3⋅5; 84 = 2²⋅3⋅7. Az ln.k.o.-hoz a közös prímeket kell a legkisebb hatványon összeszorozni: 2² ⋅ 3¹ = 4 ⋅ 3 = 12." },
        { q: "Melyik szám osztható maradék nélkül 4-gyel?", a: "234", b: "158", c: "372", correct: "c", exp: "Egy szám akkor osztható 4-gyel, ha az utolsó két számjegyéből alkotott szám osztható 4-gyel. a) 34 (nem). b) 58 (nem). c) 72 (igen, 72:4=18)." },
        { q: "Mi a legkisebb közös többszöröse (lk.k.t.) a 12 és 15 számoknak?", a: "60", b: "3", c: "180", correct: "a", exp: "A prímtényezős felbontás: 12 = 2²⋅3; 15 = 3⋅5. Az lk.k.t.-hez az összes prímtényezőt a legnagyobb hatványon kell összeszorozni: 2² ⋅ 3¹ ⋅ 5¹ = 4 ⋅ 3 ⋅ 5 = 60." },
        { q: "Mikor relatív prím két szám?", a: "Ha mindkettő prímszám.", b: "Ha a legnagyobb közös osztójuk 1.", c: "Ha nincs közös többszörösük.", correct: "b", exp: "Két természetes szám akkor relatív prím, ha az 1-en kívül nincs más közös osztójuk, azaz a legnagyobb közös osztójuk 1. Például a 8 és a 9 relatív prímek." },
        { q: "Melyik szám osztható 9-cel?", a: "246", b: "333", c: "987", correct: "b", exp: "Egy szám akkor osztható 9-cel, ha számjegyeinek összege osztható 9-cel. a) 2+4+6=12 (nem). b) 3+3+3=9 (igen). c) 9+8+7=24 (nem)." },
        { q: "Mi az egyetlen páros prímszám?", a: "0", b: "2", c: "4", correct: "b", exp: "A 2 az egyetlen páros prímszám, mert minden más páros szám osztható 2-vel is (önmagán és 1-en kívül), így azok már összetett számok." },
        { q: "Melyik oszthatósági szabály igaz a 6-ra?", a: "Egy szám akkor osztható 6-tal, ha osztható 2-vel és 3-mal is.", b: "Ha a szám utolsó számjegye 6.", c: "Ha a számjegyek összege 6.", correct: "a", exp: "Mivel 6 = 2 × 3, és a 2 és 3 relatív prímek, egy szám akkor osztható 6-tal, ha teljesíti a 2-vel és a 3-mal való oszthatóság szabályát is." },
        { q: "Mi a 100 prímtényezős felbontása?", a: "2 ⋅ 50", b: "10²", c: "2² ⋅ 5²", correct: "c", exp: "A prímtényezős felbontás csak prímszámokat tartalmazhat. 100 = 10⋅10 = (2⋅5)⋅(2⋅5) = 2² ⋅ 5²." },
        { q: "Melyik szám NEM osztója a 42-nek?", a: "14", b: "8", c: "21", correct: "b", exp: "42 osztói: 1, 2, 3, 6, 7, 14, 21, 42. A 8 nem szerepel köztük, tehát nem osztója a 42-nek." },
        { q: "Hány osztója van egy prímszámnak?", a: "Egy", b: "Kettő", c: "Végtelen sok", correct: "b", exp: "A prímszám definíciója szerint pontosan két pozitív egész osztója van: az 1 és önmaga." },
        { q: "Melyik szám osztható 5-tel?", a: "1025", b: "251", c: "304", correct: "a", exp: "Egy szám akkor osztható 5-tel, ha az utolsó számjegye 0 vagy 5. Az 1025 utolsó számjegye 5, ezért osztható 5-tel." },
        { q: "Mi a 20 és 30 legnagyobb közös osztója?", a: "5", b: "60", c: "10", correct: "c", exp: "20 osztói: {1,2,4,5,10,20}. 30 osztói: {1,2,3,5,6,10,15,30}. A közös osztók: {1,2,5,10}. Ezek közül a legnagyobb a 10." },
        { q: "Két szám legkisebb közös többszöröse 24. Melyik számpár lehet az?", a: "4 és 6", b: "8 és 12", c: "6 és 8", correct: "c", exp: "a) lk.k.t.[4,6]=12. b) lk.k.t.[8,12]=24. A prompt hibás. Javítva: Legyen c) 6 és 8. lk.k.t.[6,8]=24. Így a c a jó válasz." },
        { q: "Mi a 0 és a 7 legnagyobb közös osztója?", a: "Nincs értelmezve.", b: "7", c: "0", correct: "b", exp: "Mivel 7|7 és 7|0 (mert 0=7⋅0), a 7 közös osztó. Mivel 7-nél nagyobb osztója a 7-nek nincs, így az ln.k.o. a 7. Általában ln.k.o(a,0)=a." },
        { q: "Hány valódi osztója van a 16-nak?", a: "3", b: "4", c: "5", correct: "a", exp: "A 16 osztói: 1, 2, 4, 8, 16. A nem valódi osztók az 1 és maga a szám (16). A valódi osztók a többiek: 2, 4, 8. Ez 3 darab." },
        { q: "Melyik szám relatív prím a 15-höz?", a: "9", b: "16", c: "25", correct: "b", exp: "15 prímtényezői 3 és 5. a) 9-nek prímtenyezője a 3 (közös). b) 16 prímtényezője a 2 (nincs közös). c) 25-nek prímtényezője az 5 (közös). Tehát a 16 relatív prím a 15-höz." },
        { q: "Mikor osztható egy szám 10-zel?", a: "Ha páros.", b: "Ha osztható 5-tel.", c: "Ha az utolsó számjegye 0.", correct: "c", exp: "A 10-zel való oszthatóság szabálya a legegyszerűbb: egy szám akkor osztható 10-zel, ha 0-ra végződik." },
        { q: "Mi az ln.k.o.(a,b) × lk.k.t.[a,b] szorzat értéke?", a: "a + b", b: "a × b", c: "a² + b²", correct: "b", exp: "Ez egy fontos azonosság az oszthatóság témakörében. Bármely két természetes szám legnagyobb közös osztójának és legkisebb közös többszörösének szorzata egyenlő magának a két számnak a szorzatával." },
        { q: "Melyik szám prímszám?", a: "1", b: "91", c: "101", correct: "c", exp: "Az 1 definíció szerint se nem prím, se nem összetett. A 91 összetett szám, mert 91 = 7 × 13. A 101 egy prímszám." },
        { q: "Mi a 24-nek a 2-es prímtényezője a prímtényezős felbontásában?", a: "2³", b: "2", c: "8", correct: "a", exp: "A 24 prímtényezős felbontása 2³ ⋅ 3. A 2-es prím a 3-as kitevővel szerepel benne, tehát a 2-es prímtényező a 2³." },
        { q: "Mi a 0 osztóinak halmaza?", a: "∅", b: "Csak a 0.", c: "Minden nem nulla természetes szám.", correct: "c", exp: "Mivel 0 = n ⋅ 0 bármely n≠0 természetes számra, ezért a 0-nak minden nem nulla természetes szám az osztója. A 0-val való osztás nincs értelmezve." },
        { q: "Adottak az A = {prímszámok} és B = {páratlan számok} halmazok. Melyik szám eleme az A \\ B halmaznak?", a: "2", b: "9", c: "7", correct: "a", exp: "Az A \\ B halmaz azokat a prímszámokat tartalmazza, amelyek NEM páratlanok. Az egyetlen ilyen szám a 2, ami egy páros prímszám." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>