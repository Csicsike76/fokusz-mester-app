<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kv√≠z: A f√ºggv√©ny grafikonja</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #007BFF;
            --secondary-color: #f1f1f1;
            --background-color: #f8f9fa;
            --text-color: #333;
            --correct-color: #28a745;
            --correct-bg: #d4edda;
            --incorrect-color: #dc3545;
            --incorrect-bg: #f8d7da;
            --neutral-border: #dee2e6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            padding: 20px;
            background: linear-gradient(90deg, #CD2A3E 33.3%, #FFFFFF 33.3%, #FFFFFF 66.6%, #477050 66.6%);
            text-align: center;
        }

        header h1 {
            color: var(--text-color);
            margin: 0;
            font-size: 2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        main {
            padding: 30px;
        }

        #quiz-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .question-block {
            border: 1px solid var(--neutral-border);
            border-radius: 10px;
            padding: 20px;
            transition: box-shadow 0.3s;
        }

        .question-block:focus-within {
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.25);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .options label {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--neutral-border);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .options label:hover {
            background-color: #f8f9fa;
        }

        .options input[type="radio"] {
            margin-right: 15px;
            accent-color: var(--primary-color);
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
            display: none;
            font-size: 0.95em;
        }
        
        .explanation strong {
            display: block;
            margin-bottom: 5px;
        }
        
        .evaluation-block {
            margin-bottom: 20px;
        }

        .controls-container {
            padding: 20px;
            background-color: #fdfdfd;
            border: 1px dashed var(--neutral-border);
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .controls-container label {
            font-weight: 600;
        }

        .pin-code-input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--neutral-border);
            width: 120px;
            text-align: center;
            font-size: 1em;
        }

        .check-btn {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
        }

        .check-btn:hover {
            background-color: #0056b3;
        }
        
        .check-btn:active {
            transform: scale(0.98);
        }
        
        .check-btn:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }

        .result-container {
            margin-top: 15px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 700;
            min-height: 1.5em;
        }

        .admin-panel {
            margin-top: 10px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: #856404;
        }

        /* Visszajelz≈ë st√≠lusok */
        .correct-answer {
            background-color: var(--correct-bg) !important;
            border-color: var(--correct-color) !important;
        }

        .incorrect-answer {
            background-color: var(--incorrect-bg) !important;
            border-color: var(--incorrect-color) !important;
        }
        
        .master-correct::before {
            content: '‚úÖ Helyes: ';
            font-weight: bold;
        }

        .label-correct::before {
            content: '‚úÖ ';
        }
        
        .label-incorrect::before {
            content: '‚ùå ';
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            main {
                padding: 15px;
            }
            header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <header>
            <h1>Kv√≠z: A f√ºggv√©ny grafikonja</h1>
        </header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN k√≥d:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellen≈ërz√©s</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;">
                    <p>Mester m√≥d akt√≠v. V√°laszok eloszl√°sa: 8 'a', 9 'b', 8 'c'.</p>
                </div>
            </div>

            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

            <form id="quiz-form" autocomplete="off">
                <div id="questions-container"></div>
            </form>
            
        </main>
    </div>

    <script>
        const quizData = [
            { question: "Melyik tengely a v√≠zszintes a koordin√°ta-rendszerben?", options: { a: "az y tengely", b: "az orig√≥", c: "az x tengely" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A Descartes-f√©le koordin√°ta-rendszer k√©t, egym√°sra mer≈ëleges sz√°megyenesb≈ël √°ll. üîπ 2. L√©p√©s: A v√≠zszintes tengelyt x-tengelynek (abszcissza), a f√ºgg≈ëlegeset y-tengelynek (ordin√°ta) nevezz√ºk. ‚úÖ Megold√°s: A v√≠zszintes az x tengely." },
            { question: "Mi a neve a koordin√°ta-rendszer (0;0) pontj√°nak?", options: { a: "orig√≥", b: "z√©rushely", c: "maximum" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A k√©t tengely metsz√©spontja egy k√ºl√∂nleges, kit√ºntetett pont. üîπ 2. L√©p√©s: Ezt a pontot, ahol x √©s y is nulla, orig√≥nak nevezz√ºk. ‚úÖ Megold√°s: A neve orig√≥." },
            { question: "Hol helyezkedik el a P(-2; 3) pont?", options: { a: "2 jobbra, 3 fel", b: "2 balra, 3 fel", c: "2 balra, 3 le" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az els≈ë koordin√°ta (x) a v√≠zszintes mozg√°st jel√∂li. A -2 azt jelenti, hogy az orig√≥b√≥l 2 egys√©get balra l√©p√ºnk. üîπ 2. L√©p√©s: A m√°sodik koordin√°ta (y) a f√ºgg≈ëleges mozg√°st jel√∂li. A +3 azt jelenti, hogy onnan 3 egys√©get felfel√© l√©p√ºnk. ‚úÖ Megold√°s: 2 balra, 3 fel." },
            { question: "Mi a f√ºggv√©ny z√©rushelye?", options: { a: "Ahol a f√ºggv√©ny a legkisebb √©rt√©k√©t veszi fel.", b: "Ahol a f√ºggv√©ny grafikonja metszi a f√ºgg≈ëleges (y) tengelyt.", c: "Ahol a f√ºggv√©ny grafikonja metszi a v√≠zszintes (x) tengelyt." }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A z√©rushely az a pont, ahol a f√ºggv√©ny √©rt√©ke nulla (f(x)=0). üîπ 2. L√©p√©s: Az y koordin√°ta az x-tengely ment√©n mindenhol nulla, ez√©rt a z√©rushely az x-tengellyel val√≥ metsz√©spont. ‚úÖ Megold√°s: Ahol a grafikon metszi a v√≠zszintes (x) tengelyt." },
            { question: "Melyik pont van rajta az f(x) = x + 4 f√ºggv√©ny grafikonj√°n?", options: { a: "(1; 5)", b: "(4; 1)", c: "(1; 4)" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Be kell helyettes√≠teni az x koordin√°t√°t a f√ºggv√©nybe, √©s megn√©zni, hogy a kapott √©rt√©k megegyezik-e az y koordin√°t√°val. üîπ 2. L√©p√©s: Ha x=1, akkor f(1) = 1 + 4 = 5. Az y koordin√°ta 5. Teh√°t az (1; 5) pont rajta van a grafikonon. ‚úÖ Megold√°s: Az (1; 5) pont." },
            { question: "Mit jelent az, hogy egy f√ºggv√©ny monoton n√∂vekv≈ë?", options: { a: "A grafikonja egyenes.", b: "A grafikonja balr√≥l jobbra 'lefel√©' halad.", c: "A grafikonja balr√≥l jobbra 'felfel√©' halad." }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A monotonit√°s a f√ºggv√©ny 'ir√°ny√°t' √≠rja le. üîπ 2. L√©p√©s: Ha az x √©rt√©kek n√∂vel√©s√©vel az y √©rt√©kek (a f√ºggv√©ny√©rt√©kek) is n≈ënek, akkor a f√ºggv√©ny monoton n√∂vekv≈ë. Ez a grafikonon egy 'emelked≈ë' vonalk√©nt jelenik meg. ‚úÖ Megold√°s: A grafikonja balr√≥l jobbra 'felfel√©' halad." },
            { question: "Mit jelent az, hogy egy f√ºggv√©ny monoton cs√∂kken≈ë?", options: { a: "A grafikonja balr√≥l jobbra 'lefel√©' halad.", b: "A grafikonja v√≠zszintes.", c: "A grafikonja g√∂rbe." }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A monotonit√°s a f√ºggv√©ny 'ir√°ny√°t' √≠rja le. üîπ 2. L√©p√©s: Ha az x √©rt√©kek n√∂vel√©s√©vel az y √©rt√©kek cs√∂kkennek, akkor a f√ºggv√©ny monoton cs√∂kken≈ë. Ez a grafikonon egy 'lejt≈ë' vonalk√©nt jelenik meg. ‚úÖ Megold√°s: A grafikonja balr√≥l jobbra 'lefel√©' halad." },
            { question: "Milyen alak√∫ az f(x) = 2x - 1 f√ºggv√©ny grafikonja?", options: { a: "parabola", b: "egyenes", c: "k√∂r" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Ez egy els≈ëfok√∫ f√ºggv√©ny, mert az x az els≈ë hatv√°nyon szerepel. üîπ 2. L√©p√©s: Minden els≈ëfok√∫ f√ºggv√©ny (line√°ris f√ºggv√©ny) grafikonja egyenes. ‚úÖ Megold√°s: Egyenes." },
            { question: "Hol metszi az f(x) = x + 3 f√ºggv√©ny az y tengelyt?", options: { a: "az x = -3 helyen", b: "az y = 3 helyen", c: "az orig√≥ban" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az y tengelymetszet az a pont, ahol x=0. üîπ 2. L√©p√©s: Helyettes√≠ts√ºk be az x=0 √©rt√©ket a f√ºggv√©nybe: f(0) = 0 + 3 = 3. Teh√°t a metsz√©spont a (0; 3) pont, ami az y=3 helyen van. ‚úÖ Megold√°s: Az y=3 helyen metszi." },
            { question: "Mi az f(x) = x - 5 f√ºggv√©ny z√©rushelye?", options: { a: "-5", b: "5", c: "0" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A z√©rushelyet √∫gy kapjuk meg, hogy az f(x)-et egyenl≈ëv√© tessz√ºk null√°val: x - 5 = 0. üîπ 2. L√©p√©s: Az egyenletet megoldva: x = 5. ‚úÖ Megold√°s: A z√©rushelye az x=5." },
            { question: "Mit jelent a f√ºggv√©ny k√©pe?", options: { a: "A f√ºggv√©ny √©rt√©kk√©szlete.", b: "A f√ºggv√©ny grafikonja.", c: "A f√ºggv√©ny hozz√°rendel√©si szab√°lya." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A 'f√ºggv√©ny k√©pe' √©s a 'f√ºggv√©ny grafikonja' szinonim√°k. üîπ 2. L√©p√©s: Mindkett≈ë az √∂sszetartoz√≥ (x,y) pontok halmaz√°t jelenti a koordin√°ta-rendszerben. ‚úÖ Megold√°s: A f√ºggv√©ny grafikonja." },
            { question: "Mi a minimumhelye egy f√ºggv√©nynek?", options: { a: "A legkisebb f√ºggv√©ny√©rt√©k.", b: "Az az x √©rt√©k, ahol a f√ºggv√©ny a legkisebb √©rt√©k√©t veszi fel.", c: "A z√©rushely." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Fontos megk√ºl√∂nb√∂ztetni a minimumhelyet √©s a minimum√©rt√©ket. üîπ 2. L√©p√©s: A minimum√©rt√©k az y √©rt√©k (a 'milyen alacsonyan van'), a minimumhely pedig az x √©rt√©k (a 'hol van'). ‚úÖ Megold√°s: Az az x √©rt√©k, ahol a f√ºggv√©ny a legkisebb √©rt√©k√©t veszi fel." },
            { question: "Hogy nevezz√ºk a koordin√°ta-rendszer f√ºgg≈ëleges tengely√©t?", options: { a: "x tengely (abszcissza)", b: "y tengely (ordin√°ta)", c: "z tengely" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A k√©t f≈ë tengely a v√≠zszintes √©s a f√ºgg≈ëleges. üîπ 2. L√©p√©s: A f√ºgg≈ëleges tengelyt nevezz√ºk y-tengelynek, vagy m√°s n√©ven ordin√°tatengelynek. ‚úÖ Megold√°s: y tengely (ordin√°ta)." },
            { question: "Milyen f√ºggv√©ny grafikonja egy v√≠zszintes egyenes?", options: { a: "line√°ris f√ºggv√©ny", b: "konstans f√ºggv√©ny", c: "m√°sodfok√∫ f√ºggv√©ny" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Ha a grafikon v√≠zszintes, az azt jelenti, hogy b√°rmilyen x √©rt√©khez ugyanaz az y √©rt√©k tartozik. üîπ 2. L√©p√©s: Ezt a t√≠pust, ahol a f√ºggv√©ny√©rt√©k √°lland√≥ (konstans), konstans f√ºggv√©nynek nevezz√ºk. Pl. f(x)=4. ‚úÖ Megold√°s: Konstans f√ºggv√©ny." },
            { question: "Melyik pont van az orig√≥ban?", options: { a: "(1; 1)", b: "(0; 1)", c: "(0; 0)" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Az orig√≥ a koordin√°ta-rendszer kezd≈ëpontja, a tengelyek metsz√©spontja. üîπ 2. L√©p√©s: Itt mind az x, mind az y koordin√°ta √©rt√©ke nulla. ‚úÖ Megold√°s: A (0; 0) pont." },
            { question: "Hol van a P(4; 0) pont?", options: { a: "Az y tengelyen.", b: "Az x tengelyen.", c: "Az orig√≥ban." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az y koordin√°ta (a m√°sodik √©rt√©k) nulla. üîπ 2. L√©p√©s: Ha az y koordin√°ta nulla, a pont nem mozdul el sem fel, sem le a v√≠zszintes tengelyr≈ël. ‚úÖ Megold√°s: A pont az x tengelyen van." },
            { question: "Mi a maximum√©rt√©ke egy f√ºggv√©nynek?", options: { a: "A legnagyobb x √©rt√©k.", b: "A legnagyobb y (f√ºggv√©ny) √©rt√©k.", c: "Az y tengely metsz√©spontja." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A maximum√©rt√©k azt jelenti, 'milyen magasan' van a grafikon legmagasabb pontja. üîπ 2. L√©p√©s: A magass√°got az y koordin√°ta mutatja meg. ‚úÖ Megold√°s: A legnagyobb y (f√ºggv√©ny) √©rt√©k." },
            { question: "Melyik bet≈± NEM lehet egy f√ºggv√©ny grafikonja (ha a f√ºgg≈ëleges tengely az y)?", options: { a: "V", b: "M", c: "C" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Alkalmazzuk a 'f√ºgg≈ëleges vonal' tesztet. Egy grafikon akkor f√ºggv√©ny, ha b√°rmely f√ºgg≈ëleges vonal legfeljebb egyszer metszi. üîπ 2. L√©p√©s: A 'V' √©s 'M' bet≈±ket b√°rmely f√ºgg≈ëleges vonal legfeljebb egyszer metszi. A 'C' bet≈±t viszont egy f√ºgg≈ëleges vonal k√©t helyen is metszheti. ‚úÖ Megold√°s: A 'C' bet≈± nem lehet egy f√ºggv√©ny grafikonja." },
            { question: "Hogyan √°br√°zoljuk az f(x) = x f√ºggv√©nyt?", options: { a: "Az x tengelyre es≈ë egyenes.", b: "Az y tengelyre es≈ë egyenes.", c: "Egy, az orig√≥n √°tmen≈ë, 45¬∞-os egyenes." }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Az f(x)=x azt jelenti, hogy y=x. Az √∂sszetartoz√≥ pontok pl. (1;1), (2;2), (-3;-3). üîπ 2. L√©p√©s: Ezek a pontok egy olyan egyenesen helyezkednek el, ami √°thalad az orig√≥n √©s 'felezi' az els≈ë √©s harmadik s√≠knegyedet. ‚úÖ Megold√°s: Egy, az orig√≥n √°tmen≈ë, 45¬∞-os egyenes." },
            { question: "Mi az f(x)=2x+5 f√ºggv√©ny y-tengelymetszete?", options: { a: "2", b: "5", c: "2,5" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az y-tengelymetszet az a pont, ahol x=0. üîπ 2. L√©p√©s: Helyettes√≠ts√ºnk be: f(0) = 2*0 + 5 = 0 + 5 = 5. ‚úÖ Megold√°s: Az y-tengelymetszet az 5." },
            { question: "A P(3; -1) pont melyik s√≠knegyedben van?", options: { a: "IV. s√≠knegyed", b: "II. s√≠knegyed", c: "III. s√≠knegyed" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A s√≠knegyedeket az √≥ramutat√≥ j√°r√°s√°val ellent√©tesen sz√°mozzuk. I.(+,+), II.(-,+), III.(-,-), IV.(+,-). üîπ 2. L√©p√©s: A P pont x koordin√°t√°ja pozit√≠v (3), y koordin√°t√°ja negat√≠v (-1). Ez a (+,-) eset. ‚úÖ Megold√°s: A pont a IV. s√≠knegyedben van." },
            { question: "Melyik f√ºggv√©ny szigor√∫an monoton n√∂vekv≈ë?", options: { a: "f(x) = 5", b: "f(x) = x + 1", c: "f(x) = -x" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az f(x)=5 konstans. Az f(x)=-x cs√∂kken≈ë (min√©l nagyobb x-et adunk, ann√°l kisebb lesz az eredm√©ny). üîπ 2. L√©p√©s: Az f(x)=x+1 f√ºggv√©nyben ha n√∂velj√ºk az x-et, az eredm√©ny is n≈ë. ‚úÖ Megold√°s: Az f(x) = x + 1." },
            { question: "Mi az f(x) = 3x f√ºggv√©ny z√©rushelye?", options: { a: "x = 3", b: "x = 0", c: "nincs neki" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A z√©rushelyet az f(x)=0 egyenlet megold√°s√°val kapjuk: 3x = 0. üîπ 2. L√©p√©s: Ezt az egyenletet x-re megoldva: x = 0/3 = 0. ‚úÖ Megold√°s: A z√©rushelye x = 0." },
            { question: "Mit jelent, ha egy pont az x tengelyen van?", options: { a: "Az y koordin√°t√°ja 0.", b: "Az x koordin√°t√°ja 0.", c: "Mindk√©t koordin√°t√°ja 0." }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Az x tengely a v√≠zszintes 'alapvonal'. üîπ 2. L√©p√©s: Az ezen a vonalon l√©v≈ë pontok nincsenek se felette, se alatta, teh√°t a f√ºgg≈ëleges (y) koordin√°t√°juk nulla. ‚úÖ Megold√°s: Az y koordin√°t√°ja 0." },
            { question: "Mit jelent, ha egy pont az y tengelyen van?", options: { a: "Az y koordin√°t√°ja 0.", b: "Mindk√©t koordin√°t√°ja 0.", c: "Az x koordin√°t√°ja 0." }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Az y tengely a f√ºgg≈ëleges 'alapvonal'. üîπ 2. L√©p√©s: Az ezen a vonalon l√©v≈ë pontok nincsenek se t≈ële jobbra, se balra, teh√°t a v√≠zszintes (x) koordin√°t√°juk nulla. ‚úÖ Megold√°s: Az x koordin√°t√°ja 0." }
        ];

        const questionsContainer = document.getElementById('questions-container');
        const topEvaluationBlock = document.getElementById('top-evaluation');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function shuffleOptions(options) {
            const optionsArray = Object.entries(options).map(([key, text]) => ({ key, text }));
            return shuffle([...optionsArray]);
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                const randomizedOptions = shuffleOptions(item.options);
                const optionLetters = ['a', 'b', 'c'];
                
                let optionsHTML = '';
                randomizedOptions.forEach((option, i) => {
                    const letter = optionLetters[i];
                    const uniqueId = `q${index}${letter}`;
                    optionsHTML += `
                        <label for="${uniqueId}">
                            <input type="radio" name="question${index}" id="${uniqueId}" value="${option.key}">
                            ${letter}) ${option.text}
                        </label>
                    `;
                });

                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">${optionsHTML}</div>
                        <div class="explanation" id="explanation-${index}">${item.explanation}</div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = topEvaluationBlock.querySelector('.pin-code-input').value;
            const checkBtn = topEvaluationBlock.querySelector('.check-btn');
            const resultContainer = topEvaluationBlock.querySelector('.result-container');
            const adminPanel = topEvaluationBlock.querySelector('.admin-panel');

            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('√ârv√©nytelen PIN k√≥d! K√©rj√ºk, adjon meg egy √©rv√©nyes tanul√≥i (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`K√©rj√ºk, v√°laszolj az √∂sszes k√©rd√©sre! Jelenleg ${answeredQuestions}/${shuffledData.length} k√©rd√©sre v√°laszolt√°l.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtn.disabled = true;
            topEvaluationBlock.querySelector('.pin-code-input').disabled = true;

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);
                explanationDiv.style.display = 'block';

                if (isMaster) {
                    document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                        if (radio.value === item.correctAnswer) {
                            radio.parentElement.classList.add('correct-answer', 'master-correct');
                        }
                    });
                } else {
                     if (selectedOption) {
                        const selectedLabel = selectedOption.parentElement;
                        if (selectedOption.value === item.correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct-answer', 'label-correct');
                        } else {
                            selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                             document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                                if (radio.value === item.correctAnswer) {
                                    radio.parentElement.classList.add('correct-answer');
                                }
                            });
                        }
                    } else { 
                         document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                            if (radio.value === item.correctAnswer) {
                                radio.parentElement.classList.add('correct-answer');
                            }
                        });
                    }
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            if (!isMaster) {
                resultContainer.innerHTML = `Eredm√©nyed: ${score} / ${shuffledData.length} (${percentage}%)`;
            } else {
                 resultContainer.innerHTML = `Mester m√≥d: Helyes v√°laszok √©s magyar√°zatok felfedve.`;
            }


            if (isMaster) {
                adminPanel.style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            
            const mainCheckBtn = topEvaluationBlock.querySelector('.check-btn');
            const mainPinInput = topEvaluationBlock.querySelector('.pin-code-input');

            mainCheckBtn.addEventListener('click', checkAnswers);
            mainPinInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
        });

    </script>
</body>
</html>