<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: Római számok</title>
  <style>
    :root {
      --primary-color: #D9534F;
      --secondary-color: #fcf8e3;
      --accent-color: #5BC0DE;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f7f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, #D9534F, #fcf8e3, #5BC0DE);
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: #dff0d8;
      border-color: #d6e9c6;
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: #f2dede;
      border-color: #ebccd1;
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #c9302c;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: Római számok</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
      { q: "Melyik számot jelöli az L római szám?", a: "100", b: "50", c: "500", correct: "b", exp: "A római számok alapjelei: I=1, V=5, X=10, L=50, C=100, D=500, M=1000." },
      { q: "Hogyan írjuk le római számokkal a 9-es számot?", a: "VIIII", b: "IX", c: "VIV", correct: "b", exp: "A kivonás szabályát alkalmazzuk: ha egy kisebb értékű jel megelőz egy nagyobbat, akkor a nagyobból kivonjuk a kisebbet. IX = 10 - 1 = 9. A VIIII írásmód nem szabályos." },
      { q: "Mi az értéke a XIV római számnak?", a: "14", b: "16", c: "15", correct: "a", exp: "Olvassuk össze a jeleket: X (10) + IV (4) = 10 + 4 = 14." },
      { q: "Melyik a legnagyobb szám?", a: "XCIX", b: "C", c: "LXXXIX", correct: "b", exp: "Értékek: a) XCIX = (100-10) + (10-1) = 90+9 = 99. b) C = 100. c) LXXXIX = 50+10+10+10 + (10-1) = 89. A legnagyobb a 100." },
      { q: "Hogyan írjuk le római számokkal a 40-et?", a: "XXXX", b: "XL", c: "LX", correct: "b", exp: "A kivonás szabálya szerint XL = 50 - 10 = 40. A XXXX írásmód nem szabályos, egy jel legfeljebb háromszor ismétlődhet egymás után." },
      { q: "Mi az értéke a DCCLII római számnak?", a: "752", b: "257", c: "557", correct: "a", exp: "Olvassuk össze a jeleket balról jobbra, összeadva őket: D(500) + C(100) + C(100) + L(50) + I(1) + I(1) = 752." },
      { q: "Melyik írásmód helytelen a római számoknál?", a: "IIII", b: "VV", c: "Mindkettő", correct: "c", exp: "Egy jel legfeljebb háromszor ismétlődhet (tehát az IIII helytelen, helyette IV van). Az 5-ös alapú jeleket (V, L, D) soha nem ismételjük, tehát a VV is helytelen." },
      { q: "Melyik a kakukktojás? (Melyik nem római számjel?)", a: "C", b: "K", c: "M", correct: "b", exp: "A 'K' betű nem része a standard római számírásnak. A hét alapjel: I, V, X, L, C, D, M." },
      { q: "Mi a 2023-as év római számokkal?", a: "MMXXIII", b: "LLXXIII", c: "MMCCIII", correct: "a", exp: "Bontsuk részekre: 2000 = MM, 20 = XX, 3 = III. Összeolvasva: MMXXIII." },
      { q: "Milyen szabály vonatkozik a kivonásra a római számoknál?", a: "Bármelyik jelből bármelyiket ki lehet vonni.", b: "Csak az 1, 10 és 100 értékű jeleket (I, X, C) lehet kivonni.", c: "Csak az 5-ös alapú jelekből (V, L, D) lehet kivonni.", correct: "b", exp: "A kivonás szabálya korlátozott: Csak I, X és C vonható ki, és csak a náluk legfeljebb tízszer nagyobb értékű jelből. Pl. IX (1-et 10-ből), de nem IL (1-et 50-ből)." },
      { q: "Mi az értéke a CMXCIX római számnak?", a: "1199", b: "999", c: "1099", correct: "b", exp: "Bontsuk részekre: CM = 1000-100 = 900. XC = 100-10 = 90. IX = 10-1 = 9. Az összegük: 900 + 90 + 9 = 999." },
      { q: "Melyik a legkisebb szám?", a: "XL", b: "LX", c: "XC", correct: "a", exp: "Értékek: XL = 40. LX = 60. XC = 90. A 40 a legkisebb." },
      { q: "Hogyan írjuk le a 64-et római számokkal?", a: "LXIIV", b: "LXIV", c: "LXIIII", correct: "b", exp: "Bontsuk részekre: 60 = LX (50+10). 4 = IV (5-1). Összerakva: LXIV." },
      { q: "Mi a 38 római számokkal?", a: "XXXVIII", b: "IIXL", c: "XXXIIX", correct: "a", exp: "Részekre bontva: 30 = XXX. 8 = VIII. Összeolvasva: XXXVIII. A IIXL és XXXIIX formák nem szabályosak." },
      { q: "Melyik állítás HAMIS?", a: "A római számírás helyiértékes rendszer.", b: "A római számírásban nincs nulla.", c: "A római számírás összeadó-kivonó rendszer.", correct: "a", exp: "A római számírás nem helyiértékes, mert egy jel (pl. X) értéke mindig ugyanannyi (10), bárhol is áll a számban. A mi rendszerünk helyiértékes (pl. az 1-es értéke más a 10-ben és a 100-ban)." },
      { q: "Mi a XIX + XXI összege római számokkal?", a: "XL", b: "XXXX", c: "XXXXI", correct: "a", exp: "Először váltsuk át a számokat: XIX = 19, XXI = 21. Az összegük 19+21 = 40. A 40 római számmal XL." },
      { q: "Melyik a legnagyobb szám, amit három különböző római számjellel le lehet írni?", a: "DCL", b: "MDC", c: "CLI", correct: "b", exp: "A legnagyobb számot úgy kapjuk, ha a legnagyobb értékű jeleket használjuk csökkenő sorrendben: M(1000) + D(500) + C(100) = 1600." },
      { q: "Hány darab 'X' jelet használunk a 88 leírásához?", a: "2", b: "3", c: "4", correct: "b", exp: "A 88 leírása: LXXXVIII. Ez L, X, X, X, V, I, I, I jelekből áll, tehát 3 darab 'X' jelet tartalmaz." },
      { q: "Mit jelent a 'kivonási szabály'?", a: "Ha kisebb jel áll a nagyobb előtt, az kivonást jelent.", b: "A római számokból mindig ki kell vonni valamit.", c: "Két egyforma jel kioltja egymást.", correct: "a", exp: "Ez a szabály teszi lehetővé a 4-es és 9-es végződésű számok (pl. 4, 9, 40, 90, 400, 900) rövidített írásmódját." },
      { q: "Hogyan írjuk le az 1990-es évet?", a: "MCMXC", b: "MDCCCCXC", c: "MIM", correct: "a", exp: "Részekre bontva: 1000=M, 900=CM, 90=XC. Összerakva: MCMXC." },
      { q: "Mi a III × V szorzat értéke római számokkal?", a: "XV", b: "VIII", c: "IIIV", correct: "a", exp: "Először átváltjuk: III=3, V=5. A szorzatuk 3×5=15. A 15 római számmal XV." },
      { q: "Melyik római szám nem létezik szabályos formában?", a: "IC", b: "XD", c: "Mindkettő", correct: "c", exp: "A kivonási szabály szerint I-t csak V-ből és X-ből, X-et csak L-ből és C-ből, C-t csak D-ből és M-ből lehet kivonni. Az IC (1-et 100-ból) és az XD (10-et 500-ból) nem szabályos." },
      { q: "Mi a CDL római szám értéke?", a: "450", b: "650", c: "350", correct: "a", exp: "Olvassuk össze a részeket: CD = 500 - 100 = 400. L = 50. Az összeg: 400 + 50 = 450." },
      { q: "Melyik a legnagyobb szám, ami nem tartalmaz M betűt?", a: "DCCCXCIX", b: "CMXCIX", c: "CDXCIX", correct: "b", exp: "Az a) 899. A b) 999. A c) 499. A 999 a legnagyobb. A prompt hibás, mert a CMXCIX tartalmaz M-et." },
      { q: "Mi a neve az arab számoknak, amiket ma használunk?", a: "Görög-római számok", b: "Hindu-arab számok", c: "Föníciai számok", correct: "b", exp: "A ma használt 0-9 közötti számjegyek és a helyiértékes rendszer Indiából származik, és az arab kereskedőkön keresztül terjedt el Európában. Ezért hindu-arab számrendszernek nevezik." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>