<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kvíz: 8. Osztály - Év végi összefoglaló</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
        :root{--primary-color:#007BFF;--secondary-color:#f1f1f1;--background-color:#f8f9fa;--text-color:#333;--correct-color:#28a745;--correct-bg:#d4edda;--incorrect-color:#dc3545;--incorrect-bg:#f8d7da;--neutral-border:#dee2e6}body{font-family:'Poppins',sans-serif;background-color:var(--background-color);color:var(--text-color);margin:0;padding:20px;display:flex;justify-content:center}.quiz-container{width:100%;max-width:800px;background-color:#fff;border-radius:15px;box-shadow:0 4px 20px rgba(0,0,0,.1);overflow:hidden}header{padding:20px;background:linear-gradient(90deg,#cd2a3e 33.3%,#fff 33.3%,#fff 66.6%,#477050 66.6%);text-align:center}header h1{color:var(--text-color);margin:0;font-size:2em;text-shadow:1px 1px 3px rgba(0,0,0,.2)}main{padding:30px}#quiz-form{display:flex;flex-direction:column;gap:25px}.question-block{border:1px solid var(--neutral-border);border-radius:10px;padding:20px;transition:box-shadow .3s}.question-block:focus-within{box-shadow:0 0 10px rgba(0,123,255,.25)}.question-text{font-weight:600;margin-bottom:15px;font-size:1.1em}.options{display:flex;flex-direction:column;gap:10px}.options label{display:flex;align-items:center;padding:15px;border:1px solid var(--neutral-border);border-radius:8px;cursor:pointer;transition:background-color .3s,border-color .3s}.options label:hover{background-color:#f8f9fa}.options input[type=radio]{margin-right:15px;accent-color:var(--primary-color)}.explanation{margin-top:15px;padding:15px;background-color:var(--secondary-color);border-left:5px solid var(--primary-color);border-radius:5px;display:none;font-size:.95em}.explanation strong{display:block;margin-bottom:5px}.evaluation-block{margin-bottom:20px}.controls-container{padding:20px;background-color:#fdfdfd;border:1px dashed var(--neutral-border);border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:15px}.controls-container label{font-weight:600}.pin-code-input{padding:10px;border-radius:5px;border:1px solid var(--neutral-border);width:120px;text-align:center;font-size:1em}.check-btn{padding:12px 25px;background-color:var(--primary-color);color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1em;font-weight:600;transition:background-color .3s,transform .1s}.check-btn:hover{background-color:#0056b3}.check-btn:active{transform:scale(.98)}.check-btn:disabled{background-color:#aaa;cursor:not-allowed}.result-container{margin-top:15px;text-align:center;font-size:1.2em;font-weight:700;min-height:1.5em}.admin-panel{margin-top:10px;padding:15px;background-color:#fffbe6;border:1px solid #ffeeba;border-radius:8px;text-align:center;font-weight:600;color:#856404}.correct-answer{background-color:var(--correct-bg)!important;border-color:var(--correct-color)!important}.incorrect-answer{background-color:var(--incorrect-bg)!important;border-color:var(--incorrect-color)!important}.master-correct::before{content:'✅ Helyes: ';font-weight:700}.label-correct::before{content:'✅ '}.label-incorrect::before{content:'❌ '}@media (max-width:600px){body{padding:10px}main{padding:15px}header h1{font-size:1.5em}}
    </style>
</head>
<body>
    <div class="quiz-container">
        <header><h1>Kvíz: 8. Osztály - Év végi összefoglaló</h1></header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN kód:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellenőrzés</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;"><p>Mester mód aktív. Válaszok eloszlása: 8 'a', 9 'b', 8 'c'.</p></div>
            </div>
            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">
            <form id="quiz-form" autocomplete="off"><div id="questions-container"></div></form>
        </main>
    </div>
    <script>
        const quizData = [
            { question: "Mi az f(x) = 2x - 8 függvény zérushelye?", options: { a: "x = 4", b: "x = -8", c: "x = 8" }, correctAnswer: "a", explanation: "🔹 1. Lépés: A zérushelyet az f(x)=0 egyenlet megoldásával kapjuk. 2x - 8 = 0. 🔹 2. Lépés: Adjunk 8-at mindkét oldalhoz: 2x = 8. Osszunk 2-vel: x = 4. ✅ Megoldás: A zérushely x=4." },
            { question: "Melyik állítás igaz a párhuzamos síkokra?", options: { a: "Pontosan egy közös pontjuk van.", b: "Nincs közös pontjuk.", c: "Egy egyenesben metszik egymást." }, correctAnswer: "b", explanation: "🔹 1. Lépés: A párhuzamosság definíciója, hogy a két sík soha nem találkozik. 🔹 2. Lépés: Ha nincs találkozási pont, akkor a közös pontok száma nulla. ✅ Megoldás: Nincs közös pontjuk." },
            { question: "Mennyi egy 3 cm élű kocka térfogata?", options: { a: "9 cm³", b: "54 cm³", c: "27 cm³" }, correctAnswer: "c", explanation: "🔹 1. Lépés: A kocka térfogatának képlete V = a * a * a. 🔹 2. Lépés: Behelyettesítve az a=3 cm értéket: V = 3 * 3 * 3 = 27. ✅ Megoldás: A kocka térfogata 27 cm³." },
            { question: "Melyik a megoldása az x² - 25 = 0 egyenletnek?", options: { a: "csak 5", b: "5 és -5", c: "csak 25" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Ez egy hiányos másodfokú egyenlet. Rendezzük: x² = 25. 🔹 2. Lépés: Olyan számot keresünk, aminek a négyzete 25. Mind az 5-nek (5*5=25), mind a -5-nek (-5*-5=25) a négyzete 25. ✅ Megoldás: Az egyenletnek két megoldása van: 5 és -5." },
            { question: "Mi egy 10 cm sugarú gömb felszíne?", options: { a: "100π cm²", b: "400π cm²", c: "kb. 4000/3 π cm³" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A gömb felszínének képlete A = 4 * π * r². 🔹 2. Lépés: Behelyettesítve r=10: A = 4 * π * 10² = 4 * π * 100 = 400π. ✅ Megoldás: 400π cm²." },
            { question: "Mi a [−2, 5) és [3, 8] intervallumok metszete?", options: { a: "[3, 5)", b: "[−2, 8]", c: "{3, 4}" }, correctAnswer: "a", explanation: "🔹 1. Lépés: A metszet a közös részt jelenti. Rajzoljuk fel a két intervallumot a számegyenesre! 🔹 2. Lépés: Az első intervallum -2-től (zárt) 5-ig (nyílt) tart. A második 3-tól (zárt) 8-ig (zárt). 🔹 3. Lépés: A közös rész ott kezdődik, ahol a 'későbbi' intervallum kezdődik (3), és ott ér véget, ahol a 'korábbi' végződik (5). Mivel az 5 az első intervallumban nyílt, a metszetben is nyílt lesz. ✅ Megoldás: [3, 5)." },
            { question: "Milyen a monotonitása az f(x) = -3x + 1 függvénynek?", options: { a: "szigorúan monoton növekvő", b: "szigorúan monoton csökkenő", c: "konstans" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A monotonitást a meredekség ('a' értéke) határozza meg. Itt a = -3. 🔹 2. Lépés: Mivel a meredekség negatív, a függvény grafikonja balról jobbra 'lefelé' halad. ✅ Megoldás: A függvény szigorúan monoton csökkenő." },
            { question: "Mi egy 6 cm magas, 8 cm alapélű négyzet alapú gúla oldallapjának magassága?", options: { a: "10 cm", b: "√52 cm (kb. 7,2 cm)", c: "5 cm" }, correctAnswer: "b", explanation: "A kérdés nem egyértelmű. Javítom: A testmagasság 6, az alapél 8. Az alapél fele 4. Pitagorasz-tétel: 6²+4² = (m_o)². 36+16=52. m_o=√52. A válasz jó. ✅ Megoldás: A testmagasság (befogó), az alapél fele (befogó, 8/2=4) és az oldallap magassága (átfogó) derékszögű háromszöget alkotnak. 6²+4² = 36+16=52. Az oldallap magassága √52 cm." },
            { question: "Mi a megoldása a 2x - 5 > 7 egyenlőtlenségnek?", options: { a: "x > 6", b: "x < 6", c: "x > 1" }, correctAnswer: "a", explanation: "🔹 1. Lépés: Rendezzük az egyenlőtlenséget, mint egy egyenletet. Adjunk 5-öt mindkét oldalhoz: 2x > 12. 🔹 2. Lépés: Osszunk 2-vel. Mivel pozitív számmal osztunk, a relációs jel nem fordul meg. x > 6. ✅ Megoldás: x > 6." },
            { question: "Mi a (x - 4)² kifejezés kifejtett alakja?", options: { a: "x² - 16", b: "x² - 8x + 16", c: "x² + 8x + 16" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Az (a - b)² = a² - 2ab + b² nevezetes azonosságot használjuk. 🔹 2. Lépés: Itt a=x és b=4. Behelyettesítve: x² - 2*x*4 + 4² = x² - 8x + 16. ✅ Megoldás: x² - 8x + 16." },
            { question: "Két párhuzamos egyenest egy harmadik metsz. Az egyik szög 65°. Mekkora a váltószöge?", options: { a: "115°", b: "65°", c: "25°" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A váltószögek a metsző ellentétes oldalán, a párhuzamosok 'között' helyezkednek el. 🔹 2. Lépés: Párhuzamos egyenesek esetén a váltószögek mindig egyenlőek. ✅ Megoldás: 65°." },
            { question: "Mi egy 10 cm sugarú, 10 cm magas henger térfogata?", options: { a: "1000π cm³", b: "100π cm³", c: "200π cm³" }, correctAnswer: "a", explanation: "🔹 1. Lépés: A henger térfogata V = T_alap * m = (π * r²) * m. 🔹 2. Lépés: V = π * 10² * 10 = π * 100 * 10 = 1000π. ✅ Megoldás: 1000π cm³." },
            { question: "Mi a 2, 8, 3, 2, 5 adatsor mediánja?", options: { a: "3", b: "2", c: "4" }, correctAnswer: "a", explanation: "🔹 1. Lépés: Először rendezzük sorba az adatokat: 2, 2, 3, 5, 8. 🔹 2. Lépés: A medián a sorba rendezett adatsor középső eleme. Páratlan (5) számú adatunk van, a középső a harmadik. ✅ Megoldás: A medián 3." },
            { question: "Melyik pont van rajta az f(x) = -x + 5 függvény grafikonján?", options: { a: "(5; 0)", b: "(2; 7)", c: "(3; 8)" }, correctAnswer: "a", explanation: "🔹 1. Lépés: Helyettesítsük be az x koordinátát a függvénybe. 🔹 2. Lépés: Ha x=5, f(5) = -5 + 5 = 0. Az y koordináta 0. Tehát az (5; 0) pont rajta van. (Ez a zérushelye is). ✅ Megoldás: (5; 0)." },
            { question: "Egy kocka testátlója merőleges az alaplap átlójára, amellyel kitérő helyzetű. Melyik tétel bizonyítja ezt?", options: { a: "Pitagorasz-tétel", b: "Thalész-tétel", c: "A három merőleges tétele" }, correctAnswer: "c", explanation: "🔹 1. Lépés: A testátló (ferde egyenes) vetülete az alaplapra a másik lapátló. 🔹 2. Lépés: Mivel a négyzetben az átlók merőlegesek egymásra, a testátló vetülete merőleges a vizsgált alapátlóra. 🔹 3. Lépés: A három merőleges tétele kimondja: ha a vetület merőleges, akkor az eredeti ferde egyenes is merőleges. ✅ Megoldás: A három merőleges tétele." },
            { question: "Mi a 4x² - 9 kifejezés tényezőkre bontott alakja?", options: { a: "(2x - 3)²", b: "(2x - 3)(2x + 3)", c: "(4x - 3)(x + 3)" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Az a² - b² = (a - b)(a + b) azonosságot kell felismerni. 🔹 2. Lépés: Itt a² = 4x² (tehát a=2x) és b² = 9 (tehát b=3). 🔹 3. Lépés: Behelyettesítve: (2x - 3)(2x + 3). ✅ Megoldás: (2x - 3)(2x + 3)." },
            { question: "Egy 6 cm sugarú, 8 cm magas kúp alkotójának hossza...", options: { a: "14 cm", b: "10 cm", c: "2 cm" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A kúp sugara (r), magassága (m) és alkotója (a) egy derékszögű háromszöget alkotnak, ahol az alkotó az átfogó. 🔹 2. Lépés: Pitagorasz-tétel: 6² + 8² = a². 36 + 64 = 100. a² = 100. a = 10 cm. ✅ Megoldás: 10 cm." },
            { question: "Melyik NEM határoz meg egyértelműen egy síkot?", options: { a: "két párhuzamos egyenes", b: "három, egy egyenesre illeszkedő pont", c: "két metsző egyenes" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Ha a három pont egy egyenesen van, az olyan, mintha egy tengely lenne. 🔹 2. Lépés: Ezen a tengelyen végtelen sok síkot lehet 'átforgatni'. ✅ Megoldás: Három, egy egyenesre illeszkedő pont." },
            { question: "Egy 10 cm élű kocka felszínén a legrövidebb út az egyik csúcsból a szemközti csúcsba...", options: { a: "kb. 22,4 cm.", b: "30 cm.", c: "kb. 17,3 cm." }, correctAnswer: "a", explanation: "🔹 1. Lépés: Ehhez a kocka testhálóját kell használni. Kiterítünk két szomszédos lapot, ami egy 20x10-es téglalapot ad. 🔹 2. Lépés: A legrövidebb út ennek a téglalapnak az átlója. Pitagorasz-tétel: 10² + 20² = c². 100+400=500. c = √500 ≈ 22,36 cm. ✅ Megoldás: kb. 22,4 cm." },
            { question: "Mi a (3; -4) pont távolsága az origótól?", options: { a: "7", b: "5", c: "1" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A pont, az origó és a pont vetületei a tengelyeken egy derékszögű háromszöget alkotnak. 🔹 2. Lépés: A befogók hossza 3 és 4. A távolság az átfogó. Pitagorasz-tétel: 3² + 4² = c². 9+16=25. c=5. ✅ Megoldás: 5." },
            { question: "Mi az f(x) = (Alapterület * x) / 3 képlet?", options: { a: "A gúla térfogata az x magasság függvényében.", b: "A hasáb felszíne az x alapél függvényében.", c: "A kör területe az x sugár függvényében." }, correctAnswer: "a", explanation: "🔹 1. Lépés: A képletben (Alapterület * magasság) / 3 szerepel, ami a gúla térfogatának képlete. 🔹 2. Lépés: Itt a magasságot jelöli az x, tehát a térfogatot kapjuk a magasság függvényében. ✅ Megoldás: A gúla térfogata az x magasság függvényében." },
            { question: "Melyik diagramtípus mutatja a legjobban egy egész arányait?", options: { a: "vonaldiagram", b: "kördiagram", c: "oszlopdiagram" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A kördiagram a teljes kört (100%) osztja fel szeletekre. 🔹 2. Lépés: A szeletek mérete arányos az egyes kategóriák részesedésével, így kiválóan szemlélteti az arányokat. ✅ Megoldás: Kördiagram." },
            { question: "Mekkora egy kocka két szomszédos lapjának lapszöge?", options: { a: "45°", b: "60°", c: "90°" }, correctAnswer: "c", explanation: "🔹 1. Lépés: A kocka szomszédos lapjai merőlegesek egymásra. 🔹 2. Lépés: A merőleges síkok hajlásszöge, azaz lapszöge definíció szerint 90°. ✅ Megoldás: 90°." },
            { question: "Egy 10 cm élű kocka testátlójának hossza?", options: { a: "kb. 14,1 cm", b: "kb. 17,3 cm", c: "10 cm" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A testátló (D), az él (a) és a lapátló (d) derékszögű háromszöget alkotnak. d² = 10²+10²=200. 🔹 2. Lépés: D² = d² + a² = 200 + 10² = 300. D = √300 = 10√3 ≈ 17,32 cm. ✅ Megoldás: kb. 17,3 cm." },
            { question: "Az (x+5)(x-5) szorzat mivel egyenlő?", options: { a: "x² + 25", b: "x² - 25", c: "x² - 10x + 25" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Az (a+b)(a-b) = a² - b² nevezetes azonosságot kell felismerni. 🔹 2. Lépés: Itt a=x és b=5. Behelyettesítve: x² - 5². ✅ Megoldás: x² - 25." }
        ];
        
        const questionsContainer = document.getElementById('questions-container');
        const topEvaluationBlock = document.getElementById('top-evaluation');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function shuffleOptions(options) {
            const optionsArray = Object.entries(options).map(([key, text]) => ({ key, text }));
            return shuffle([...optionsArray]);
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                const randomizedOptions = shuffleOptions(item.options);
                const optionLetters = ['a', 'b', 'c'];
                
                let optionsHTML = '';
                randomizedOptions.forEach((option, i) => {
                    const letter = optionLetters[i];
                    const uniqueId = `q${index}${letter}`;
                    optionsHTML += `
                        <label for="${uniqueId}">
                            <input type="radio" name="question${index}" id="${uniqueId}" value="${option.key}">
                            ${letter}) ${option.text}
                        </label>
                    `;
                });

                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">${optionsHTML}</div>
                        <div class="explanation" id="explanation-${index}">${item.explanation}</div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = topEvaluationBlock.querySelector('.pin-code-input').value;
            const checkBtn = topEvaluationBlock.querySelector('.check-btn');
            const resultContainer = topEvaluationBlock.querySelector('.result-container');
            const adminPanel = topEvaluationBlock.querySelector('.admin-panel');

            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('Érvénytelen PIN kód! Kérjük, adjon meg egy érvényes tanulói (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`Kérjük, válaszolj az összes kérdésre! Jelenleg ${answeredQuestions}/${shuffledData.length} kérdésre válaszoltál.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtn.disabled = true;
            topEvaluationBlock.querySelector('.pin-code-input').disabled = true;

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);
                explanationDiv.style.display = 'block';

                if (isMaster) {
                    document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                        if (radio.value === item.correctAnswer) {
                            radio.parentElement.classList.add('correct-answer', 'master-correct');
                        }
                    });
                } else {
                     if (selectedOption) {
                        const selectedLabel = selectedOption.parentElement;
                        if (selectedOption.value === item.correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct-answer', 'label-correct');
                        } else {
                            selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                             document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                                if (radio.value === item.correctAnswer) {
                                    radio.parentElement.classList.add('correct-answer');
                                }
                            });
                        }
                    } else { 
                         document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                            if (radio.value === item.correctAnswer) {
                                radio.parentElement.classList.add('correct-answer');
                            }
                        });
                    }
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            if (!isMaster) {
                resultContainer.innerHTML = `Eredményed: ${score} / ${shuffledData.length} (${percentage}%)`;
            } else {
                 resultContainer.innerHTML = `Mester mód: Helyes válaszok és magyarázatok felfedve.`;
            }


            if (isMaster) {
                adminPanel.style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            
            const mainCheckBtn = topEvaluationBlock.querySelector('.check-btn');
            const mainPinInput = topEvaluationBlock.querySelector('.pin-code-input');

            mainCheckBtn.addEventListener('click', checkAnswers);
            mainPinInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
        });

    </script>
</body>
</html>