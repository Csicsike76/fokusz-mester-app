<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: A háromszög alapjai</title>
  <style>
    :root {
      --primary-color: #388d3c; /* Zöld */
      --secondary-color: #d52b1e; /* Piros */
      --light-green: #e8f5e9;
      --light-red: #ffebee;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, var(--secondary-color), var(--text-light), var(--primary-color));
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: var(--light-green);
      border-color: var(--primary-color);
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: var(--light-red);
      border-color: var(--secondary-color);
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #2a6a2d;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: A háromszög alapjai</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
        { q: "Mennyi egy háromszög belső szögeinek összege?", a: "180°", b: "360°", c: "Attól függ, milyen a háromszög.", correct: "a", exp: "Alapvető tétel, hogy bármely háromszög belső szögeinek összege pontosan 180°." },
        { q: "Hogy nevezzük azt a háromszöget, amelynek minden oldala különböző hosszúságú?", a: "Egyenlő szárú", b: "Általános", c: "Szabályos", correct: "b", exp: "Az általános háromszögnek nincsenek speciális oldalhosszúságra vagy szögekre vonatkozó tulajdonságai, minden oldala és szöge különböző lehet." },
        { q: "Milyen egy háromszög, ha van egy 100°-os szöge?", a: "Hegyesszögű", b: "Derékszögű", c: "Tompaszögű", correct: "c", exp: "Ha egy háromszögnek van egy 90°-nál nagyobb (de 180°-nál kisebb) szöge, akkor tompaszögű háromszögnek nevezzük. Mivel a szögösszeg 180°, csak egy tompaszöge lehet." },
        { q: "Mi a háromszög-egyenlőtlenség?", a: "A háromszög belső szögeinek összege 180°.", b: "Bármely két oldalának összege nagyobb a harmadik oldalnál.", c: "A befogók négyzetösszege egyenlő az átfogó négyzetével.", correct: "b", exp: "A háromszög-egyenlőtlenség a háromszög létezésének feltétele. A, b, c oldalakra: a+b > c, a+c > b, és b+c > a. A 'c' a Pitagorasz-tétel." },
        { q: "Melyik oldalhármasból NEM szerkeszthető háromszög?", a: "3, 4, 5", b: "5, 6, 7", c: "2, 3, 6", correct: "c", exp: "Ellenőrizzük a háromszög-egyenlőtlenséget: a két rövidebb oldal összegének nagyobbnak kell lennie a leghosszabbnál. a) 3+4=7>5 (jó). b) 5+6=11>7 (jó). c) 2+3=5, ami nem nagyobb, mint 6. Ebből nem szerkeszthető háromszög." },
        { q: "Hogy nevezzük azt a háromszöget, amelynek két oldala egyenlő?", a: "Egyenlő szárú", b: "Egyenlő oldalú", c: "Derékszögű", correct: "a", exp: "Az egyenlő szárú háromszögnek definíció szerint legalább két oldala egyenlő hosszúságú. Ezeket szárakank, a harmadik oldalt alapnak nevezzük." },
        { q: "Mi igaz az egyenlő szárú háromszög alapon fekvő szögeire?", a: "Mindig 60°-osak.", b: "Mindig egyenlőek.", c: "Összegük 90°.", correct: "b", exp: "Az egyenlő szárú háromszög alaptétele, hogy az egyenlő szárú háromszögben az alapon fekvő szögek (a szárak és az alap által bezárt szögek) mindig egyenlő nagyságúak." },
        { q: "Hány oldala és hány csúcsa van egy háromszögnek?", a: "3 oldal, 3 csúcs", b: "3 oldal, 2 csúcs", c: "4 oldal, 4 csúcs", correct: "a", exp: "A háromszög definíció szerint egy háromoldalú sokszög, aminek 3 oldala és 3 csúcsa van." },
        { q: "Mi a derékszögű háromszög?", a: "Olyan háromszög, amelynek minden szöge derékszög.", b: "Olyan háromszög, amelynek van egy derékszögű (90°-os) szöge.", c: "Olyan háromszög, amelynek van két derékszöge.", correct: "b", exp: "Mivel a belső szögek összege 180°, egy háromszögnek legfeljebb egy derékszöge lehet. Ha van egy, akkor a háromszög derékszögű." },
        { q: "Egy háromszög két szöge 40° és 60°. Milyen típusú a háromszög?", a: "Tompaszögű", b: "Derékszögű", c: "Hegyesszögű", correct: "c", exp: "A harmadik szög 180° - (40°+60°) = 180° - 100° = 80°. Mivel mindhárom szöge (40°, 60°, 80°) 90°-nál kisebb, a háromszög hegyesszögű." },
        { q: "Mi a háromszög külső szöge?", a: "A háromszögön kívüli bármely szög.", b: "A háromszög egyik belső szögének kiegészítő szöge.", c: "A háromszög szögeinek összege.", correct: "b", exp: "Ha a háromszög egyik oldalát meghosszabbítjuk, a belső szög melletti kiegészítő szöget kapjuk. Ezt nevezzük a háromszög külső szögének." },
        { q: "Mi igaz az egyenlő oldalú háromszögre?", a: "Minden szöge 60°.", b: "Csak az oldalai egyenlőek, a szögei nem.", c: "Van egy derékszöge.", correct: "a", exp: "Az egyenlő oldalú (szabályos) háromszög minden oldala és minden szöge egyenlő. Mivel a szögösszeg 180°, egy szöge 180°/3 = 60°." },
        { q: "Melyik állítás igaz MINDIG?", a: "A derékszögű háromszög egyenlő szárú.", b: "Az egyenlő oldalú háromszög egyenlő szárú.", c: "Az egyenlő szárú háromszög egyenlő oldalú.", correct: "b", exp: "Mivel az egyenlő oldalú háromszögnek mindhárom oldala egyenlő, ezért teljesíti a 'legalább két oldala egyenlő' feltételt is. Tehát minden egyenlő oldalú háromszög egyben egyenlő szárú is. A többi állítás nem igaz általánosan." },
        { q: "Egy háromszög oldalai 5, 5, 8. Milyen típusú a háromszög?", a: "Általános", b: "Egyenlő oldalú", c: "Egyenlő szárú", correct: "c", exp: "Mivel a háromszögnek van két egyenlő hosszúságú (5 cm-es) oldala, ezért egyenlő szárú háromszög. Az alapja a 8 cm-es oldal." },
        { q: "Mekkora egy háromszög külső és a mellette fekvő belső szögének összege?", a: "90°", b: "180°", c: "360°", correct: "b", exp: "Mivel a külső szög a belső szög kiegészítő szöge, az összegük definíció szerint 180°." },
        { q: "Lehet-e egy háromszögnek két tompaszöge?", a: "Igen, ha elég nagy.", b: "Nem, soha.", c: "Igen, ha konkáv.", correct: "b", exp: "Nem. Ha két szöge is 90°-nál nagyobb lenne, akkor már a két szög összege is meghaladná a 180°-ot, ami lehetetlen, hiszen a három szög összege pontosan 180°." },
        { q: "Mi a derékszögű háromszög két hegyesszögének összege?", a: "90°", b: "180°", c: "Attól függ, mekkora az átfogó.", correct: "a", exp: "Mivel a három szög összege 180°, és ebből az egyik 90°, a másik kettőre összesen 180°-90°=90° marad. Tehát a két hegyesszög pótszög." },
        { q: "Egy háromszög kerülete 25 cm. Két oldala 8 cm és 10 cm. Milyen hosszú a harmadik oldal?", a: "7 cm", b: "18 cm", c: "43 cm", correct: "a", exp: "A kerület a három oldal összege. A harmadik oldal hossza: 25 - (8+10) = 25 - 18 = 7 cm. Ellenőrizzük a háromszög-egyenlőtlenséget: 7+8 > 10 (igaz)." },
      { q: "Mi az 'általános háromszög' másik neve?", a: "Szabálytalan háromszög", b: "Tompaszögű háromszög", c: "Derékszögű háromszög", correct: "a", exp: "Az általános háromszöget, melynek nincs semmilyen speciális tulajdonsága (oldalai és szögei is különbözőek), szokás szabálytalan háromszögnek is nevezni." },
      { q: "Ha egy háromszög minden szöge kisebb 90°-nál, akkor az egy...", a: "Hegyesszögű háromszög.", b: "Derékszögű háromszög.", c: "Nem létező háromszög.", correct: "a", exp: "Ez a hegyesszögű háromszög definíciója: mindhárom belső szöge hegyesszög (90°-nál kisebb)." },
      { q: "Egy egyenlő szárú háromszög szárszöge 100°. Mekkorák az alapon fekvő szögei?", a: "40° és 40°", b: "50° és 30°", c: "80° és 80°", correct: "a", exp: "A belső szögek összege 180°. A két alapon fekvő szögre összesen 180°-100°=80° marad. Mivel ezek egyenlőek, egyenként 80°/2 = 40°-osak." },
      { q: "Melyik állítás igaz a háromszögekre?", a: "Nagyobb oldallal szemben mindig kisebb szög van.", b: "Nagyobb oldallal szemben mindig nagyobb szög van.", c: "Az oldalak és a szögek között nincs kapcsolat.", correct: "b", exp: "Ez egy fontos tétel a háromszögekben: a nagyobb oldallal szemben mindig nagyobb szög található, és fordítva, a nagyobb szöggel szemben van a hosszabb oldal." },
      { q: "Egy háromszög egyik külső szöge 110°. Milyen típusú a háromszög?", a: "Biztosan derékszögű.", b: "Biztosan hegyesszögű.", c: "Lehet hegyes-, derék- vagy tompaszögű is.", correct: "b", exp: "Ha a külső szög 110°, a mellette lévő belső szög 180-110=70°. A másik két belső szög összege egyenlő a 110°-os külső szög nagyságával. Mivel mindketten pozitívak, egyik sem lehet 110°-nál nagyobb, tehát a 70°-os szög a legnagyobb. Így a háromszög hegyesszögű." },
      { q: "Melyik oldalhármasból szerkeszthető egyenlő szárú háromszög?", a: "4, 4, 9", b: "5, 5, 5", c: "10, 4, 4", correct: "b", exp: "Az 'a' és 'c' esetekben nem teljesül a háromszög-egyenlőtlenség (4+4<9 és 4+4<10). A 'b' esetben 5+5>5, ez egy egyenlő oldalú háromszöget határoz meg, ami egyben egyenlő szárú is." },
      { q: "Hány csúcsból indul ki egy oldal a háromszögben?", a: "Egyből", b: "Kettőből", c: "Háromból", correct: "a", exp: "Ez egy trükkös kérdés. Egy oldal két csúcsot köt össze, de ha egy csúcsból 'indulunk', akkor onnan két oldal indul ki. A kérdés megfogalmazása pontatlan. Ha úgy értjük, 'hány csúcsot érint', akkor 2. Ha úgy, 'hány csúcs végpontja', akkor 2. A legvalószínűbb értelmezés, hogy egy oldalnak 2 végpontja van, de a kérdés nem szerencsés." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>