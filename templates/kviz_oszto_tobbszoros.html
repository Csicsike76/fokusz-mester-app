<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kv√≠z: Oszt√≥, t√∂bbsz√∂r√∂s</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #007BFF;
            --secondary-color: #f1f1f1;
            --background-color: #f8f9fa;
            --text-color: #333;
            --correct-color: #28a745;
            --correct-bg: #d4edda;
            --incorrect-color: #dc3545;
            --incorrect-bg: #f8d7da;
            --neutral-border: #dee2e6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            padding: 20px;
            background: linear-gradient(90deg, #CD2A3E 33.3%, #FFFFFF 33.3%, #FFFFFF 66.6%, #477050 66.6%);
            text-align: center;
        }

        header h1 {
            color: var(--text-color);
            margin: 0;
            font-size: 2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        main {
            padding: 30px;
        }

        #quiz-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .question-block {
            border: 1px solid var(--neutral-border);
            border-radius: 10px;
            padding: 20px;
            transition: box-shadow 0.3s;
        }

        .question-block:focus-within {
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.25);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .options label {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--neutral-border);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .options label:hover {
            background-color: #f8f9fa;
        }

        .options input[type="radio"] {
            margin-right: 15px;
            accent-color: var(--primary-color);
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
            display: none;
            font-size: 0.95em;
        }
        
        .explanation strong {
            display: block;
            margin-bottom: 5px;
        }
        
        .evaluation-block {
            margin-bottom: 20px;
        }

        .controls-container {
            padding: 20px;
            background-color: #fdfdfd;
            border: 1px dashed var(--neutral-border);
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .controls-container label {
            font-weight: 600;
        }

        .pin-code-input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--neutral-border);
            width: 120px;
            text-align: center;
            font-size: 1em;
        }

        .check-btn {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
        }

        .check-btn:hover {
            background-color: #0056b3;
        }
        
        .check-btn:active {
            transform: scale(0.98);
        }
        
        .check-btn:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }

        .result-container {
            margin-top: 15px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 700;
            min-height: 1.5em;
        }

        .admin-panel {
            margin-top: 10px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: #856404;
        }

        /* Visszajelz≈ë st√≠lusok */
        .correct-answer {
            background-color: var(--correct-bg) !important;
            border-color: var(--correct-color) !important;
        }

        .incorrect-answer {
            background-color: var(--incorrect-bg) !important;
            border-color: var(--incorrect-color) !important;
        }
        
        .master-correct::before {
            content: '‚úÖ Helyes: ';
            font-weight: bold;
        }

        .label-correct::before {
            content: '‚úÖ ';
        }
        
        .label-incorrect::before {
            content: '‚ùå ';
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            main {
                padding: 15px;
            }
            header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <header>
            <h1>Kv√≠z: Oszt√≥, t√∂bbsz√∂r√∂s</h1>
        </header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN k√≥d:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellen≈ërz√©s</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;">
                    <p>Mester m√≥d akt√≠v. V√°laszok eloszl√°sa: 8 'a', 9 'b', 8 'c'.</p>
                </div>
            </div>

            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

            <form id="quiz-form" autocomplete="off">
                <div id="questions-container"></div>
            </form>
            
        </main>
    </div>

    <script>
        const quizData = [
            { question: "Melyik sz√°m a 7-nek t√∂bbsz√∂r√∂se?", options: { a: "15", b: "21", c: "27" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A t√∂bbsz√∂r√∂s azt jelenti, hogy a sz√°mot marad√©k n√©lk√ºl lehet osztani 7-tel. üîπ 2. L√©p√©s: Ellen≈ërizz√ºk a lehet≈ës√©geket. 15 : 7 = 2, marad√©k 1. 21 : 7 = 3, marad√©k 0. 27 : 7 = 3, marad√©k 6. ‚úÖ Megold√°s: A 21 oszthat√≥ 7-tel, teh√°t a 21 a 7 t√∂bbsz√∂r√∂se. ‚úèÔ∏è B√≥nusz: A 7 t√∂bbsz√∂r√∂sei a 7-es szorz√≥t√°bla sz√°mai (7, 14, 21, 28...)." },
            { question: "Melyik sz√°m a 24-nek oszt√≥ja?", options: { a: "5", b: "8", c: "10" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az oszt√≥ azt jelenti, hogy a 24-et marad√©k n√©lk√ºl el lehet vele osztani. üîπ 2. L√©p√©s: Ellen≈ërizz√ºk a lehet≈ës√©geket. 24 : 5 nem eg√©sz. 24 : 8 = 3. 24 : 10 nem eg√©sz. ‚úÖ Megold√°s: A 8 oszt√≥ja a 24-nek. ‚úèÔ∏è B√≥nusz: A 24 oszt√≥i: 1, 2, 3, 4, 6, 8, 12, 24." },
            { question: "Melyik √°ll√≠t√°s igaz?", options: { a: "A 15 oszt√≥ja a 3-nak.", b: "A 3 oszt√≥ja a 15-nek.", c: "A 15 √©s a 3 egym√°s t√∂bbsz√∂r√∂sei." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Vizsg√°ljuk a kapcsolatot a 3 √©s a 15 k√∂z√∂tt. 15-√∂t el tudjuk osztani 3-mal? Igen, 15 : 3 = 5. üîπ 2. L√©p√©s: Ez azt jelenti, hogy a 3 oszt√≥ja a 15-nek, √©s a 15 t√∂bbsz√∂r√∂se a 3-nak. ‚úÖ Megold√°s: Az 'b' √°ll√≠t√°s fogalmaz helyesen: a 3 oszt√≥ja a 15-nek. Az 'a' √°ll√≠t√°s ford√≠tva igaz. A 'c' √°ll√≠t√°s pontatlan." },
            { question: "Melyik sz√°m NEM t√∂bbsz√∂r√∂se a 4-nek?", options: { a: "12", b: "20", c: "18" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A 4 t√∂bbsz√∂r√∂sei azok a sz√°mok, amik a 4-es szorz√≥t√°bl√°ban szerepelnek. üîπ 2. L√©p√©s: Ellen≈ërizz√ºk a sz√°mokat. 12 = 3 * 4. 20 = 5 * 4. A 18 viszont nem oszthat√≥ 4-gyel marad√©k n√©lk√ºl (18:4=4, marad√©k 2). ‚úÖ Megold√°s: A 18 nem t√∂bbsz√∂r√∂se a 4-nek." },
            { question: "Melyik sz√°m NEM oszt√≥ja a 30-nak?", options: { a: "4", b: "5", c: "6" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Keress√ºk azt a sz√°mot, amellyel a 30-at nem lehet marad√©k n√©lk√ºl elosztani. üîπ 2. L√©p√©s: 30 : 4 = 7, marad√©k 2. 30 : 5 = 6. 30 : 6 = 5. ‚úÖ Megold√°s: A 4 nem oszt√≥ja a 30-nak." },
            { question: "Melyik sz√°m oszt√≥ja minden term√©szetes sz√°mnak?", options: { a: "a 0", b: "a 2", c: "az 1" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Gondoljuk v√©gig a sz√°mok tulajdons√°gait! B√°rmelyik sz√°mot elosztva 1-gyel, √∂nmag√°t kapjuk marad√©k n√©lk√ºl. üîπ 2. L√©p√©s: P√©ld√°ul 5:1=5, 17:1=17. Null√°val nem lehet osztani. ‚úÖ Megold√°s: Az 1 az egyetlen sz√°m, ami minden term√©szetes sz√°mnak oszt√≥ja." },
            { question: "Mi a 18 legnagyobb val√≥di oszt√≥ja? (A val√≥di oszt√≥ nem √∂nmaga.)", options: { a: "18", b: "9", c: "6" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Soroljuk fel a 18 √∂sszes oszt√≥j√°t: 1, 2, 3, 6, 9, 18. üîπ 2. L√©p√©s: A val√≥di oszt√≥k azok, amik nem egyenl≈ëk mag√°val a sz√°mmal. Ezek: 1, 2, 3, 6, 9. üîπ 3. L√©p√©s: Ezek k√∂z√ºl a legnagyobb a 9. ‚úÖ Megold√°s: A 18 legnagyobb val√≥di oszt√≥ja a 9." },
            { question: "Minden p√°ros sz√°m t√∂bbsz√∂r√∂se a ...", options: { a: "4-nek", b: "10-nek", c: "2-nek" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A p√°ros sz√°mok defin√≠ci√≥ja az, hogy marad√©k n√©lk√ºl oszthat√≥k 2-vel. üîπ 2. L√©p√©s: Ha egy sz√°m oszthat√≥ 2-vel, az azt jelenti, hogy t√∂bbsz√∂r√∂se a 2-nek. ‚úÖ Megold√°s: Minden p√°ros sz√°m t√∂bbsz√∂r√∂se a 2-nek." },
            { question: "Melyik a 9 legkisebb, 9-n√©l nagyobb t√∂bbsz√∂r√∂se?", options: { a: "18", b: "27", c: "1" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Soroljuk fel a 9 t√∂bbsz√∂r√∂seit: 9, 18, 27, 36... üîπ 2. L√©p√©s: Keress√ºk a legkisebbet, ami nagyobb, mint 9. Ez a sorban a k√∂vetkez≈ë sz√°m. ‚úÖ Megold√°s: A 9 legkisebb, 9-n√©l nagyobb t√∂bbsz√∂r√∂se a 18." },
            { question: "Ha 'a' oszt√≥ja 'b'-nek, akkor 'b' ... 'a'-nak.", options: { a: "oszt√≥ja", b: "t√∂bbsz√∂r√∂se", c: "egyenl≈ë vele" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Ez a k√©t fogalom defin√≠ci√≥ja. Az osz√≥ √©s a t√∂bbsz√∂r√∂s ugyanannak a kapcsolatnak a k√©t oldala. üîπ 2. L√©p√©s: P√©ld√°ul a 4 oszt√≥ja a 20-nak, ez√©rt a 20 t√∂bbsz√∂r√∂se a 4-nek. ‚úÖ Megold√°s: Ha 'a' oszt√≥ja 'b'-nek, akkor 'b' t√∂bbsz√∂r√∂se 'a'-nak." },
            { question: "Melyik sz√°m a 11-nek t√∂bbsz√∂r√∂se?", options: { a: "33", b: "23", c: "111" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Azt a sz√°mot keress√ºk, amelyik oszthat√≥ 11-gyel. üîπ 2. L√©p√©s: 33 : 11 = 3. 23 nem oszthat√≥ 11-gyel. 111 : 11 = 10, marad√©k 1. ‚úÖ Megold√°s: A 33 t√∂bbsz√∂r√∂se a 11-nek." },
            { question: "Melyik sz√°m oszt√≥ja a 42-nek?", options: { a: "8", b: "7", c: "4" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Keress√ºk azt a sz√°mot, amivel a 42 marad√©k n√©lk√ºl oszthat√≥. üîπ 2. L√©p√©s: A 42 nem oszthat√≥ 8-cal √©s 4-gyel. Viszont 42 : 7 = 6. ‚úÖ Megold√°s: A 7 oszt√≥ja a 42-nek." },
            { question: "H√°ny oszt√≥ja van a 10-nek?", options: { a: "2", b: "3", c: "4" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Soroljuk fel a 10 √∂sszes oszt√≥j√°t. üîπ 2. L√©p√©s: A 10 oszthat√≥ 1-gyel, 2-vel, 5-tel √©s 10-zel. üîπ 3. L√©p√©s: Sz√°moljuk √∂ssze ≈ëket: 4 darab van. ‚úÖ Megold√°s: A 10-nek 4 oszt√≥ja van." },
            { question: "Egy sz√°m ... √∂nmag√°nak.", options: { a: "csak oszt√≥ja", b: "oszt√≥ja √©s t√∂bbsz√∂r√∂se is", c: "csak t√∂bbsz√∂r√∂se" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Vizsg√°ljuk a 7-es p√©ld√°j√°n. 7:7=1, teh√°t a 7 oszt√≥ja √∂nmag√°nak. üîπ 2. L√©p√©s: 7 = 1 * 7, teh√°t a 7 t√∂bbsz√∂r√∂se is √∂nmag√°nak. ‚úÖ Megold√°s: Minden sz√°m (kiv√©ve a 0) oszt√≥ja √©s t√∂bbsz√∂r√∂se is √∂nmag√°nak." },
            { question: "Melyik sz√°m a 100-nak oszt√≥ja?", options: { a: "200", b: "25", c: "30" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A 100-at el kell tudnunk osztani az oszt√≥val. üîπ 2. L√©p√©s: A 200 nagyobb, mint 100, √≠gy nem lehet oszt√≥ja. 100:25=4. A 30 nem oszt√≥ja a 100-nak. ‚úÖ Megold√°s: A 25 oszt√≥ja a 100-nak." },
            { question: "Mi a 20 legkisebb val√≥di oszt√≥ja? (A val√≥di oszt√≥ nem 1.)", options: { a: "1", b: "2", c: "4" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A 20 oszt√≥i: 1, 2, 4, 5, 10, 20. üîπ 2. L√©p√©s: A val√≥di oszt√≥k, amik nem 1: 2, 4, 5, 10, 20. üîπ 3. L√©p√©s: Ezek k√∂z√ºl a legkisebb a 2. ‚úÖ Megold√°s: A 20 legkisebb, 1-n√©l nagyobb oszt√≥ja a 2." },
            { question: "H√°ny t√∂bbsz√∂r√∂se van egy 1-n√©l nagyobb term√©szetes sz√°mnak?", options: { a: "Pontosan 10.", b: "V√©gtelen sok.", c: "Annyi, mint a sz√°m √©rt√©ke." }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A t√∂bbsz√∂r√∂s√∂ket √∫gy kapjuk, hogy a sz√°mot megszorozzuk az eg√©sz sz√°mokkal (1, 2, 3, 4...). üîπ 2. L√©p√©s: Mivel v√©gtelen sok eg√©sz sz√°mmal szorozhatunk, egy sz√°mnak v√©gtelen sok t√∂bbsz√∂r√∂se van. ‚úÖ Megold√°s: Egy sz√°mnak v√©gtelen sok t√∂bbsz√∂r√∂se van." },
            { question: "Mi egy sz√°m legnagyobb oszt√≥ja?", options: { a: "√ñnmaga", b: "A fele", c: "Az 1" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Egy sz√°mot nem lehet √∂nmag√°n√°l nagyobb sz√°mmal elosztani √∫gy, hogy az eredm√©ny eg√©sz legyen. üîπ 2. L√©p√©s: Minden sz√°m oszthat√≥ √∂nmag√°val (az eredm√©ny 1). ‚úÖ Megold√°s: Egy sz√°m legnagyobb oszt√≥ja mindig √∂nmaga." },
            { question: "Melyik a 15 √©s a 20 k√∂z√∂s oszt√≥ja?", options: { a: "10", b: "3", c: "5" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A 15 oszt√≥i: 1, 3, 5, 15. A 20 oszt√≥i: 1, 2, 4, 5, 10, 20. üîπ 2. L√©p√©s: Keress√ºk a k√∂z√∂s elemeket a k√©t list√°ban. A k√∂z√∂s oszt√≥k az 1 √©s az 5. A lehet≈ës√©gek k√∂z√ºl az 5 szerepel. ‚úÖ Megold√°s: Az 5 k√∂z√∂s oszt√≥ja a 15-nek √©s a 20-nak." },
            { question: "Melyik a 4 √©s a 6 k√∂z√∂s t√∂bbsz√∂r√∂se?", options: { a: "24", b: "16", c: "18" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A 4 t√∂bbsz√∂r√∂sei: 4, 8, 12, 16, 20, 24... A 6 t√∂bbsz√∂r√∂sei: 6, 12, 18, 24... üîπ 2. L√©p√©s: Keress√ºk a k√∂z√∂s elemeket. A 12 √©s a 24 is k√∂z√∂s t√∂bbsz√∂r√∂s. A lehet≈ës√©gek k√∂z√ºl a 24 szerepel. ‚úÖ Megold√°s: A 24 k√∂z√∂s t√∂bbsz√∂r√∂se a 4-nek √©s a 6-nak." },
            { question: "Melyik sz√°mcsoportban van a 12-nek egy oszt√≥ja √âS egy t√∂bbsz√∂r√∂se?", options: { a: "5 √©s 10", b: "6 √©s 24", c: "8 √©s 16" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Vizsg√°ljuk a 'b' lehet≈ës√©get. A 6 oszt√≥ja a 12-nek? Igen (12:6=2). A 24 t√∂bbsz√∂r√∂se a 12-nek? Igen (24=2*12). üîπ 2. L√©p√©s: Ez a p√°r megfelel a felt√©telnek. A t√∂bbi p√°rban nincs ilyen kapcsolat. ‚úÖ Megold√°s: A 'b' csoportban (6 √©s 24) van egy oszt√≥ √©s egy t√∂bbsz√∂r√∂s." },
            { question: "Mi egy pr√≠msz√°m val√≥di oszt√≥inak a sz√°ma?", options: { a: "0", b: "1", c: "2" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A pr√≠msz√°m defin√≠ci√≥ szerint csak 1-gyel √©s √∂nmag√°val oszthat√≥. üîπ 2. L√©p√©s: A val√≥di oszt√≥k nem lehetnek sem 1, sem √∂nmaga a sz√°m. üîπ 3. L√©p√©s: Ebb≈ël k√∂vetkezik, hogy a pr√≠msz√°moknak nincsenek val√≥di oszt√≥ik. ‚úÖ Megold√°s: Egy pr√≠msz√°mnak 0 darab val√≥di oszt√≥ja van." },
            { question: "Ha egy sz√°m t√∂bbsz√∂r√∂se a 10-nek, akkor biztosan t√∂bbsz√∂r√∂se a ...", options: { a: "20-nak", b: "5-nek", c: "100-nak" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Ha egy sz√°m oszthat√≥ 10-zel, akkor a 10 oszt√≥ival is oszthat√≥nak kell lennie. üîπ 2. L√©p√©s: A 10 oszt√≥i az 1, 2, 5, 10. Teh√°t a sz√°m biztosan oszthat√≥ 5-tel is. ‚úÖ Megold√°s: Ha egy sz√°m t√∂bbsz√∂r√∂se a 10-nek, akkor biztosan t√∂bbsz√∂r√∂se az 5-nek is." },
            { question: "Melyik sz√°m lesz a 6-nak is √©s a 9-nek is t√∂bbsz√∂r√∂se?", options: { a: "12", b: "27", c: "36" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Keress√ºk a 6 √©s a 9 k√∂z√∂s t√∂bbsz√∂r√∂s√©t. üîπ 2. L√©p√©s: 36:6=6, teh√°t a 36 t√∂bbsz√∂r√∂se a 6-nak. 36:9=4, teh√°t a 36 t√∂bbsz√∂r√∂se a 9-nek is. A 12 √©s a 27 csak az egyiknek t√∂bbsz√∂r√∂se. ‚úÖ Megold√°s: A 36 mindkett≈ënek t√∂bbsz√∂r√∂se." },
            { question: "Egy dobozban 32 cukorka van. H√°ny f≈ës csoportnak lehet igazs√°gosan sz√©tosztani?", options: { a: "6", b: "8", c: "10" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Azt a sz√°mot keress√ºk, amelyik oszt√≥ja a 32-nek. üîπ 2. L√©p√©s: 32 nem oszthat√≥ 6-tal √©s 10-zel marad√©k n√©lk√ºl. 32 : 8 = 4. ‚úÖ Megold√°s: 8 f≈ës csoportnak lehet igazs√°gosan (marad√©k n√©lk√ºl) sz√©tosztani a cukork√°kat." }
        ];

        const questionsContainer = document.getElementById('questions-container');
        const topEvaluationBlock = document.getElementById('top-evaluation');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function shuffleOptions(options) {
            const optionsArray = Object.entries(options).map(([key, text]) => ({ key, text }));
            return shuffle([...optionsArray]);
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                const randomizedOptions = shuffleOptions(item.options);
                const optionLetters = ['a', 'b', 'c'];
                
                let optionsHTML = '';
                randomizedOptions.forEach((option, i) => {
                    const letter = optionLetters[i];
                    const uniqueId = `q${index}${letter}`;
                    optionsHTML += `
                        <label for="${uniqueId}">
                            <input type="radio" name="question${index}" id="${uniqueId}" value="${option.key}">
                            ${letter}) ${option.text}
                        </label>
                    `;
                });

                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">${optionsHTML}</div>
                        <div class="explanation" id="explanation-${index}">${item.explanation}</div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = topEvaluationBlock.querySelector('.pin-code-input').value;
            const checkBtn = topEvaluationBlock.querySelector('.check-btn');
            const resultContainer = topEvaluationBlock.querySelector('.result-container');
            const adminPanel = topEvaluationBlock.querySelector('.admin-panel');

            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('√ârv√©nytelen PIN k√≥d! K√©rj√ºk, adjon meg egy √©rv√©nyes tanul√≥i (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`K√©rj√ºk, v√°laszolj az √∂sszes k√©rd√©sre! Jelenleg ${answeredQuestions}/${shuffledData.length} k√©rd√©sre v√°laszolt√°l.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtn.disabled = true;
            topEvaluationBlock.querySelector('.pin-code-input').disabled = true;

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);
                explanationDiv.style.display = 'block';

                if (isMaster) {
                    document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                        if (radio.value === item.correctAnswer) {
                            radio.parentElement.classList.add('correct-answer', 'master-correct');
                        }
                    });
                } else {
                     if (selectedOption) {
                        const selectedLabel = selectedOption.parentElement;
                        if (selectedOption.value === item.correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct-answer', 'label-correct');
                        } else {
                            selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                             document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                                if (radio.value === item.correctAnswer) {
                                    radio.parentElement.classList.add('correct-answer');
                                }
                            });
                        }
                    } else { // Handle not answered questions for student mode after check
                         document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                            if (radio.value === item.correctAnswer) {
                                radio.parentElement.classList.add('correct-answer');
                            }
                        });
                    }
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            if (!isMaster) {
                resultContainer.innerHTML = `Eredm√©nyed: ${score} / ${shuffledData.length} (${percentage}%)`;
            } else {
                 resultContainer.innerHTML = `Mester m√≥d: Helyes v√°laszok √©s magyar√°zatok felfedve.`;
            }


            if (isMaster) {
                adminPanel.style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            
            const mainCheckBtn = topEvaluationBlock.querySelector('.check-btn');
            const mainPinInput = topEvaluationBlock.querySelector('.pin-code-input');

            mainCheckBtn.addEventListener('click', checkAnswers);
            mainPinInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
        });

    </script>
</body>
</html>