<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gyakorló Kvíz - Az erő nyomatéka</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: auto;
        }
        h1 {
            color: #D50000; /* Piros */
            text-align: center;
            border-bottom: 2px solid #D50000; /* Piros */
            padding-bottom: 10px;
        }
        #quiz-container {
            background-color: #ffffff; /* Fehér */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .question-block {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .question-block:last-of-type {
            border-bottom: none;
        }
        .question-text {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        .options-container label {
            display: block;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 1px solid #ddd;
        }
        .options-container label:hover {
            background-color: #f9f9f9;
        }
        .options-container input[type="radio"] {
            margin-right: 10px;
        }
        .explanation {
            display: none;
            margin-top: 15px;
            padding: 10px;
            background-color: #e8f5e9; /* Világos zöld */
            border-left: 4px solid #008751; /* Zöld */
            border-radius: 4px;
        }
        .control-panel {
            text-align: center;
            padding: 20px;
            background-color: #ffffff; /* Fehér */
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .pin-input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }
        .check-button {
            padding: 10px 20px;
            background-color: #D50000; /* Piros */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }
        .check-button:hover {
            background-color: #a30000; /* Sötétebb piros */
        }
        .results {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 15px;
        }
        /* Színkódok a kiértékeléshez */
        .correct-answer-reveal {
            background-color: #c8e6c9 !important; /* Zöld */
            border-color: #008751 !important; /* Zöld */
        }
        .student-incorrect {
            background-color: #f8d7da !important; /* Piros */
            border-color: #f5c6cb !important;
            color: #721c24 !important;
        }
        .admin-panel {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 5px;
            text-align: center;
        }
        .admin-panel h3 {
            margin-top: 0;
            color: #856404;
        }
    </style>
</head>
<body>

    <h1>Gyakorló Kvíz: Az erő nyomatéka</h1>

    <div class="control-panel">
        <input type="password" class="pin-input" placeholder="PIN kód">
        <button class="check-button">Ellenőrzés</button>
        <div class="results"></div>
        <div class="admin-panel">
            <h3>Adminisztrációs Panel</h3>
            <p>A helyes válaszok és a magarázatok feloldva.</p>
            <p>Helyes válaszok eloszlása (a/b/c): <span class="dist-a"></span> / <span class="dist-b"></span> / <span class="dist-c"></span></p>
        </div>
    </div>

    <div id="quiz-container">
        <!-- A kvízkérdések ide generálódnak -->
    </div>

    <div class="control-panel">
        <input type="password" class="pin-input" placeholder="PIN kód">
        <button class="check-button">Ellenőrzés</button>
        <div class="results"></div>
        <div class="admin-panel">
            <h3>Adminisztrációs Panel</h3>
            <p>A helyes válaszok és a magarázatok feloldva.</p>
            <p>Helyes válaszok eloszlása (a/b/c): <span class="dist-a"></span> / <span class="dist-b"></span> / <span class="dist-c"></span></p>
        </div>
    </div>

    <script>
        const quizData = [
            // Kérdések 'a' helyes válasszal (8 db)
            {
                question: "Mi a forgatónyomaték mértékegysége?",
                answers: { a: "newtonméter (N·m)", b: "newton (N)", c: "joule (J)" },
                correctAnswer: 'a',
                explanation: "A forgatónyomaték az erő és az erőkar szorzata. Az erő mértékegysége a newton (N), az erőkaré (távolság) pedig a méter (m), így a szorzatuké a newtonméter (N·m). ✅ Megoldás: newtonméter (N·m)."
            },
            {
                question: "Egy csavart 10 N erővel próbálunk meglazítani egy 0,2 m hosszú csavarkulccsal. Mekkora a forgatónyomaték?",
                answers: { a: "2 N·m", b: "50 N·m", c: "10,2 N·m" },
                correctAnswer: 'a',
                explanation: "A forgatónyomaték az erő és az erőkar szorzata: M = F ⋅ k. Ebben az esetben M = 10 N ⋅ 0,2 m = 2 N·m. ✅ Megoldás: 2 N·m."
            },
            {
                question: "Miért van a kilincs az ajtó forgástengelyétől (a zsanéroktól) a lehető legtávolabb?",
                answers: { a: "Mert így a legnagyobb az erőkar, és a legkisebb erővel lehet kinyitni az ajtót.", b: "Mert így esztétikusabb.", c: "Mert ott a legerősebb az ajtó." },
                correctAnswer: 'a',
                explanation: "Ugyanakkora forgatónyomaték eléréséhez kisebb erőre van szükség, ha az erőkar nagyobb. A kilincs távoli elhelyezésével maximalizáljuk az erőkart, így kényelmesen, kis erővel tudjuk működtetni az ajtót. ✅ Megoldás: Mert így a legnagyobb az erőkar, és a legkisebb erővel lehet kinyitni az ajtót."
            },
            {
                question: "Mi az erőkar?",
                answers: { a: "Az erő hatásvonalának a forgástengelytől mért távolsága.", b: "Az erő nagysága.", c: "Az erő iránya." },
                correctAnswer: 'a',
                explanation: "Az erőkar a forgástengely és az erő hatásvonala (az az egyenes, amely mentén az erő hat) közötti merőleges távolság. ✅ Megoldás: Az erő hatásvonalának a forgástengelytől mért távolsága."
            },
            {
                question: "Mikor van egy test forgási egyensúlyban?",
                answers: { a: "Ha a rá ható forgatónyomatékok (előjeles) összege nulla.", b: "Ha a rá ható erők összege nulla.", c: "Ha nem mozog." },
                correctAnswer: 'a',
                explanation: "Egy test forgási állapota akkor nem változik (vagy nyugalomban van, vagy állandó sebességgel forog), ha a rá ható, forgatást létrehozó hatások kiegyenlítik egymást. Ez azt jelenti, hogy a jobbra és balra forgató nyomatékok összege nulla. ✅ Megoldás: Ha a rá ható forgatónyomatékok (előjeles) összege nulla."
            },
            {
                question: "Egy libikóka egyik végén egy 300 N súlyú gyerek ül a forgástengelytől 2 m távolságra. Mekkora forgatónyomatékot fejt ki?",
                answers: { a: "600 N·m", b: "150 N·m", c: "302 N·m" },
                correctAnswer: 'a',
                explanation: "A forgatónyomaték M = F ⋅ k = 300 N ⋅ 2 m = 600 N·m. ✅ Megoldás: 600 N·m."
            },
            {
                question: "Hogyan növelhetjük egy csavar meglazításához szükséges forgatónyomatékot anélkül, hogy nagyobb erőt fejtenénk ki?",
                answers: { a: "Hosszabb csavarkulcsot használunk.", b: "Rövidebb csavarkulcsot használunk.", c: "Megolajozzuk a csavart." },
                correctAnswer: 'a',
                explanation: "Mivel a forgatónyomaték az erő és az erőkar szorzata, ha az erőt nem tudjuk növelni, az erőkart kell megnövelni. Egy hosszabb csavarkulcs nagyobb erőkart biztosít, így ugyanazzal az erővel nagyobb forgatónyomatékot hoz létre. ✅ Megoldás: Hosszabb csavarkulcsot használunk."
            },
            {
                question: "Melyik állítás írja le az emelők törvényét?",
                answers: { a: "Erő szorozva erőkar egyenlő teher szorozva teherkar.", b: "Erő egyenlő teher.", c: "Erőkar egyenlő teherkar." },
                correctAnswer: 'a',
                explanation: "Az emelők egyensúlyának feltétele, hogy az egyik oldalon ható forgatónyomaték (Erő × erőkar) megegyezzen a másik oldalon ható forgatónyomatékkal (Teher × teherkar). Képlettel: F₁⋅k₁ = F₂⋅k₂. ✅ Megoldás: Erő szorozva erőkar egyenlő teher szorozva teherkar."
            },
            // Kérdések 'b' helyes válasszal (9 db)
            {
                question: "Mit jellemez a forgatónyomaték?",
                answers: { a: "Az erő haladó mozgást létrehozó hatását.", b: "Az erő forgató hatását.", c: "Az erő gyorsító hatását." },
                correctAnswer: 'b',
                explanation: "A forgatónyomaték (vagy nyomaték) az a fizikai mennyiség, amely megmutatja, hogy egy erő mekkora mértékben képes elforgatni egy testet egy adott tengely körül. ✅ Megoldás: Az erő forgató hatását."
            },
            {
                question: "Egy libikóka egyensúlyban van. A bal oldalán egy 400 N súlyú gyerek ül 1,5 méterre a tengelytől. Milyen messze ül a jobb oldalon egy 300 N súlyú gyerek?",
                answers: { a: "1,5 m", b: "2 m", c: "1 m" },
                correctAnswer: 'b',
                explanation: "Az egyensúlyhoz a két oldali forgatónyomatéknak egyenlőnek kell lennie. Bal oldali nyomaték: 400 N ⋅ 1,5 m = 600 N·m. A jobb oldali nyomatéknak is 600 N·m-nek kell lennie. Teherkar = Nyomaték / Erő = 600 N·m / 300 N = 2 m. ✅ Megoldás: 2 m."
            },
            {
                question: "Ha egy erő hatásvonala átmegy a forgástengelyen, akkor a forgatónyomatéka...",
                answers: { a: "...maximális.", b: "...nulla.", c: "...negatív." },
                correctAnswer: 'b',
                explanation: "Ha az erő hatásvonala átmegy a forgástengelyen, akkor az erőkar hossza nulla. Mivel a forgatónyomaték az erő és az erőkar szorzata, a nyomaték is nulla lesz. Ilyen erővel nem lehet forgatni, csak tolni vagy húzni a tengelyt. ✅ Megoldás: ...nulla."
            },
            {
                question: "Melyik állítás igaz a forgatónyomatékra?",
                answers: { a: "Skalármennyiség.", b: "Vektormennyiség.", c: "Nincs mértékegysége." },
                correctAnswer: 'b',
                explanation: "A forgatónyomaték vektormennyiség, mert az iránya is számít (hogy az óramutató járásával megegyező vagy ellentétes irányba forgat-e). Megegyezés szerint az óramutató járásával ellentétes forgásirány a pozitív. ✅ Megoldás: Vektormennyiség."
            },
            {
                question: "Milyen irányú erőt kell kifejteni egy csavarkulcsra a maximális forgatónyomaték eléréséhez?",
                answers: { a: "A kulcs szárával párhuzamosat.", b: "A kulcs szárára merőlegeset.", c: "45°-os szögben." },
                correctAnswer: 'b',
                explanation: "A forgatónyomaték akkor a legnagyobb, ha az erő és az erőkar merőleges egymásra. Ekkor az erő teljes egésze a forgatásra fordítódik. ✅ Megoldás: A kulcs szárára merőlegeset."
            },
            {
                question: "A testek forgási egyensúlyának feltétele, hogy...",
                answers: { a: "...a jobbra forgató nyomatékok összege nagyobb legyen, mint a balra forgatóké.", b: "...a jobbra forgató és a balra forgató nyomatékok összege nulla legyen.", c: "...a balra forgató nyomatékok összege nagyobb legyen, mint a jobbra forgatóké." },
                correctAnswer: 'b',
                explanation: "A forgási egyensúly akkor áll fenn, ha a test forgási állapota nem változik. Ehhez az szükséges, hogy az óramutató járásával megegyező irányba forgató nyomatékok összege pontosan kiegyenlítse az ellentétes irányba forgató nyomatékok összegét. ✅ Megoldás: ...a jobbra forgató és a balra forgató nyomatékok összege nulla legyen."
            },
            {
                question: "Melyik egyszerű gép működése alapul a forgatónyomaték egyensúlyán?",
                answers: { a: "Lejtő", b: "Emelő", c: "Ék" },
                correctAnswer: 'b',
                explanation: "Az emelő (pl. mérleghinta, feszítővas) egy forgástengely körül elforgatható rúd. Működésének alapja az emelő két oldalára ható forgatónyomatékok egyensúlya. ✅ Megoldás: Emelő."
            },
            {
                question: "Hogyan lehet egyensúlyba hozni egy libikókát, amin egy nehezebb és egy könnyebb gyerek ül?",
                answers: { a: "A könnyebb gyerek üljön közelebb a tengelyhez.", b: "A nehezebb gyerek üljön közelebb a tengelyhez.", c: "Mindketten üljenek a végére." },
                correctAnswer: 'b',
                explanation: "Az egyensúlyhoz (F₁⋅k₁ = F₂⋅k₂) a nagyobb erőhöz (nehezebb gyerek) kisebb erőkar, a kisebb erőhöz (könnyebb gyerek) pedig nagyobb erőkar kell. Tehát a nehezebb gyereknek kell közelebb ülnie a forgáspont_h_oz. ✅ Megoldás: A nehezebb gyerek üljön közelebb a tengelyhez."
            },
            {
                question: "Egy 2 méter hosszú deszka közepén van a forgástengely. A bal végére 10 N erőt fejtünk ki. Mekkora erővel kell lenyomni a jobb végét az egyensúlyhoz?",
                answers: { a: "20 N", b: "10 N", c: "5 N" },
                correctAnswer: 'b',
                explanation: "Mivel a forgástengely középen van, az erőkarok egyenlőek (1 m). Az emelők törvénye szerint, ha az erőkarok egyenlők, akkor az egyensúlyhoz az erőknek is egyenlőknek kell lenniük. ✅ Megoldás: 10 N."
            },
            // Kérdések 'c' helyes válasszal (8 db)
            {
                question: "Mi a forgatónyomaték képlete?",
                answers: { a: "M = F / k", b: "M = F + k", c: "M = F ⋅ k" },
                correctAnswer: 'c',
                explanation: "A forgatónyomaték (M) az erő (F) és az erőkar (k) szorzataként számítható ki. ✅ Megoldás: M = F ⋅ k."
            },
            {
                question: "Ha kétszer akkora erővel hatunk ugyanakkora erőkarral, a forgatónyomaték...",
                answers: { a: "...nem változik.", b: "...a felére csökken.", c: "...a kétszeresére nő." },
                correctAnswer: 'c',
                explanation: "A forgatónyomaték egyenesen arányos az erő nagyságával. Ha az erő duplázódik, a forgatónyomaték is a kétszeresére nő. ✅ Megoldás: ...a kétszeresére nő."
            },
            {
                question: "Ha ugyanakkora erővel kétszer akkora erőkarral hatunk, a forgatónyomaték...",
                answers: { a: "...nem változik.", b: "...a felére csökken.", c: "...a kétszeresére nő." },
                correctAnswer: 'c',
                explanation: "A forgatónyomaték egyenesen arányos az erőkarral. Ha az erőkar duplázódik, a forgatónyomaték is a kétszeresére nő. ✅ Megoldás: ...a kétszeresére nő."
            },
            {
                question: "Egy mérleghinta egyensúlyban van. Mi igaz a két oldalon ülő gyerekek által kifejtett forgatónyomatékokra?",
                answers: { a: "A bal oldali nagyobb.", b: "A jobb oldali nagyobb.", c: "A két forgatónyomaték egyenlő nagyságú." },
                correctAnswer: 'c',
                explanation: "A forgási egyensúly feltétele, hogy a jobbra és balra forgató nyomatékok összege nulla legyen. Ez azt jelenti, hogy a két oldalon a forgatónyomatékok nagysága pontosan megegyezik. ✅ Megoldás: A két forgatónyomaték egyenlő nagyságú."
            },
            {
                question: "Melyik állítás HAMIS?",
                answers: { a: "A forgatónyomaték az erő forgató hatását méri.", b: "Az erőkar a forgástengelytől mért távolság.", c: "A nagyobb erő mindig nagyobb forgatónyomatékot hoz létre." },
                correctAnswer: 'c',
                explanation: "Ez az állítás hamis. A forgatónyomaték az erő ÉS az erőkar szorzata. Lehetséges, hogy egy nagyon nagy erő kis erőkarral kisebb forgatónyomatékot hoz létre, mint egy kisebb erő nagy erőkarral. ✅ Megoldás: A nagyobb erő mindig nagyobb forgatónyomatékot hoz létre."
            },
            {
                question: "Egy kormánykerék elfordításakor erőt fejtünk ki. Hol van a forgástengely?",
                answers: { a: "A kezünknél.", b: "Az autó kerekénél.", c: "A kormánykerék középpontjában." },
                correctAnswer: 'c',
                explanation: "A kormánykerék a középső tengelye körül forog el. Ez a forgástengely. Az erőt a kerék peremén fejtjük ki, így maximalizálva az erőkart. ✅ Megoldás: A kormánykerék középpontjában."
            },
            {
                question: "Melyik mennyiség NEM szerepel a forgatónyomaték képletében?",
                answers: { a: "Erő", b: "Erőkar", c: "Tömeg" },
                correctAnswer: 'c',
                explanation: "A forgatónyomaték képlete M = F ⋅ k. Ebben az erő (F) és az erőkar (k) szerepel. A test tömege közvetlenül nem része a képletnek (bár a súlyerő kiszámításához szükséges lehet). ✅ Megoldás: Tömeg."
            },
            {
                question: "Ha egy erőt a forgástengelyhez közelebb fejtünk ki, az erőkar...",
                answers: { a: "...nő.", b: "...nem változik.", c: "...csökken." },
                correctAnswer: 'c',
                explanation: "Az erőkar a forgástengelytől mért távolság. Ha közelebb megyünk a tengelyhez, ez a távolság, tehát az erőkar is csökken. ✅ Megoldás: ...csökken."
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const checkButtons = document.querySelectorAll('.check-button');
        const pinInputs = document.querySelectorAll('.pin-input');
        const resultsContainers = document.querySelectorAll('.results');
        const adminPanels = document.querySelectorAll('.admin-panel');

        let shuffledQuizData = [];
        let internalCorrectAnswers = { a: 0, b: 0, c: 0 };

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function loadQuiz() {
            quizData.forEach(q => {
                internalCorrectAnswers[q.correctAnswer]++;
            });

            shuffledQuizData = [...quizData];
            shuffleArray(shuffledQuizData);
            
            let quizHTML = '';
            shuffledQuizData.forEach((q, index) => {
                quizHTML += `<div class="question-block" id="q-${index}">`;
                quizHTML += `<div class="question-text">${index + 1}. ${q.question}</div>`;
                quizHTML += `<div class="options-container">`;

                const options = Object.entries(q.answers);
                shuffleArray(options);

                options.forEach(([key, value]) => {
                    quizHTML += `<label>
                                    <input type="radio" name="question${index}" value="${key}">
                                    ${value}
                                 </label>`;
                });

                quizHTML += `</div>`;
                quizHTML += `<div class="explanation" id="exp-${index}">${q.explanation}</div>`;
                quizHTML += `</div>`;
            });
            quizContainer.innerHTML = quizHTML;
        }

        function checkAnswers(event) {
            // Find which control panel triggered the event
            const currentPanel = event.target.closest('.control-panel');
            const pinInput = currentPanel.querySelector('.pin-input');
            const pin = pinInput.value;
            
            const isMasterPin = pin === '121909';
            const isStudentPin = pin >= 100001 && pin <= 100020;
            let score = 0;
            let allAnswered = true;

            if (!isMasterPin) {
                 for (let i = 0; i < shuffledQuizData.length; i++) {
                    const selectedOption = document.querySelector(`input[name="question${i}"]:checked`);
                    if (!selectedOption) {
                        allAnswered = false;
                        break;
                    }
                }
            }
           
            if (!isMasterPin && !isStudentPin) {
                resultsContainers.forEach(container => {
                    container.textContent = "Érvénytelen PIN kód!";
                    container.style.color = '#D50000';
                });
                return;
            }

            if (!allAnswered && !isMasterPin) {
                resultsContainers.forEach(container => {
                    container.textContent = "Kérlek, válaszold meg az összes kérdést az ellenőrzés előtt!";
                    container.style.color = 'orange';
                });
                return;
            }
            
            resultsContainers.forEach(container => container.style.color = '#333');

            shuffledQuizData.forEach((q, index) => {
                const explanation = document.getElementById(`exp-${index}`);
                explanation.style.display = 'block';

                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);

                document.querySelectorAll(`input[name="question${index}"]`).forEach(option => {
                    const label = option.parentElement;
                    option.disabled = true;

                    // Reveal the correct answer for everyone
                    if (option.value === q.correctAnswer) {
                        label.classList.add('correct-answer-reveal');
                    }
                    
                    // Color student's specific choice if a student PIN is used
                    if(isStudentPin && selectedOption && selectedOption === option){
                        if(selectedOption.value !== q.correctAnswer){
                             label.classList.add('student-incorrect');
                        }
                    }
                });
                
                if (selectedOption && selectedOption.value === q.correctAnswer) {
                    score++;
                }
            });

            if(isMasterPin){
                resultsContainers.forEach(container => container.textContent = "Minden válasz és magyarázat felfedve.");
                adminPanels.forEach(panel => {
                    panel.style.display = 'block';
                    panel.querySelector('.dist-a').textContent = internalCorrectAnswers.a;
                    panel.querySelector('.dist-b').textContent = internalCorrectAnswers.b;
                    panel.querySelector('.dist-c').textContent = internalCorrectAnswers.c;
                });
            }

            if(isStudentPin){
                const percentage = Math.round((score / shuffledQuizData.length) * 100);
                resultsContainers.forEach(container => {
                    container.innerHTML = `Eredményed: ${score} / ${shuffledQuizData.length} (${percentage}%)`;
                });
            }
        }
        
        pinInputs.forEach(input => {
            input.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    // Pass the event to the handler to identify the correct panel
                    checkAnswers(event);
                }
            });
             // Sync PIN inputs
            input.addEventListener('input', (e) => {
                pinInputs.forEach(otherInput => {
                    if (otherInput !== e.target) {
                        otherInput.value = e.target.value;
                    }
                });
            });
        });

        checkButtons.forEach(button => {
            button.addEventListener('click', checkAnswers);
        });

        document.addEventListener('DOMContentLoaded', loadQuiz);
    </script>

</body>
</html>