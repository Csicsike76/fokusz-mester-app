<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KvÃ­z: 7. OsztÃ¡ly - Ã‰v vÃ©gi Ã¶sszefoglalÃ³</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
        :root{--primary-color:#007BFF;--secondary-color:#f1f1f1;--background-color:#f8f9fa;--text-color:#333;--correct-color:#28a745;--correct-bg:#d4edda;--incorrect-color:#dc3545;--incorrect-bg:#f8d7da;--neutral-border:#dee2e6}body{font-family:'Poppins',sans-serif;background-color:var(--background-color);color:var(--text-color);margin:0;padding:20px;display:flex;justify-content:center}.quiz-container{width:100%;max-width:800px;background-color:#fff;border-radius:15px;box-shadow:0 4px 20px rgba(0,0,0,.1);overflow:hidden}header{padding:20px;background:linear-gradient(90deg,#cd2a3e 33.3%,#fff 33.3%,#fff 66.6%,#477050 66.6%);text-align:center}header h1{color:var(--text-color);margin:0;font-size:2em;text-shadow:1px 1px 3px rgba(0,0,0,.2)}main{padding:30px}#quiz-form{display:flex;flex-direction:column;gap:25px}.question-block{border:1px solid var(--neutral-border);border-radius:10px;padding:20px;transition:box-shadow .3s}.question-block:focus-within{box-shadow:0 0 10px rgba(0,123,255,.25)}.question-text{font-weight:600;margin-bottom:15px;font-size:1.1em}.options{display:flex;flex-direction:column;gap:10px}.options label{display:flex;align-items:center;padding:15px;border:1px solid var(--neutral-border);border-radius:8px;cursor:pointer;transition:background-color .3s,border-color .3s}.options label:hover{background-color:#f8f9fa}.options input[type=radio]{margin-right:15px;accent-color:var(--primary-color)}.explanation{margin-top:15px;padding:15px;background-color:var(--secondary-color);border-left:5px solid var(--primary-color);border-radius:5px;display:none;font-size:.95em}.explanation strong{display:block;margin-bottom:5px}.evaluation-block{margin-bottom:20px}.controls-container{padding:20px;background-color:#fdfdfd;border:1px dashed var(--neutral-border);border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:15px}.controls-container label{font-weight:600}.pin-code-input{padding:10px;border-radius:5px;border:1px solid var(--neutral-border);width:120px;text-align:center;font-size:1em}.check-btn{padding:12px 25px;background-color:var(--primary-color);color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1em;font-weight:600;transition:background-color .3s,transform .1s}.check-btn:hover{background-color:#0056b3}.check-btn:active{transform:scale(.98)}.check-btn:disabled{background-color:#aaa;cursor:not-allowed}.result-container{margin-top:15px;text-align:center;font-size:1.2em;font-weight:700;min-height:1.5em}.admin-panel{margin-top:10px;padding:15px;background-color:#fffbe6;border:1px solid #ffeeba;border-radius:8px;text-align:center;font-weight:600;color:#856404}.correct-answer{background-color:var(--correct-bg)!important;border-color:var(--correct-color)!important}.incorrect-answer{background-color:var(--incorrect-bg)!important;border-color:var(--incorrect-color)!important}.master-correct::before{content:'âœ… Helyes: ';font-weight:700}.label-correct::before{content:'âœ… '}.label-incorrect::before{content:'âŒ '}@media (max-width:600px){body{padding:10px}main{padding:15px}header h1{font-size:1.5em}}
    </style>
</head>
<body>
    <div class="quiz-container">
        <header><h1>KvÃ­z: 7. OsztÃ¡ly - Ã‰v vÃ©gi Ã¶sszefoglalÃ³</h1></header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN kÃ³d:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">EllenÅ‘rzÃ©s</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;"><p>Mester mÃ³d aktÃ­v. VÃ¡laszok eloszlÃ¡sa: 8 'a', 9 'b', 8 'c'.</p></div>
            </div>
            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">
            <form id="quiz-form" autocomplete="off"><div id="questions-container"></div></form>
        </main>
    </div>
    <script>
        const quizData = [
            { question: "Egy derÃ©kszÃ¶gÅ± hÃ¡romszÃ¶g befogÃ³i 5 cm Ã©s 12 cm. Milyen hosszÃº az Ã¡tfogÃ³ja?", options: { a: "17 cm", b: "13 cm", c: "7 cm" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: Alkalmazzuk a Pitagorasz-tÃ©telt: aÂ² + bÂ² = cÂ². ğŸ”¹ 2. LÃ©pÃ©s: 5Â² + 12Â² = 25 + 144 = 169. ğŸ”¹ 3. LÃ©pÃ©s: c = âˆš169 = 13 cm. âœ… MegoldÃ¡s: 13 cm." },
            { question: "Mi a (2x - 3y) + (x + 5y) algebrai kifejezÃ©s Ã¶sszevont alakja?", options: { a: "3x + 2y", b: "3x + 8y", c: "2x + 8y" }, correctAnswer: "a", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: Vonjuk Ã¶ssze az egynemÅ± tagokat. Az x-es tagok: 2x + x = 3x. ğŸ”¹ 2. LÃ©pÃ©s: Az y-os tagok: -3y + 5y = 2y. âœ… MegoldÃ¡s: 3x + 2y." },
            { question: "Egy kÃ¶r Ã¡tmÃ©rÅ‘je 20 cm. Mekkora a kerÃ¼lete?", options: { a: "10Ï€ cm", b: "20Ï€ cm", c: "100Ï€ cm" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A kÃ¶r kerÃ¼letÃ©nek kÃ©plete Ã¡tmÃ©rÅ‘vel: K = d * Ï€. ğŸ”¹ 2. LÃ©pÃ©s: K = 20 * Ï€ = 20Ï€ cm. âœ… MegoldÃ¡s: 20Ï€ cm." },
            { question: "Melyik szÃ¡m normÃ¡lalakja 3,45 * 10Â³?", options: { a: "345", b: "0,0345", c: "3450" }, correctAnswer: "c", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A 10Â³ azt jelenti, hogy 1000-rel kell szorozni. ğŸ”¹ 2. LÃ©pÃ©s: A tizedesvesszÅ‘t 3 hellyel kell jobbra mozgatni: 3,45 -> 34,5 -> 345,0 -> 3450. âœ… MegoldÃ¡s: 3450." },
            { question: "KÃ©t hasonlÃ³ hÃ¡romszÃ¶g hasonlÃ³sÃ¡gi arÃ¡nya 2. A kisebbik terÃ¼lete 15 cmÂ². Mekkora a nagyobbik terÃ¼lete?", options: { a: "30 cmÂ²", b: "60 cmÂ²", c: "150 cmÂ²" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A terÃ¼letek arÃ¡nya a hasonlÃ³sÃ¡g arÃ¡nyÃ¡nak nÃ©gyzetÃ©vel (kÂ²) egyenlÅ‘. Itt k=2, tehÃ¡t kÂ²=4. ğŸ”¹ 2. LÃ©pÃ©s: A nagyobbik terÃ¼lete a kisebbik terÃ¼letÃ©nek 4-szerese: 15 cmÂ² * 4 = 60 cmÂ². âœ… MegoldÃ¡s: 60 cmÂ²." },
            { question: "Mi az xÂ² * xÂ³ mÅ±velet eredmÃ©nye?", options: { a: "xâµ", b: "xâ¶", c: "2xâµ" }, correctAnswer: "a", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: Azonos alapÃº hatvÃ¡nyok szorzÃ¡sakor a kitevÅ‘ket Ã¶sszeadjuk. ğŸ”¹ 2. LÃ©pÃ©s: xÂ² * xÂ³ = xÂ²âºÂ³ = xâµ. âœ… MegoldÃ¡s: xâµ." },
            { question: "Egy 60Â°-os kÃ¶zÃ©pponti szÃ¶ghÃ¶z mekkora kerÃ¼leti szÃ¶g tartozik ugyanazon az Ã­ven?", options: { a: "60Â°", b: "120Â°", c: "30Â°" }, correctAnswer: "c", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A kerÃ¼leti Ã©s kÃ¶zÃ©pponti szÃ¶gek tÃ©tele szerint a kerÃ¼leti szÃ¶g feleakkora, mint a hozzÃ¡ tartozÃ³ kÃ¶zÃ©pponti szÃ¶g. ğŸ”¹ 2. LÃ©pÃ©s: 60Â° / 2 = 30Â°. âœ… MegoldÃ¡s: 30Â°." },
            { question: "Mekkora egy szabÃ¡lyos hatszÃ¶g egy belsÅ‘ szÃ¶ge?", options: { a: "108Â°", b: "120Â°", c: "60Â°" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A szabÃ¡lyos n-szÃ¶g egy belsÅ‘ szÃ¶gÃ©nek kÃ©plete: (n-2)*180Â°/n. ğŸ”¹ 2. LÃ©pÃ©s: HatszÃ¶g esetÃ©n n=6. (6-2)*180Â°/6 = 4*180Â°/6 = 4*30Â° = 120Â°. âœ… MegoldÃ¡s: 120Â°." },
            { question: "Mit Ã¡llÃ­t ThalÃ©sz tÃ©tele?", options: { a: "Minden derÃ©kszÃ¶gÅ± hÃ¡romszÃ¶g kÃ¶rÃ© Ã­rhatÃ³ kÃ¶r.", b: "A kÃ¶r Ã¡tmÃ©rÅ‘je feletti kerÃ¼leti szÃ¶g mindig derÃ©kszÃ¶g (90Â°).", c: "aÂ²+bÂ²=cÂ²" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: ThalÃ©sz tÃ©tele a kÃ¶r Ã¡tmÃ©rÅ‘je Ã©s a kÃ¶rvonal egy pontja Ã¡ltal alkotott hÃ¡romszÃ¶grÅ‘l szÃ³l. ğŸ”¹ 2. LÃ©pÃ©s: A tÃ©tel kimondja, hogy az Ã¡tmÃ©rÅ‘vel szemkÃ¶zti szÃ¶g mindig derÃ©kszÃ¶g. âœ… MegoldÃ¡s: A kÃ¶r Ã¡tmÃ©rÅ‘je feletti kerÃ¼leti szÃ¶g mindig derÃ©kszÃ¶g." },
            { question: "Egy derÃ©kszÃ¶gÅ± hÃ¡romszÃ¶g Ã¡tfogÃ³ja 25, egyik befogÃ³ja 7. Mekkora a mÃ¡sik befogÃ³?", options: { a: "24", b: "18", c: "âˆš576" }, correctAnswer: "a", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: Pitagorasz-tÃ©tel: bÂ² = cÂ² - aÂ². ğŸ”¹ 2. LÃ©pÃ©s: bÂ² = 25Â² - 7Â² = 625 - 49 = 576. ğŸ”¹ 3. LÃ©pÃ©s: b = âˆš576 = 24. A âˆš576 is helyes, de a kiszÃ¡molt Ã©rtÃ©k a jobb. âœ… MegoldÃ¡s: 24." },
            { question: "Hogyan Ã­rjuk fel az 'egy szÃ¡m Ã¶tszÃ¶rÃ¶sÃ©nÃ©l 3-mal kisebb szÃ¡mot' algebrai kifejezÃ©ssel?", options: { a: "5x - 3", b: "3x - 5", c: "5(x-3)" }, correctAnswer: "a", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A 'szÃ¡m' legyen x. Az 'Ã¶tszÃ¶rÃ¶se' 5x. ğŸ”¹ 2. LÃ©pÃ©s: EnnÃ©l '3-mal kisebb', tehÃ¡t kivonunk belÅ‘le 3-at. âœ… MegoldÃ¡s: 5x - 3." },
            { question: "Egy 5 cm sugarÃº kÃ¶r terÃ¼lete...", options: { a: "10Ï€ cmÂ²", b: "25Ï€ cmÂ²", c: "5Ï€ cmÂ²" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A kÃ¶r terÃ¼letÃ©nek kÃ©plete T = rÂ² * Ï€. ğŸ”¹ 2. LÃ©pÃ©s: T = 5Â² * Ï€ = 25Ï€ cmÂ². âœ… MegoldÃ¡s: 25Ï€ cmÂ²." },
            { question: "Mi az (xÂ³)â´ mÅ±velet eredmÃ©nye?", options: { a: "xâ·", b: "xâ¸Â¹", c: "xÂ¹Â²" }, correctAnswer: "c", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: HatvÃ¡ny hatvÃ¡nyozÃ¡sakor a kitevÅ‘ket Ã¶sszeszorozzuk. ğŸ”¹ 2. LÃ©pÃ©s: (xÂ³)â´ = xÂ³*â´ = xÂ¹Â². âœ… MegoldÃ¡s: xÂ¹Â²." },
            { question: "Melyik szÃ¡m normÃ¡lalak?", options: { a: "12 * 10Â³", b: "5,67 * 10â»â´", c: "0,5 * 10â¶" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A normÃ¡lalak feltÃ©tele, hogy az elsÅ‘ szorzÃ³tÃ©nyezÅ‘ (a) 1 â‰¤ |a| < 10 kÃ¶zÃ© essen. ğŸ”¹ 2. LÃ©pÃ©s: A 12 Ã©s a 0,5 nem esik ebbe a tartomÃ¡nyba. Az 5,67 viszont igen. âœ… MegoldÃ¡s: 5,67 * 10â»â´." },
            { question: "Egy derÃ©kszÃ¶gÅ± hÃ¡romszÃ¶g Î± szÃ¶gÃ©vel szemkÃ¶zti befogÃ³ 6, az Ã¡tfogÃ³ 10. Mi a sin(Î±)?", options: { a: "6/10 = 0,6", b: "8/10 = 0,8", c: "6/8 = 0,75" }, correctAnswer: "a", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A szinusz definÃ­ciÃ³ja: sin(Î±) = szemkÃ¶zti befogÃ³ / Ã¡tfogÃ³. ğŸ”¹ 2. LÃ©pÃ©s: sin(Î±) = 6 / 10 = 0,6. âœ… MegoldÃ¡s: 0,6." },
            { question: "Egy hÃºrnÃ©gyszÃ¶g egyik szÃ¶ge 110Â°. Mekkora a vele szemkÃ¶zti szÃ¶g?", options: { a: "110Â°", b: "70Â°", c: "250Â°" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A hÃºrnÃ©gyszÃ¶gek tÃ©tele szerint a szemkÃ¶zti szÃ¶gek Ã¶sszege mindig 180Â°. ğŸ”¹ 2. LÃ©pÃ©s: 180Â° - 110Â° = 70Â°. âœ… MegoldÃ¡s: 70Â°." },
            { question: "Melyik Ã¡llÃ­tÃ¡s HAMIS?", options: { a: "Minden nÃ©gyzet rombusz.", b: "Minden trapÃ©z paralelogramma.", c: "Minden tÃ©glalap hÃºrnÃ©gyszÃ¶g." }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A nÃ©gyzetnek minden oldala egyenlÅ‘ (rombusz). A tÃ©glalap szemkÃ¶zti szÃ¶geinek Ã¶sszege 90+90=180 (hÃºrnÃ©gyszÃ¶g). ğŸ”¹ 2. LÃ©pÃ©s: A trapÃ©znak csak egy pÃ¡r pÃ¡rhuzamos oldala van, mÃ­g a paralelogrammÃ¡nak kettÅ‘. TehÃ¡t nem minden trapÃ©z paralelogramma. âœ… MegoldÃ¡s: A 'b' Ã¡llÃ­tÃ¡s hamis." },
            { question: "Egy Ã¡ru Ã¡ra 20% Ã¡fÃ¡val 1200 Ft. Mennyi az Ã¡fa nÃ©lkÃ¼li, nettÃ³ Ã¡r?", options: { a: "960 Ft", b: "1000 Ft", c: "1440 Ft" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A 1200 Ft a 120%-os Ã¡r. KeressÃ¼k a 100%-ot. ğŸ”¹ 2. LÃ©pÃ©s: ElÅ‘szÃ¶r kiszÃ¡moljuk az 1%-ot: 1200 / 120 = 10 Ft. ğŸ”¹ 3. LÃ©pÃ©s: Ezt szorozzuk 100-zal: 10 * 100 = 1000 Ft. âœ… MegoldÃ¡s: 1000 Ft." },
            { question: "Mi az 5x - (3x - 2) kifejezÃ©s egyszerÅ±bb alakja?", options: { a: "2x - 2", b: "2x + 2", c: "8x - 2" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: Felbontjuk a zÃ¡rÃ³jelet. Mivel elÅ‘tte kivonÃ¡sjel van, a zÃ¡rÃ³jelen belÃ¼li tagok elÅ‘jele megvÃ¡ltozik. ğŸ”¹ 2. LÃ©pÃ©s: 5x - 3x + 2. ğŸ”¹ 3. LÃ©pÃ©s: Ã–sszevonÃ¡s: 2x + 2. âœ… MegoldÃ¡s: 2x + 2." },
            { question: "Egy 10 cm sugarÃº kÃ¶rbe Ã­rt szabÃ¡lyos hatszÃ¶g kerÃ¼lete...", options: { a: "30 cm", b: "60 cm", c: "10Ï€ cm" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A szabÃ¡lyos hatszÃ¶g oldalhossza megegyezik a kÃ¶rÃ© Ã­rt kÃ¶r sugarÃ¡val. TehÃ¡t az oldalhossz 10 cm. ğŸ”¹ 2. LÃ©pÃ©s: A hatszÃ¶gnek 6 oldala van, kerÃ¼lete: K = 6 * 10 = 60 cm. âœ… MegoldÃ¡s: 60 cm." },
            { question: "Egy derÃ©kszÃ¶gÅ± hÃ¡romszÃ¶g Ã¡tfogÃ³hoz tartozÃ³ magassÃ¡ga az Ã¡tfogÃ³t 4 Ã©s 9 cm-es szakaszokra bontja. Milyen magas a hÃ¡romszÃ¶g?", options: { a: "13 cm", b: "6 cm", c: "36 cm" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: Alkalmazzuk a magassÃ¡gtÃ©telt: mÂ² = p * q. ğŸ”¹ 2. LÃ©pÃ©s: mÂ² = 4 * 9 = 36. ğŸ”¹ 3. LÃ©pÃ©s: m = âˆš36 = 6 cm. âœ… MegoldÃ¡s: 6 cm." },
            { question: "Melyik az x / 3 = 12 egyenlet megoldÃ¡sa?", options: { a: "4", b: "36", c: "9" }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: Az egyenlet mindkÃ©t oldalÃ¡t be kell szorozni 3-mal, hogy x egyedÃ¼l maradjon. ğŸ”¹ 2. LÃ©pÃ©s: x = 12 * 3 = 36. âœ… MegoldÃ¡s: 36." },
            { question: "Melyik Ã¡llÃ­tÃ¡s igaz a fordÃ­tott arÃ¡nyossÃ¡gra?", options: { a: "Ha az egyik mennyisÃ©g nÅ‘, a mÃ¡sik is nÅ‘.", b: "A kÃ©t mennyisÃ©g szorzata Ã¡llandÃ³.", c: "A kÃ©t mennyisÃ©g Ã¶sszege Ã¡llandÃ³." }, correctAnswer: "b", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A fordÃ­tott arÃ¡nyossÃ¡gnÃ¡l ha az egyik mennyisÃ©g nÅ‘, a mÃ¡sik csÃ¶kken. ğŸ”¹ 2. LÃ©pÃ©s: A definÃ­ciÃ³ja, hogy a kÃ©t Ã¶sszetartozÃ³ Ã©rtÃ©k szorzata mindig Ã¡llandÃ³ (x * y = k). âœ… MegoldÃ¡s: A kÃ©t mennyisÃ©g szorzata Ã¡llandÃ³." },
            { question: "Mi az 5â»Â² Ã©rtÃ©ke?", options: { a: "-25", b: "-10", c: "1/25" }, correctAnswer: "c", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: A negatÃ­v kitevÅ‘ a szÃ¡m reciprokÃ¡t jelenti. aâ»â¿ = 1/aâ¿. ğŸ”¹ 2. LÃ©pÃ©s: 5â»Â² = 1 / 5Â² = 1 / 25. âœ… MegoldÃ¡s: 1/25." },
            { question: "Egy 2000 Ft-os termÃ©k Ã¡rÃ¡t 10%-kal csÃ¶kkentik. Mennyi lesz az Ãºj Ã¡r?", options: { a: "1800 Ft", b: "2200 Ft", c: "200 Ft" }, correctAnswer: "a", explanation: "ğŸ”¹ 1. LÃ©pÃ©s: KiszÃ¡moljuk a 10%-ot: 2000 * (10/100) = 200 Ft. ğŸ”¹ 2. LÃ©pÃ©s: Mivel csÃ¶kkentik, kivonjuk az eredeti Ã¡rbÃ³l: 2000 - 200 = 1800 Ft. âœ… MegoldÃ¡s: 1800 Ft." }
        ];
        
        const questionsContainer = document.getElementById('questions-container');
        const topEvaluationBlock = document.getElementById('top-evaluation');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function shuffleOptions(options) {
            const optionsArray = Object.entries(options).map(([key, text]) => ({ key, text }));
            return shuffle([...optionsArray]);
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                const randomizedOptions = shuffleOptions(item.options);
                const optionLetters = ['a', 'b', 'c'];
                
                let optionsHTML = '';
                randomizedOptions.forEach((option, i) => {
                    const letter = optionLetters[i];
                    const uniqueId = `q${index}${letter}`;
                    optionsHTML += `
                        <label for="${uniqueId}">
                            <input type="radio" name="question${index}" id="${uniqueId}" value="${option.key}">
                            ${letter}) ${option.text}
                        </label>
                    `;
                });

                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">${optionsHTML}</div>
                        <div class="explanation" id="explanation-${index}">${item.explanation}</div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = topEvaluationBlock.querySelector('.pin-code-input').value;
            const checkBtn = topEvaluationBlock.querySelector('.check-btn');
            const resultContainer = topEvaluationBlock.querySelector('.result-container');
            const adminPanel = topEvaluationBlock.querySelector('.admin-panel');

            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('Ã‰rvÃ©nytelen PIN kÃ³d! KÃ©rjÃ¼k, adjon meg egy Ã©rvÃ©nyes tanulÃ³i (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`KÃ©rjÃ¼k, vÃ¡laszolj az Ã¶sszes kÃ©rdÃ©sre! Jelenleg ${answeredQuestions}/${shuffledData.length} kÃ©rdÃ©sre vÃ¡laszoltÃ¡l.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtn.disabled = true;
            topEvaluationBlock.querySelector('.pin-code-input').disabled = true;

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);
                explanationDiv.style.display = 'block';

                if (isMaster) {
                    document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                        if (radio.value === item.correctAnswer) {
                            radio.parentElement.classList.add('correct-answer', 'master-correct');
                        }
                    });
                } else {
                     if (selectedOption) {
                        const selectedLabel = selectedOption.parentElement;
                        if (selectedOption.value === item.correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct-answer', 'label-correct');
                        } else {
                            selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                             document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                                if (radio.value === item.correctAnswer) {
                                    radio.parentElement.classList.add('correct-answer');
                                }
                            });
                        }
                    } else { 
                         document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                            if (radio.value === item.correctAnswer) {
                                radio.parentElement.classList.add('correct-answer');
                            }
                        });
                    }
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            if (!isMaster) {
                resultContainer.innerHTML = `EredmÃ©nyed: ${score} / ${shuffledData.length} (${percentage}%)`;
            } else {
                 resultContainer.innerHTML = `Mester mÃ³d: Helyes vÃ¡laszok Ã©s magyarÃ¡zatok felfedve.`;
            }


            if (isMaster) {
                adminPanel.style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            
            const mainCheckBtn = topEvaluationBlock.querySelector('.check-btn');
            const mainPinInput = topEvaluationBlock.querySelector('.pin-code-input');

            mainCheckBtn.addEventListener('click', checkAnswers);
            mainPinInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
        });

    </script>
</body>
</html>