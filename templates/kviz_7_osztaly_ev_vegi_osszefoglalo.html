<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kvíz: 7. Osztály - Év végi összefoglaló</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
        :root{--primary-color:#007BFF;--secondary-color:#f1f1f1;--background-color:#f8f9fa;--text-color:#333;--correct-color:#28a745;--correct-bg:#d4edda;--incorrect-color:#dc3545;--incorrect-bg:#f8d7da;--neutral-border:#dee2e6}body{font-family:'Poppins',sans-serif;background-color:var(--background-color);color:var(--text-color);margin:0;padding:20px;display:flex;justify-content:center}.quiz-container{width:100%;max-width:800px;background-color:#fff;border-radius:15px;box-shadow:0 4px 20px rgba(0,0,0,.1);overflow:hidden}header{padding:20px;background:linear-gradient(90deg,#cd2a3e 33.3%,#fff 33.3%,#fff 66.6%,#477050 66.6%);text-align:center}header h1{color:var(--text-color);margin:0;font-size:2em;text-shadow:1px 1px 3px rgba(0,0,0,.2)}main{padding:30px}#quiz-form{display:flex;flex-direction:column;gap:25px}.question-block{border:1px solid var(--neutral-border);border-radius:10px;padding:20px;transition:box-shadow .3s}.question-block:focus-within{box-shadow:0 0 10px rgba(0,123,255,.25)}.question-text{font-weight:600;margin-bottom:15px;font-size:1.1em}.options{display:flex;flex-direction:column;gap:10px}.options label{display:flex;align-items:center;padding:15px;border:1px solid var(--neutral-border);border-radius:8px;cursor:pointer;transition:background-color .3s,border-color .3s}.options label:hover{background-color:#f8f9fa}.options input[type=radio]{margin-right:15px;accent-color:var(--primary-color)}.explanation{margin-top:15px;padding:15px;background-color:var(--secondary-color);border-left:5px solid var(--primary-color);border-radius:5px;display:none;font-size:.95em}.explanation strong{display:block;margin-bottom:5px}.evaluation-block{margin-bottom:20px}.controls-container{padding:20px;background-color:#fdfdfd;border:1px dashed var(--neutral-border);border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:15px}.controls-container label{font-weight:600}.pin-code-input{padding:10px;border-radius:5px;border:1px solid var(--neutral-border);width:120px;text-align:center;font-size:1em}.check-btn{padding:12px 25px;background-color:var(--primary-color);color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1em;font-weight:600;transition:background-color .3s,transform .1s}.check-btn:hover{background-color:#0056b3}.check-btn:active{transform:scale(.98)}.check-btn:disabled{background-color:#aaa;cursor:not-allowed}.result-container{margin-top:15px;text-align:center;font-size:1.2em;font-weight:700;min-height:1.5em}.admin-panel{margin-top:10px;padding:15px;background-color:#fffbe6;border:1px solid #ffeeba;border-radius:8px;text-align:center;font-weight:600;color:#856404}.correct-answer{background-color:var(--correct-bg)!important;border-color:var(--correct-color)!important}.incorrect-answer{background-color:var(--incorrect-bg)!important;border-color:var(--incorrect-color)!important}.master-correct::before{content:'✅ Helyes: ';font-weight:700}.label-correct::before{content:'✅ '}.label-incorrect::before{content:'❌ '}@media (max-width:600px){body{padding:10px}main{padding:15px}header h1{font-size:1.5em}}
    </style>
</head>
<body>
    <div class="quiz-container">
        <header><h1>Kvíz: 7. Osztály - Év végi összefoglaló</h1></header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN kód:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellenőrzés</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;"><p>Mester mód aktív. Válaszok eloszlása: 8 'a', 9 'b', 8 'c'.</p></div>
            </div>
            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">
            <form id="quiz-form" autocomplete="off"><div id="questions-container"></div></form>
        </main>
    </div>
    <script>
        const quizData = [
            { question: "Egy derékszögű háromszög befogói 5 cm és 12 cm. Milyen hosszú az átfogója?", options: { a: "17 cm", b: "13 cm", c: "7 cm" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Alkalmazzuk a Pitagorasz-tételt: a² + b² = c². 🔹 2. Lépés: 5² + 12² = 25 + 144 = 169. 🔹 3. Lépés: c = √169 = 13 cm. ✅ Megoldás: 13 cm." },
            { question: "Mi a (2x - 3y) + (x + 5y) algebrai kifejezés összevont alakja?", options: { a: "3x + 2y", b: "3x + 8y", c: "2x + 8y" }, correctAnswer: "a", explanation: "🔹 1. Lépés: Vonjuk össze az egynemű tagokat. Az x-es tagok: 2x + x = 3x. 🔹 2. Lépés: Az y-os tagok: -3y + 5y = 2y. ✅ Megoldás: 3x + 2y." },
            { question: "Egy kör átmérője 20 cm. Mekkora a kerülete?", options: { a: "10π cm", b: "20π cm", c: "100π cm" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A kör kerületének képlete átmérővel: K = d * π. 🔹 2. Lépés: K = 20 * π = 20π cm. ✅ Megoldás: 20π cm." },
            { question: "Melyik szám normálalakja 3,45 * 10³?", options: { a: "345", b: "0,0345", c: "3450" }, correctAnswer: "c", explanation: "🔹 1. Lépés: A 10³ azt jelenti, hogy 1000-rel kell szorozni. 🔹 2. Lépés: A tizedesvesszőt 3 hellyel kell jobbra mozgatni: 3,45 -> 34,5 -> 345,0 -> 3450. ✅ Megoldás: 3450." },
            { question: "Két hasonló háromszög hasonlósági aránya 2. A kisebbik területe 15 cm². Mekkora a nagyobbik területe?", options: { a: "30 cm²", b: "60 cm²", c: "150 cm²" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A területek aránya a hasonlóság arányának négyzetével (k²) egyenlő. Itt k=2, tehát k²=4. 🔹 2. Lépés: A nagyobbik területe a kisebbik területének 4-szerese: 15 cm² * 4 = 60 cm². ✅ Megoldás: 60 cm²." },
            { question: "Mi az x² * x³ művelet eredménye?", options: { a: "x⁵", b: "x⁶", c: "2x⁵" }, correctAnswer: "a", explanation: "🔹 1. Lépés: Azonos alapú hatványok szorzásakor a kitevőket összeadjuk. 🔹 2. Lépés: x² * x³ = x²⁺³ = x⁵. ✅ Megoldás: x⁵." },
            { question: "Egy 60°-os középponti szöghöz mekkora kerületi szög tartozik ugyanazon az íven?", options: { a: "60°", b: "120°", c: "30°" }, correctAnswer: "c", explanation: "🔹 1. Lépés: A kerületi és középponti szögek tétele szerint a kerületi szög feleakkora, mint a hozzá tartozó középponti szög. 🔹 2. Lépés: 60° / 2 = 30°. ✅ Megoldás: 30°." },
            { question: "Mekkora egy szabályos hatszög egy belső szöge?", options: { a: "108°", b: "120°", c: "60°" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A szabályos n-szög egy belső szögének képlete: (n-2)*180°/n. 🔹 2. Lépés: Hatszög esetén n=6. (6-2)*180°/6 = 4*180°/6 = 4*30° = 120°. ✅ Megoldás: 120°." },
            { question: "Mit állít Thalész tétele?", options: { a: "Minden derékszögű háromszög köré írható kör.", b: "A kör átmérője feletti kerületi szög mindig derékszög (90°).", c: "a²+b²=c²" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Thalész tétele a kör átmérője és a körvonal egy pontja által alkotott háromszögről szól. 🔹 2. Lépés: A tétel kimondja, hogy az átmérővel szemközti szög mindig derékszög. ✅ Megoldás: A kör átmérője feletti kerületi szög mindig derékszög." },
            { question: "Egy derékszögű háromszög átfogója 25, egyik befogója 7. Mekkora a másik befogó?", options: { a: "24", b: "18", c: "√576" }, correctAnswer: "a", explanation: "🔹 1. Lépés: Pitagorasz-tétel: b² = c² - a². 🔹 2. Lépés: b² = 25² - 7² = 625 - 49 = 576. 🔹 3. Lépés: b = √576 = 24. A √576 is helyes, de a kiszámolt érték a jobb. ✅ Megoldás: 24." },
            { question: "Hogyan írjuk fel az 'egy szám ötszörösénél 3-mal kisebb számot' algebrai kifejezéssel?", options: { a: "5x - 3", b: "3x - 5", c: "5(x-3)" }, correctAnswer: "a", explanation: "🔹 1. Lépés: A 'szám' legyen x. Az 'ötszöröse' 5x. 🔹 2. Lépés: Ennél '3-mal kisebb', tehát kivonunk belőle 3-at. ✅ Megoldás: 5x - 3." },
            { question: "Egy 5 cm sugarú kör területe...", options: { a: "10π cm²", b: "25π cm²", c: "5π cm²" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A kör területének képlete T = r² * π. 🔹 2. Lépés: T = 5² * π = 25π cm². ✅ Megoldás: 25π cm²." },
            { question: "Mi az (x³)⁴ művelet eredménye?", options: { a: "x⁷", b: "x⁸¹", c: "x¹²" }, correctAnswer: "c", explanation: "🔹 1. Lépés: Hatvány hatványozásakor a kitevőket összeszorozzuk. 🔹 2. Lépés: (x³)⁴ = x³*⁴ = x¹². ✅ Megoldás: x¹²." },
            { question: "Melyik szám normálalak?", options: { a: "12 * 10³", b: "5,67 * 10⁻⁴", c: "0,5 * 10⁶" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A normálalak feltétele, hogy az első szorzótényező (a) 1 ≤ |a| < 10 közé essen. 🔹 2. Lépés: A 12 és a 0,5 nem esik ebbe a tartományba. Az 5,67 viszont igen. ✅ Megoldás: 5,67 * 10⁻⁴." },
            { question: "Egy derékszögű háromszög α szögével szemközti befogó 6, az átfogó 10. Mi a sin(α)?", options: { a: "6/10 = 0,6", b: "8/10 = 0,8", c: "6/8 = 0,75" }, correctAnswer: "a", explanation: "🔹 1. Lépés: A szinusz definíciója: sin(α) = szemközti befogó / átfogó. 🔹 2. Lépés: sin(α) = 6 / 10 = 0,6. ✅ Megoldás: 0,6." },
            { question: "Egy húrnégyszög egyik szöge 110°. Mekkora a vele szemközti szög?", options: { a: "110°", b: "70°", c: "250°" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A húrnégyszögek tétele szerint a szemközti szögek összege mindig 180°. 🔹 2. Lépés: 180° - 110° = 70°. ✅ Megoldás: 70°." },
            { question: "Melyik állítás HAMIS?", options: { a: "Minden négyzet rombusz.", b: "Minden trapéz paralelogramma.", c: "Minden téglalap húrnégyszög." }, correctAnswer: "b", explanation: "🔹 1. Lépés: A négyzetnek minden oldala egyenlő (rombusz). A téglalap szemközti szögeinek összege 90+90=180 (húrnégyszög). 🔹 2. Lépés: A trapéznak csak egy pár párhuzamos oldala van, míg a paralelogrammának kettő. Tehát nem minden trapéz paralelogramma. ✅ Megoldás: A 'b' állítás hamis." },
            { question: "Egy áru ára 20% áfával 1200 Ft. Mennyi az áfa nélküli, nettó ár?", options: { a: "960 Ft", b: "1000 Ft", c: "1440 Ft" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A 1200 Ft a 120%-os ár. Keressük a 100%-ot. 🔹 2. Lépés: Először kiszámoljuk az 1%-ot: 1200 / 120 = 10 Ft. 🔹 3. Lépés: Ezt szorozzuk 100-zal: 10 * 100 = 1000 Ft. ✅ Megoldás: 1000 Ft." },
            { question: "Mi az 5x - (3x - 2) kifejezés egyszerűbb alakja?", options: { a: "2x - 2", b: "2x + 2", c: "8x - 2" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Felbontjuk a zárójelet. Mivel előtte kivonásjel van, a zárójelen belüli tagok előjele megváltozik. 🔹 2. Lépés: 5x - 3x + 2. 🔹 3. Lépés: Összevonás: 2x + 2. ✅ Megoldás: 2x + 2." },
            { question: "Egy 10 cm sugarú körbe írt szabályos hatszög kerülete...", options: { a: "30 cm", b: "60 cm", c: "10π cm" }, correctAnswer: "b", explanation: "🔹 1. Lépés: A szabályos hatszög oldalhossza megegyezik a köré írt kör sugarával. Tehát az oldalhossz 10 cm. 🔹 2. Lépés: A hatszögnek 6 oldala van, kerülete: K = 6 * 10 = 60 cm. ✅ Megoldás: 60 cm." },
            { question: "Egy derékszögű háromszög átfogóhoz tartozó magassága az átfogót 4 és 9 cm-es szakaszokra bontja. Milyen magas a háromszög?", options: { a: "13 cm", b: "6 cm", c: "36 cm" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Alkalmazzuk a magasságtételt: m² = p * q. 🔹 2. Lépés: m² = 4 * 9 = 36. 🔹 3. Lépés: m = √36 = 6 cm. ✅ Megoldás: 6 cm." },
            { question: "Melyik az x / 3 = 12 egyenlet megoldása?", options: { a: "4", b: "36", c: "9" }, correctAnswer: "b", explanation: "🔹 1. Lépés: Az egyenlet mindkét oldalát be kell szorozni 3-mal, hogy x egyedül maradjon. 🔹 2. Lépés: x = 12 * 3 = 36. ✅ Megoldás: 36." },
            { question: "Melyik állítás igaz a fordított arányosságra?", options: { a: "Ha az egyik mennyiség nő, a másik is nő.", b: "A két mennyiség szorzata állandó.", c: "A két mennyiség összege állandó." }, correctAnswer: "b", explanation: "🔹 1. Lépés: A fordított arányosságnál ha az egyik mennyiség nő, a másik csökken. 🔹 2. Lépés: A definíciója, hogy a két összetartozó érték szorzata mindig állandó (x * y = k). ✅ Megoldás: A két mennyiség szorzata állandó." },
            { question: "Mi az 5⁻² értéke?", options: { a: "-25", b: "-10", c: "1/25" }, correctAnswer: "c", explanation: "🔹 1. Lépés: A negatív kitevő a szám reciprokát jelenti. a⁻ⁿ = 1/aⁿ. 🔹 2. Lépés: 5⁻² = 1 / 5² = 1 / 25. ✅ Megoldás: 1/25." },
            { question: "Egy 2000 Ft-os termék árát 10%-kal csökkentik. Mennyi lesz az új ár?", options: { a: "1800 Ft", b: "2200 Ft", c: "200 Ft" }, correctAnswer: "a", explanation: "🔹 1. Lépés: Kiszámoljuk a 10%-ot: 2000 * (10/100) = 200 Ft. 🔹 2. Lépés: Mivel csökkentik, kivonjuk az eredeti árból: 2000 - 200 = 1800 Ft. ✅ Megoldás: 1800 Ft." }
        ];
        
        const questionsContainer = document.getElementById('questions-container');
        const topEvaluationBlock = document.getElementById('top-evaluation');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function shuffleOptions(options) {
            const optionsArray = Object.entries(options).map(([key, text]) => ({ key, text }));
            return shuffle([...optionsArray]);
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                const randomizedOptions = shuffleOptions(item.options);
                const optionLetters = ['a', 'b', 'c'];
                
                let optionsHTML = '';
                randomizedOptions.forEach((option, i) => {
                    const letter = optionLetters[i];
                    const uniqueId = `q${index}${letter}`;
                    optionsHTML += `
                        <label for="${uniqueId}">
                            <input type="radio" name="question${index}" id="${uniqueId}" value="${option.key}">
                            ${letter}) ${option.text}
                        </label>
                    `;
                });

                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">${optionsHTML}</div>
                        <div class="explanation" id="explanation-${index}">${item.explanation}</div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = topEvaluationBlock.querySelector('.pin-code-input').value;
            const checkBtn = topEvaluationBlock.querySelector('.check-btn');
            const resultContainer = topEvaluationBlock.querySelector('.result-container');
            const adminPanel = topEvaluationBlock.querySelector('.admin-panel');

            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('Érvénytelen PIN kód! Kérjük, adjon meg egy érvényes tanulói (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`Kérjük, válaszolj az összes kérdésre! Jelenleg ${answeredQuestions}/${shuffledData.length} kérdésre válaszoltál.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtn.disabled = true;
            topEvaluationBlock.querySelector('.pin-code-input').disabled = true;

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);
                explanationDiv.style.display = 'block';

                if (isMaster) {
                    document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                        if (radio.value === item.correctAnswer) {
                            radio.parentElement.classList.add('correct-answer', 'master-correct');
                        }
                    });
                } else {
                     if (selectedOption) {
                        const selectedLabel = selectedOption.parentElement;
                        if (selectedOption.value === item.correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct-answer', 'label-correct');
                        } else {
                            selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                             document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                                if (radio.value === item.correctAnswer) {
                                    radio.parentElement.classList.add('correct-answer');
                                }
                            });
                        }
                    } else { 
                         document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                            if (radio.value === item.correctAnswer) {
                                radio.parentElement.classList.add('correct-answer');
                            }
                        });
                    }
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            if (!isMaster) {
                resultContainer.innerHTML = `Eredményed: ${score} / ${shuffledData.length} (${percentage}%)`;
            } else {
                 resultContainer.innerHTML = `Mester mód: Helyes válaszok és magyarázatok felfedve.`;
            }


            if (isMaster) {
                adminPanel.style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            
            const mainCheckBtn = topEvaluationBlock.querySelector('.check-btn');
            const mainPinInput = topEvaluationBlock.querySelector('.pin-code-input');

            mainCheckBtn.addEventListener('click', checkAnswers);
            mainPinInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
        });

    </script>
</body>
</html>