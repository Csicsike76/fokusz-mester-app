<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: A kongruencia alkalmazásai</title>
  <style>
    :root {
      --primary-color: #388d3c; /* Zöld */
      --secondary-color: #d52b1e; /* Piros */
      --light-green: #e8f5e9;
      --light-red: #ffebee;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, var(--secondary-color), var(--text-light), var(--primary-color));
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: var(--light-green);
      border-color: var(--primary-color);
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: var(--light-red);
      border-color: var(--secondary-color);
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #2a6a2d;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: A kongruencia alkalmazásai</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
        { q: "Milyen tulajdonságúak az egyenlő szárú háromszög alapon fekvő szögei?", a: "Mindig 60°-osak.", b: "Kongruensek (egyenlőek).", c: "Összegük 90°.", correct: "b", exp: "Az egyenlő szárú háromszög alaptétele, hogy az egyenlő hosszúságú szárakkal szemközti, alapon fekvő szögek mindig egyenlő nagyságúak. Ezt az O.Sz.O. egybevágósági tétel segítségével lehet bizonyítani." },
        { q: "Mi igaz a szakaszfelező merőleges pontjaira?", a: "Egyenlő távolságra vannak a szakasz két végpontjától.", b: "A szakaszt 2:1 arányban osztják.", c: "A szakaszon belül helyezkednek el.", correct: "a", exp: "A szakaszfelező merőleges azon pontok mértani helye, amelyek egyenlő távolságra vannak a szakasz két végpontjától. Ezt kongruens háromszögek (O.Sz.O.) segítségével lehet igazolni." },
        { q: "Milyen hosszú a derékszögű háromszög átfogójához tartozó súlyvonala?", a: "Kétszerese az átfogónak.", b: "Megegyezik az átfogóval.", c: "Fele olyan hosszú, mint az átfogó.", correct: "c", exp: "A derékszögű háromszög köré írt körének középpontja az átfogó felezőpontja (Thalész tételének megfordítása). A súlyvonal a csúcsot köti össze ezzel a középponttal, tehát hossza megegyezik a kör sugarával, ami az átfogó fele." },
        { q: "Milyen háromszöget alkot egy rombusz oldala és két félátlója?", a: "Tompaszögűt.", b: "Hegyesszögűt.", c: "Derékszögűt.", correct: "c", exp: "Mivel a rombusz átlói merőlegesek egymásra, a rombuszt négy egybevágó derékszögű háromszögre bontják. A befogók a félátlók, az átfogó a rombusz oldala." },
        { q: "Egy szög szögfelezőjének bármely pontja...", a: "...egyenlő távolságra van a szög két szárától.", b: "...a szög csúcsával egyenlő távolságra van.", c: "...a szög szárain van.", correct: "a", exp: "A szögfelezőn lévő pontok legfontosabb tulajdonsága, hogy egyenlő távolságra vannak a két szögszártól. Ezt két kongruens derékszögű háromszög létrehozásával lehet bizonyítani." },
        { q: "Egy egyenlő szárú háromszögben az alaphoz tartozó magasságvonal...", a: "...nem metszi a súlyvonalat.", b: "...egybeesik a súlyvonallal és a szögfelezővel.", c: "...párhuzamos a súlyvonallal.", correct: "b", exp: "Az egyenlő szárú háromszög szimmetriatengelye az alaphoz tartozó magasság, súlyvonal és szögfelező, valamint az oldalfelező merőleges is. Ezek a vonalak egybeesnek." },
        { q: "Ha egy paralelogramma átlói egyenlő hosszúak, akkor az biztosan...", a: "Rombusz.", b: "Négyzet.", c: "Téglalap.", correct: "c", exp: "A paralelogrammák közül csak a téglalapnak (és a négyzetnek, ami speciális téglalap) egyenlőek az átlói. Ezt két kongruens háromszög (O.O.O.) segítségével lehet bizonyítani." },
        { q: "Miért igaz, hogy a paralelogramma szemközti oldalai egyenlőek?", a: "Mert az átló két kongruens háromszögre bontja.", b: "Mert a szemközti oldalak párhuzamosak.", c: "Mert az átlók felezik egymást.", correct: "a", exp: "Az átló két olyan háromszögre bontja a paralelogrammát, amelyek kongruensek a Sz.O.Sz tétel alapján (az átló közös, a váltószögek egyenlőek). A kongruenciából következik a megfelelő oldalak egyenlősége." },
        { q: "Egy egyenlő oldalú háromszögben minden szög...", a: "...derékszög.", b: "...60°.", c: "...különböző.", correct: "b", exp: "Mivel az egyenlő oldalú háromszög egyben egyenlő szárú is bármelyik oldalát tekintve alapnak, minden szöge egyenlő. Mivel az összegük 180°, egy szög 180/3 = 60°." },
        { q: "Egy körben az egyenlő húrokhoz...", a: "...különböző középponti szögek tartoznak.", b: "...egyenlő középponti szögek tartoznak.", c: "...derékszögek tartoznak.", correct: "b", exp: "Ha két húr egyenlő, akkor a kör középpontjával alkotott két háromszög kongruens lesz az O.O.O. tétel szerint (két oldal a sugár, a harmadik a húr). Ebből következik, hogy a középponti szögek is egyenlőek." },
        { q: "Egy derékszögű háromszög átfogója 10. Mekkora az átfogóhoz tartozó súlyvonal?", a: "10", b: "5", c: "Nem lehet tudni.", correct: "b", exp: "A derékszögű háromszög köré írt kör középpontja az átfogó felezőpontja. A súlyvonal a derékszögű csúcsból ebbe a pontba húzott szakasz, ami pontosan a kör sugara. A sugár az átmérő (átfogó) fele, tehát 10/2=5." },
        { q: "Milyen alakzatot kapunk, ha egy négyszög oldalfelező pontjait összekötjük?", a: "Paralelogrammát.", b: "Téglalapot.", c: "Rombuszt.", correct: "a", exp: "Ez a Varignon-tétel. Bármely négyszög oldalfelező pontjai egy paralelogrammát alkotnak. Ezt a háromszög középvonal-tételének alkalmazásával lehet bizonyítani." },
        { q: "Melyik állítás bizonyítható kongruencia segítségével?", a: "Pitagorasz-tétel.", b: "Két pont távolsága.", c: "A paralelogramma szemközti szögei egyenlőek.", correct: "c", exp: "A paralelogramma átlója két kongruens háromszögre bontja (O.O.O. tétel). A kongruens háromszögek megfelelő szögei egyenlőek, így a paralelogramma szemközti szögei is." },
        { q: "Ha egy háromszögben két szög egyenlő, akkor a háromszög...", a: "...biztosan derékszögű.", b: "...biztosan egyenlő oldalú.", c: "...biztosan egyenlő szárú.", correct: "c", exp: "Ez az egyenlő szárú háromszög tételének megfordítása. Ha két szög egyenlő, akkor a velük szemközti oldalak is egyenlőek, tehát a háromszög egyenlő szárú." },
        { q: "Mi igaz a rombusz átlóira?", a: "Felezik a belső szögeket.", b: "Egyenlő hosszúak.", c: "A metszéspont 1:2 arányban osztja őket.", correct: "a", exp: "A rombusz átlói egyben szögfelezők is. Ezt úgy lehet bizonyítani, hogy az átló két kongruens egyenlő szárú háromszögre bontja a rombuszt." },
        { q: "Egy kör középpontjából egy húrra bocsátott merőleges...", a: "...mindig egyenlő a sugárral.", b: "...felezi a húrt.", c: "...párhuzamos a húrral.", correct: "b", exp: "A középpontból a húrra bocsátott merőleges egy egyenlő szárú háromszög magassága (a szárak a sugarak). Az egyenlő szárú háromszögben a magasság egyben súlyvonal is, tehát felezi az alapot (a húrt)." },
        { q: "Ha egy négyszög átlói merőlegesen felezik egymást, akkor az egy...", a: "Téglalap.", b: "Trapéz.", c: "Rombusz.", correct: "c", exp: "Ha az átlók felezik egymást, az alakzat paralelogramma. Ha még merőlegesek is, az már a rombusz speciális tulajdonsága. Ezt kongruens derékszögű háromszögekkel lehet igazolni." },
        { q: "Melyik nevezetes vonal NEM mindig metszi a szemközti oldalt?", a: "Súlyvonal", b: "Szögfelező", c: "Magasságvonal", correct: "c", exp: "A súlyvonal és a szögfelező mindig a háromszög belsejében halad. A magasságvonal azonban tompaszögű háromszög esetén a háromszögön kívül is haladhat, és a szemközti oldal meghosszabbítását metszi." },
        { q: "Egyenlő oldalú háromszögben minden nevezetes vonal...", a: "...egybeesik a megfelelő oldalakhoz/szögekhez rendelve.", b: "...párhuzamos egymással.", c: "...merőleges egymásra.", correct: "a", exp: "A szabályos háromszög tökéletes szimmetriája miatt egy adott csúcsból húzott magasság, súlyvonal és szögfelező mind ugyanaz a szakasz, ami egyben a szemközti oldal felezőmerőlegese is." },
        { q: "Két kör sugara egyenlő. Az A és B pontok az első körön, a C és D a másodikon vannak. Ha az AB és CD húrok egyenlőek, mit tudunk az AOB és COD háromszögekről?", a: "Hasonlóak.", b: "Kongruensek.", c: "Derékszögűek.", correct: "b", exp: "Az AOB és COD háromszögek oldalai: r, r, |AB| és r, r, |CD|. Mivel a sugarak és a húrok is egyenlőek, a két háromszög az O.O.O. tétel alapján kongruens." },
        { q: "Ha egy háromszög egyik súlyvonala fele akkora, mint az oldal, amit felez, akkor a háromszög...", a: "...egyenlő oldalú.", b: "...egyenlő szárú.", c: "...derékszögű.", correct: "c", exp: "Ez a derékszögű háromszög átfogóhoz tartozó súlyvonalának tételének a megfordítása. Ha s_c = c/2, akkor a háromszög a 'c' oldallal szemben derékszögű." },
        { q: "Egy paralelogramma átlói két-két kongruens háromszöget alkotnak. Hány különböző háromszögtípus keletkezik?", a: "1", b: "2", c: "4", correct: "b", exp: "Az átlók metszéspontja a paralelogrammát négy háromszögre osztja. Ezek közül a szemköztiek páronként kongruensek. Tehát általában két különböző típusú háromszög keletkezik." },
        { q: "Melyik állítás igaz egy általános háromszögre?", a: "Bármely két magassága egyenlő.", b: "Bármely két súlyvonala egyenlő.", c: "Nincs két egyenlő nevezetes vonala.", correct: "c", exp: "Egy általános (nem egyenlő szárú) háromszögben minden oldal és szög különböző, amiből következik, hogy a hozzájuk tartozó nevezetes vonalak (magasságok, súlyvonalak, stb.) hossza is mind különböző." },
        { q: "Egy deltoid szimmetriaátlója két kongruens háromszögre bontja a deltoidot. Milyen tétel alapján?", a: "Sz.O.Sz.", b: "O.Sz.O.", c: "O.O.O.", correct: "c", exp: "A deltoid definíciója szerint két-két szomszédos oldala egyenlő. A szimmetriaátló a harmadik, közös oldal. Így az O.O.O. egybevágósági tétel alapján a két háromszög kongruens." },
        { q: "Ha két derékszögű háromszög átfogója és egy-egy befogója megegyezik, akkor kongruensek. Miért?", a: "Mert a harmadik befogójuk is egyenlő lesz a Pitagorasz-tétel miatt.", b: "Mert az O.Sz.O. tétel teljesül.", c: "Mert a Sz.O.Sz. tétel teljesül.", correct: "a", exp: "Ez az Átfogó-Befogó (Á.B.) eset. Bár nem alapeset, de a Pitagorasz-tétel (a²=c²-b²) garantálja, hogy a harmadik befogók is egyenlőek lesznek, így az O.O.O. tétel már teljesül." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>