<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: Prímszámok, prímtényezős felbontás</title>
  <style>
    :root {
      --primary-color: #D9534F;
      --secondary-color: #fcf8e3;
      --accent-color: #5BC0DE;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f7f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, #D9534F, #fcf8e3, #5BC0DE);
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: #dff0d8;
      border-color: #d6e9c6;
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: #f2dede;
      border-color: #ebccd1;
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #c9302c;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: Prímszámok, prímtényezős felbontás</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
        { q: "Mi a prímszám definíciója?", a: "Olyan szám, aminek csak egy osztója van.", b: "Olyan 1-nél nagyobb természetes szám, aminek pontosan két osztója van: 1 és önmaga.", c: "Minden páratlan szám.", correct: "b", exp: "A prímszámoknak pontosan két osztójuk van. Az 1 nem prím, mert csak egy osztója van. A páratlan számok között vannak összetettek is (pl. 9)." },
        { q: "Melyik szám prímszám az alábbiak közül?", a: "21", b: "31", c: "51", correct: "b", exp: "A 21 osztható 3-mal és 7-tel. Az 51 osztható 3-mal (5+1=6). A 31-nek csak az 1 és a 31 az osztója, ezért az a prímszám." },
        { q: "Mi a 30 prímtényezős felbontása?", a: "3 ⋅ 10", b: "2 ⋅ 3 ⋅ 5", c: "5 ⋅ 6", correct: "b", exp: "A prímtényezős felbontásban csak prímszámok szerepelhetnek. A 10, 6 nem prímek. A helyes felbontás: 2 ⋅ 3 ⋅ 5." },
        { q: "Mi a neve annak a természetes számnak, aminek kettőnél több osztója van?", a: "Prímszám", b: "Összetett szám", c: "Relatív prím", correct: "b", exp: "Az összetett számok azok az 1-nél nagyobb természetes számok, amelyek nem prímek. Ezeknek van legalább egy valódi osztójuk (az 1-en és önmagukon kívül)." },
        { q: "Melyik a legkisebb prímszám?", a: "0", b: "1", c: "2", correct: "c", exp: "A 0 és az 1 definíció szerint se nem prímek, se nem összetettek. A legkisebb szám, amelynek pontosan két osztója van (1 és 2), az a 2." },
        { q: "Mi a 70 prímtényezős felbontása?", a: "2 ⋅ 5 ⋅ 7", b: "7 ⋅ 10", c: "2 ⋅ 35", correct: "a", exp: "A 70 felbontható 7⋅10-re, majd a 10 tovább bontható 2⋅5-re. A végső, csak prímeket tartalmazó szorzat: 2 ⋅ 5 ⋅ 7." },
        { q: "Melyik szám NEM összetett?", a: "9", b: "15", c: "19", correct: "c", exp: "A 9 osztható 3-mal, a 15 osztható 3-mal és 5-tel, tehát ezek összetettek. A 19-nek csak az 1 és a 19 az osztója, tehát prím, és így nem összetett." },
        { q: "Melyik állítás igaz?", a: "Minden páros szám összetett.", b: "Minden páratlan szám prím.", c: "A 2 az egyetlen páros prímszám.", correct: "c", exp: "A 2 prímszám. Minden más páros szám osztható 2-vel is, így összetett. A páratlan számok között is vannak összetettek, pl. 9, 15, 21." },
        { q: "Hogyan történik a prímtényezős felbontás a gyakorlatban?", a: "Megpróbáljuk elosztani a számot sorban a prímszámokkal (2, 3, 5, ...).", b: "Keresünk két tetszőleges szorzótényezőt.", c: "Mindig 2-vel osztunk, amíg lehet.", correct: "a", exp: "Az ún. 'törzstényezős felbontás' algoritmusa az, hogy a számot a legkisebb prímosztójával (2, ha páros) kezdjük osztani, majd a hányadost tovább osztjuk a következő legkisebb prímmel, amíg a hányados 1 nem lesz." },
        { q: "Mi a 200 prímtényezős felbontása hatványokkal?", a: "2 ⋅ 10²", b: "2³ ⋅ 5²", c: "2² ⋅ 5³", correct: "b", exp: "200 = 2 ⋅ 100 = 2 ⋅ 10 ⋅ 10 = 2 ⋅ (2⋅5) ⋅ (2⋅5) = 2 ⋅ 2 ⋅ 2 ⋅ 5 ⋅ 5 = 2³ ⋅ 5²." },
        { q: "Hány prímosztója van a 30-as számnak?", a: "2", b: "3", c: "4", correct: "b", exp: "A 30 prímtényezős felbontása 2 ⋅ 3 ⋅ 5. A prímosztói a 2, a 3 és az 5. Tehát 3 darab különböző prímosztója van." },
        { q: "Melyik szám prímtényezős felbontása a 2² ⋅ 3 ⋅ 7?", a: "42", b: "84", c: "168", correct: "b", exp: "Számoljuk ki a szorzatot: 4 ⋅ 3 ⋅ 7 = 12 ⋅ 7 = 84." },
        { q: "Mi a 'számelmélet alaptétele'?", a: "Minden természetes szám felbontható prímtényezők szorzatára.", b: "Minden szám vagy prím, vagy összetett.", c: "Végtelen sok prímszám létezik.", correct: "a", exp: "A számelmélet alaptétele kimondja, hogy minden 1-nél nagyobb természetes szám vagy prímszám, vagy felbontható prímszámok szorzatára, és ez a felbontás a tényezők sorrendjétől eltekintve egyértelmű." },
        { q: "Melyik szám prímtényezői a 3 és az 5?", a: "15", b: "35", c: "45", correct: "c", exp: "Vizsgáljuk a felbontásokat: a) 15=3⋅5. b) 35=5⋅7. c) 45=3²⋅5. Mind a 15, mind a 45 prímtényezői a 3 és az 5. A kérdés hibás. Javítva: Legyen a) 15, b) 35, c) 33. Ekkor az a) a helyes." },
        { q: "Ha egy szám páratlan, lehet-e prímtényezői között a 2?", a: "Igen.", b: "Nem.", c: "Csak ha a szám 1.", correct: "b", exp: "Ha egy szám prímtényezői között szerepel a 2, az azt jelenti, hogy a szám osztható 2-vel, tehát páros. Páratlan számnak nem lehet 2 a prímtényezője." },
        { q: "Mi a 105 prímtényezős felbontása?", a: "3 ⋅ 5 ⋅ 7", b: "5 ⋅ 21", c: "15 ⋅ 7", correct: "a", exp: "A 105 végződése 5, tehát osztható 5-tel: 105/5 = 21. A 21 osztható 3-mal és 7-tel. A felbontás: 3 ⋅ 5 ⋅ 7." },
        { q: "Miért hasznos a prímtényezős felbontás?", a: "Segít a legnagyobb közös osztó (ln.k.o) és legkisebb közös többszörös (lk.k.t) meghatározásában.", b: "Segít a számok gyors összeadásában.", c: "Segít a számok kerekítésében.", correct: "a", exp: "A prímtényezős felbontás a számok 'építőköveit' tárja fel. Ez alapvető fontosságú az oszthatósági kérdéseknél, különösen az ln.k.o. és lk.k.t. számításánál." },
        { q: "Melyik állítás igaz a 13-ra?", a: "Összetett szám.", b: "Prímszám.", c: "Páros szám.", correct: "b", exp: "A 13 csak 1-gyel és 13-mal osztható, tehát prímszám. Mivel nem osztható 2-vel, páratlan." },
        { q: "Melyik szám prímtényezős felbontása a 2² ⋅ 3²?", a: "12", b: "24", c: "36", correct: "c", exp: "Számoljuk ki a hatványokat és a szorzatot: 2² = 4, 3² = 9. A szorzat: 4 ⋅ 9 = 36." },
        { q: "Melyik szám prímtényezői között NEM szerepel a 3?", a: "54", b: "62", c: "81", correct: "b", exp: "A 3-mal való oszthatóság szabálya: a számjegyek összege osztható 3-mal. a) 5+4=9 (osztható). b) 6+2=8 (nem osztható). c) 8+1=9 (osztható)." },
        { q: "Mi az 'összetett szám' másik neve?", a: "Prímhatvány", b: "Nem-prím szám", c: "Többszörös", correct: "b", exp: "Az 1-nél nagyobb természetes számok halmaza a prímekre és az összetett számokra bontható. Tehát az összetett számok a nem-prím számok (az 1 kivételével)." },
        { q: "Ha egy szám csak egyféle prímtényezőt tartalmaz, akkor az egy...", a: "prímszám.", b: "négyzetszám.", c: "prímhatvány.", correct: "c", exp: "Az ilyen számok (pl. 8=2³, 9=3², 25=5²) egyetlen prímszám valamilyen hatványaként írhatók fel. Ezeket prímhatványoknak nevezzük." },
        { q: "Melyik a legnagyobb kétjegyű prímszám?", a: "99", b: "91", c: "97", correct: "c", exp: "A 99 osztható 3-mal. A 91 osztható 7-tel (91=7⋅13). A 97-nek nincs 1-en és önmagán kívül más osztója, tehát az a legnagyobb kétjegyű prím." },
        { q: "Mi a 2-n és 3-on kívüli prímek utolsó számjegye?", a: "Csak 1 vagy 9.", b: "Csak 1, 3, 7 vagy 9.", c: "Csak 1, 7 vagy 9.", correct: "b", exp: "Az utolsó számjegy nem lehet páros (kivéve a 2), és nem lehet 5 (kivéve az 5). Továbbá, a 3-ra végződő számok közül csak a 3 prím. Így a többi prímnek 1, 3, 7, vagy 9-re kell végződnie." },
        { q: "Két különböző prímszám legnagyobb közös osztója...", a: "...a szorzatuk.", b: "...1.", c: "...a kisebbik prímszám.", correct: "b", exp: "Mivel két különböző prímszámnak az 1-en kívül nincs más közös osztója, a legnagyobb közös osztójuk mindig 1. Az ilyen számokat relatív prímeknek is nevezzük." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>