<!-- ===============================================
  FÃJLNÃ‰V: kviz_visszavezetett_egyenlotlensegek.html
  TÃ‰MA: VisszavezethetÅ‘ egyenlÅ‘tlensÃ©gek
  25 kÃ©rdÃ©s â€“ helyes vÃ¡laszÂ­eloszlÃ¡s: 8Ã—a, 9Ã—b, 8Ã—c
  Mester PIN: 121909
  TanulÃ³i PIN-ek: 100001â€“100020
==================================================== -->
<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <title>GyakorlÃ³ KvÃ­z â€“ VisszavezethetÅ‘ egyenlÅ‘tlensÃ©gek</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --green:#28a745; --green-dark:#1e7e34;
      --red:#dc3545; --red-dark:#c82333;
      --blue:#007bff; --blue-dark:#0056b3;
      --light:#f8f9fa; --dark:#343a40;
      --master:#ff6b35;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Roboto,sans-serif;background:var(--light);color:var(--dark);line-height:1.6;padding:1rem}
    .header{background:linear-gradient(135deg,var(--blue),var(--blue-dark));color:#fff;text-align:center;padding:2rem;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,.1)}
    .header h1{font-size:2rem;margin-bottom:.5rem}
    .header .subtitle{font-size:1.1rem;opacity:.9}
    .master-mode{background:var(--master);color:#fff;padding:.5rem 1rem;border-radius:20px;margin:1rem 0;text-align:center;font-weight:600;display:none;animation:pulse 2s infinite}
    @keyframes pulse{0%{opacity:1}50%{opacity:.7}100%{opacity:1}}
    .progress-bar{background:#e9ecef;height:6px;border-radius:3px;margin:1rem 0}
    .progress-fill{background:var(--blue);height:100%;width:0%;transition:width .3s ease}
    .question{background:#fff;border:1px solid #e1e8ed;border-radius:8px;padding:1rem;margin-bottom:1.2rem;box-shadow:0 2px 8px rgba(0,0,0,.06)}
    .question h3{font-size:1rem;margin-bottom:.5rem}
    .answer-option{display:block;padding:.6rem;margin:.4rem 0;border-radius:6px;cursor:pointer;position:relative;transition:.2s;border:2px solid transparent}
    .answer-option:hover{background:#f1f3f4;border-color:#e8eaed}
    .answer-option input{margin-right:.6rem;transform:scale(1.1)}
    .correct{background:var(--green)!important;color:#fff!important;border-color:var(--green-dark)!important}
    .correct::after{content:"âœ…";position:absolute;right:10px;top:50%;transform:translateY(-50%)}
    .wrong{background:var(--red)!important;color:#fff!important;border-color:var(--red-dark)!important}
    .wrong::after{content:"âŒ";position:absolute;right:10px;top:50%;transform:translateY(-50%)}
    .master-correct{background:var(--green)!important;color:#fff!important;border-color:var(--green-dark)!important}
    .master-correct::after{content:"ğŸ¯";position:absolute;right:10px;top:50%;transform:translateY(-50%)}
    .explanation{display:none;margin-top:.5rem;padding:.8rem;background:#e8f4f8;border-left:4px solid var(--blue);border-radius:4px;font-size:.9rem}
    .explanation.show{display:block}
    .pin-area{background:#fff;border:2px solid var(--blue);border-radius:8px;padding:1.5rem;margin:2rem 0;text-align:center}
    .pin-area input{padding:.6rem;border:2px solid #ddd;border-radius:6px;width:120px;text-align:center;font-size:1rem}
    .btn{display:inline-block;background:var(--blue);color:#fff;padding:.6rem 1rem;border:none;border-radius:6px;cursor:pointer;font-size:1rem;transition:.2s}
    .btn:hover{background:var(--blue-dark)}
    .btn-master{background:var(--master)}
    .btn-master:hover{background:#e55a2b}
    .score-box{display:none;background:#fff;border:3px solid var(--green);border-radius:10px;padding:1.5rem;text-align:center;margin:2rem 0}
    .score-box h2{color:var(--green-dark);margin-bottom:.5rem}
    .score-box .score{font-size:2rem;font-weight:700;color:var(--green)}
    .admin-panel{display:none;background:#f8f9fa;border:2px dashed var(--master);border-radius:8px;padding:1rem;margin:2rem 0}
    .admin-panel h3{color:var(--master);margin-bottom:.5rem}
    .admin-panel pre{background:#fff;padding:.8rem;border-radius:4px;border:1px solid #ddd;max-height:200px;overflow-y:auto;font-size:.85rem}
  </style>
</head>
<body>

  <div class="header">
    <h1>ğŸ¯ GyakorlÃ³ KvÃ­z</h1>
    <p class="subtitle">VisszavezethetÅ‘ egyenlÅ‘tlensÃ©gek</p>
  </div>

  <div class="master-mode" id="masterMode">ğŸ”‘ MESTER MÃ“D AKTÃV â€“ helyes vÃ¡laszok jelÃ¶lve</div>

  <div class="progress-bar"><div class="progress-fill" id="progressBar"></div></div>

  <form id="quizForm" autocomplete="off">
    <!-- 1 -->
    <div class="question" data-answer="a">
      <h3>1. Melyik egyenlÅ‘tlensÃ©g Ã¡talakÃ­thatÃ³ x âˆ’ 3 â‰¤ 0 formÃ¡ra?</h3>
      <label class="answer-option"><input type="radio" name="q1" value="a">x â‰¤ 3</label>
      <label class="answer-option"><input type="radio" name="q1" value="b">x â‰¥ 3</label>
      <label class="answer-option"><input type="radio" name="q1" value="c">x â‰¤ âˆ’3</label>
      <div class="explanation">x âˆ’ 3 â‰¤ 0 kÃ¶zvetlen Ã¡talakÃ­tÃ¡s: x â‰¤ 3.</div>
    </div>
    <!-- 2 -->
    <div class="question" data-answer="b">
      <h3>2. Hogyan vezethetÅ‘ vissza 2x + 4 â‰¤ 6 alakra egyenlÅ‘tlensÃ©g?</h3>
      <label class="answer-option"><input type="radio" name="q2" value="a">2x â‰¤ 2</label>
      <label class="answer-option"><input type="radio" name="q2" value="b">2x + 4 â‰¤ 6 eredeti forma</label>
      <label class="answer-option"><input type="radio" name="q2" value="c">x â‰¤ 1 vÃ©geredmÃ©ny</label>
      <div class="explanation">ElsÅ‘ lÃ©pÃ©s: 2x + 4 â‰¤ 6 marad, majd 2x â‰¤ 2 â†’ x â‰¤ 1.</div>
    </div>
    <!-- 3 -->
    <div class="question" data-answer="c">
      <h3>3. Mi a visszavezetett forma: 3(x âˆ’ 1) â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q3" value="a">3x + 3 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q3" value="b">x âˆ’ 1 â‰¥ 0</label>
      <label class="answer-option"><input type="radio" name="q3" value="c">3x âˆ’ 3 â‰¤ 0</label>
      <div class="explanation">3(xâˆ’1)=3xâˆ’3 â‰¤0, visszavezetett lineÃ¡ris forma.</div>
    </div>
    <!-- 4 -->
    <div class="question" data-answer="a">
      <h3>4. Oldd meg: 5(x + 2) â‰¤ 0 â€“ elÅ‘szÃ¶r visszavezetÃ©s utÃ¡ni forma?</h3>
      <label class="answer-option"><input type="radio" name="q4" value="a">5x + 10 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q4" value="b">x + 2 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q4" value="c">5x â‰¤ âˆ’10</label>
      <div class="explanation">SzÃ©tosztÃ¡s: 5x+10 â‰¤0, majd 5x â‰¤ âˆ’10 â†’ x â‰¤ âˆ’2.</div>
    </div>
    <!-- 5 -->
    <div class="question" data-answer="a">
      <h3>5. Igaz-e, hogy (xâˆ’3)/2 â‰¤ 0 visszavezethetÅ‘  xâˆ’3 â‰¤ 0 formÃ¡ra?</h3>
      <label class="answer-option"><input type="radio" name="q5" value="a">Igen, megszorozzuk 2-vel</label>
      <label class="answer-option"><input type="radio" name="q5" value="b">Nem, irÃ¡nyvÃ¡ltÃ¡s miatt</label>
      <label class="answer-option"><input type="radio" name="q5" value="c">Csak ha x pozitÃ­v</label>
      <div class="explanation">2>0 miatt irÃ¡ny nem vÃ¡ltozik: xâˆ’3 â‰¤ 0.</div>
    </div>
    <!-- 6 -->
    <div class="question" data-answer="b">
      <h3>6. Hogyan szabadulunk meg a mÃ­nusz elÅ‘jeltÅ‘l: âˆ’(x + 4) â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q6" value="a">x + 4 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q6" value="b">âˆ’x âˆ’ 4 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q6" value="c">x + 4 â‰¥ 0</label>
      <div class="explanation">SzÃ©tosztjuk: âˆ’xâˆ’4 â‰¤0 â†’ âˆ’x â‰¤4 â†’ x â‰¥ âˆ’4.</div>
    </div>
    <!-- 7 -->
    <div class="question" data-answer="a">
      <h3>7. VisszavezetÃ©s: 2âˆ’ x â‰¤ 0 â†’?</h3>
      <label class="answer-option"><input type="radio" name="q7" value="a">âˆ’x â‰¤ âˆ’2</label>
      <label class="answer-option"><input type="radio" name="q7" value="b">x â‰¥ 2</label>
      <label class="answer-option"><input type="radio" name="q7" value="c">x â‰¤ 2</label>
      <div class="explanation">2âˆ’x â‰¤0 â‡’ âˆ’x â‰¤ âˆ’2 â‡’ x â‰¥ 2.</div>
    </div>
    <!-- 8 -->
    <div class="question" data-answer="c">
      <h3>8. Visszavezetett forma: (x/3)âˆ’1 â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q8" value="a">xâˆ’1 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q8" value="b">x â‰¤ 3</label>
      <label class="answer-option"><input type="radio" name="q8" value="c">x/3 â‰¤ 1</label>
      <div class="explanation">ElsÅ‘ lÃ©pÃ©s: x/3 â‰¤1, majd x â‰¤3.</div>
    </div>
    <!-- 9 -->
    <div class="question" data-answer="b">
      <h3>9. Hogyan vezetesd vissza: 4âˆ’2x â‰¥ 0 â†’ ax+b â‰¤0 alakra?</h3>
      <label class="answer-option"><input type="radio" name="q9" value="a">âˆ’2x+4 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q9" value="b">2xâˆ’4 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q9" value="c">4âˆ’2x â‰¤ 0</label>
      <div class="explanation">ÃtrendezÃ©s: 2xâˆ’4 â‰¤0 (szorzÃ³ âˆ’1 csere utÃ¡n).</div>
    </div>
    <!-- 10 -->
    <div class="question" data-answer="c">
      <h3>10. VisszavezetÃ©s utÃ¡n mi x, ha 5âˆ’x/2 â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q10" value="a">x â‰¥ 10</label>
      <label class="answer-option"><input type="radio" name="q10" value="b">x â‰¥ 5</label>
      <label class="answer-option"><input type="radio" name="q10" value="c">x â‰¥ 10</label>
      <div class="explanation">5 â‰¤ x/2 â‡’ x â‰¥ 10.</div>
    </div>
    <!-- 11 -->
    <div class="question" data-answer="a">
      <h3>11. Oldd meg: âˆ’3(x+2) â‰¥ 0 visszavezetett formÃ¡val?</h3>
      <label class="answer-option"><input type="radio" name="q11" value="a">âˆ’3xâˆ’6 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q11" value="b">x+2 â‰¥ 0</label>
      <label class="answer-option"><input type="radio" name="q11" value="c">x â‰¤ âˆ’2</label>
      <div class="explanation">ÃtalakÃ­tÃ¡s: âˆ’3xâˆ’6 â‰¥0 â†’ âˆ’3x â‰¥6 â†’ x â‰¤ âˆ’2.</div>
    </div>
    <!-- 12 -->
    <div class="question" data-answer="c">
      <h3>12. Mi a visszavezetett eredmÃ©ny: (âˆ’x+1)/4 â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q12" value="a">âˆ’x+1 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q12" value="b">xâˆ’1 â‰¥ 0</label>
      <label class="answer-option"><input type="radio" name="q12" value="c">x â‰¥ 1</label>
      <div class="explanation">âˆ’x+1 â‰¤0 â†’ âˆ’x â‰¤ âˆ’1 â†’ x â‰¥1.</div>
    </div>
    <!-- 13 -->
    <div class="question" data-answer="b">
      <h3>13. VisszavezetÃ©s: 0Â·(xâˆ’3) â‰¤ 0 â†’?</h3>
      <label class="answer-option"><input type="radio" name="q13" value="a">x â‰¤ 3</label>
      <label class="answer-option"><input type="radio" name="q13" value="b">minden x</label>
      <label class="answer-option"><input type="radio" name="q13" value="c">nincs megoldÃ¡s</label>
      <div class="explanation">0 â‰¤0 mindig igaz, bÃ¡rmely x.</div>
    </div>
    <!-- 14 -->
    <div class="question" data-answer="c">
      <h3>14. Mely egyenlÅ‘tlensÃ©g NEM vezethetÅ‘ vissza ax+b â‰¤0 formÃ¡ra?</h3>
      <label class="answer-option"><input type="radio" name="q14" value="a">2x+1 â‰¤ 3</label>
      <label class="answer-option"><input type="radio" name="q14" value="b">x/2âˆ’4 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q14" value="c">xÂ·y â‰¤ 0 (kÃ©t vÃ¡ltozÃ³s)</label>
      <div class="explanation">ax+b â‰¤0 csak egy ismeretlenes lineÃ¡ris egyenlÅ‘tlensÃ©g.</div>
    </div>
    <!-- 15 -->
    <div class="question" data-answer="a">
      <h3>15. VisszavezetÃ©s: 7âˆ’2x â‰¤ 1?</h3>
      <label class="answer-option"><input type="radio" name="q15" value="a">âˆ’2x â‰¤ âˆ’6</label>
      <label class="answer-option"><input type="radio" name="q15" value="b">7âˆ’2x â‰¥ 1</label>
      <label class="answer-option"><input type="radio" name="q15" value="c">x â‰¥ 3</label>
      <div class="explanation">7âˆ’2x â‰¤1 â†’ âˆ’2x â‰¤ âˆ’6 â†’ x â‰¥3.</div>
    </div>
    <!-- 16 -->
    <div class="question" data-answer="b">
      <h3>16. Melyik visszavezetÃ©s helyes: (2xâˆ’4)/2 â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q16" value="a">2xâˆ’4 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q16" value="b">xâˆ’2 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q16" value="c">xâˆ’2 â‰¥ 0</label>
      <div class="explanation">OsztÃ¡s 2-vel: xâˆ’2 â‰¤0.</div>
    </div>
    <!-- 17 -->
    <div class="question" data-answer="c">
      <h3>17. Oldd meg: âˆ’(3x+3) â‰¤ 0 visszavezetÃ©ssel?</h3>
      <label class="answer-option"><input type="radio" name="q17" value="a">3x+3 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q17" value="b">x+1 â‰¥ 0</label>
      <label class="answer-option"><input type="radio" name="q17" value="c">3x+3 â‰¥ 0</label>
      <div class="explanation">âˆ’3xâˆ’3 â‰¤ 0 â†’ âˆ’3x â‰¤ 3 â†’ x â‰¥ âˆ’1.</div>
    </div>
    <!-- 18 -->
    <div class="question" data-answer="a">
      <h3>18. Mi a visszavezetett forma: (xâˆ’5)/âˆ’2 â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q18" value="a">xâˆ’5 â‰¥ 0</label>
      <label class="answer-option"><input type="radio" name="q18" value="b">xâˆ’5 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q18" value="c">x â‰¤ 5</label>
      <div class="explanation">NegatÃ­v osztÃ¡s fordÃ­tja az irÃ¡nyt: xâˆ’5 â‰¥0 â†’ x â‰¥5.</div>
    </div>
    <!-- 19 -->
    <div class="question" data-answer="b">
      <h3>19. Melyik visszavezetÃ©s eredmÃ©nye x â‰¤ âˆ’2?</h3>
      <label class="answer-option"><input type="radio" name="q19" value="a">2x+4 â‰¥ 0</label>
      <label class="answer-option"><input type="radio" name="q19" value="b">2x+4 â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q19" value="c">2xâˆ’4 â‰¤ 0</label>
      <div class="explanation">2x+4 â‰¤0 â†’ 2x â‰¤ âˆ’4 â†’ x â‰¤ âˆ’2.</div>
    </div>
    <!-- 20 -->
    <div class="question" data-answer="b">
      <h3>20. Oldd meg: (âˆ’x)/3 + 2 â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q20" value="a">x â‰¥ 6</label>
      <label class="answer-option"><input type="radio" name="q20" value="b">x â‰¥ 6</label>
      <label class="answer-option"><input type="radio" name="q20" value="c">x â‰¤ âˆ’6</label>
      <div class="explanation">âˆ’x/3 â‰¤ âˆ’2 â†’ x/3 â‰¥2 â†’ x â‰¥6.</div>
    </div>
    <!-- 21 -->
    <div class="question" data-answer="c">
      <h3>21. Ha 4âˆ’x â‰¤ 2x + 1, visszavezetett egyenlÅ‘tlensÃ©g?</h3>
      <label class="answer-option"><input type="radio" name="q21" value="a">âˆ’x â‰¤ 2xâˆ’3</label>
      <label class="answer-option"><input type="radio" name="q21" value="b">4 â‰¤ 3x+1</label>
      <label class="answer-option"><input type="radio" name="q21" value="c">4âˆ’(2x+1) â‰¤ x</label>
      <div class="explanation">ÃtrendezÃ©s: 4âˆ’xâˆ’2xâˆ’1 â‰¤0 â†’ 3âˆ’3x â‰¤0 â†’ âˆ’3x â‰¤ âˆ’3 â†’ x â‰¥1.</div>
    </div>
    <!-- 22 -->
    <div class="question" data-answer="a">
      <h3>22. VisszavezetÃ©s: 0Â·x + b â‰¤ 0 esetÃ©n b â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q22" value="a">Igaz: b â‰¤ 0</label>
      <label class="answer-option"><input type="radio" name="q22" value="b">x â‰¤ âˆ’b/a</label>
      <label class="answer-option"><input type="radio" name="q22" value="c">Nincs megoldÃ¡s</label>
      <div class="explanation">Egyetlen feltÃ©tel b â‰¤0, x-tÅ‘l fÃ¼ggetlen.</div>
    </div>
    <!-- 23 -->
    <div class="question" data-answer="b">
      <h3>23. Mi tÃ¶rtÃ©nik, ha a < 0 Ã©s ax + b â‰¤ 0?</h3>
      <label class="answer-option"><input type="radio" name="q23" value="a">x â‰¤ âˆ’b/a</label>
      <label class="answer-option"><input type="radio" name="q23" value="b">irÃ¡nya fordul: x â‰¥ âˆ’b/a</label>
      <label class="answer-option"><input type="radio" name="q23" value="c">nincs megoldÃ¡s</label>
      <div class="explanation">NegatÃ­v a esetÃ©n ax + b â‰¤0 â†’ x â‰¥ âˆ’b/a.</div>
    </div>
    <!-- 24 -->
    <div class="question" data-answer="c">
      <h3>24. Melyik lÃ©pÃ©s NEM visszavezetÃ©s?</h3>
      <label class="answer-option"><input type="radio" name="q24" value="a">SzorzÃ¡s felbontÃ¡s</label>
      <label class="answer-option"><input type="radio" name="q24" value="b">ÃtrendezÃ©s</label>
      <label class="answer-option"><input type="radio" name="q24" value="c">NegatÃ­v hatvÃ¡nyozÃ¡s</label>
      <div class="explanation">NegatÃ­v hatvÃ¡nyozÃ¡s nem lineÃ¡ris transzformÃ¡ciÃ³.</div>
    </div>
    <!-- 25 -->
    <div class="question" data-answer="a">
      <h3>25. Visszavezetett forma: (ax+b)/c â‰¤0?</h3>
      <label class="answer-option"><input type="radio" name="q25" value="a">ax+b â‰¤0 (ha c>0)</label>
      <label class="answer-option"><input type="radio" name="q25" value="b">ax+b â‰¥0</label>
      <label class="answer-option"><input type="radio" name="q25" value="c">nincs visszavezetÃ©s</label>
      <div class="explanation">PozitÃ­v c esetÃ©n egyszerÅ± osztÃ¡s â†’ ax+b â‰¤0.</div>
    </div>

    <!-- PIN AREA -->
    <div class="pin-area">
      <h3>ğŸ” PIN-kÃ³d ellenÅ‘rzÃ©s</h3>
      <p>Ãrd be a 6 szÃ¡mjegyÅ± PIN-kÃ³dot, majd Enter vagy â€EllenÅ‘rzÃ©sâ€!</p>
      <input type="text" id="pinInput" maxlength="6" placeholder="PIN-kÃ³d" />
      <br><br>
      <button type="button" class="btn" id="checkBtn">ğŸ” EllenÅ‘rzÃ©s</button>
      <button type="button" class="btn btn-master" id="masterBtn" style="display:none;">ğŸ”‘ Mester kiÃ©rtÃ©kelÃ©s</button>
    </div>

    <!-- SCORE -->
    <div class="score-box" id="scoreBox">
      <h2>ğŸ“Š EredmÃ©ny</h2>
      <div class="score" id="finalScore">0 / 25</div>
      <p id="performance"></p>
    </div>

    <!-- ADMIN PANEL -->
    <div class="admin-panel" id="adminPanel">
      <h3>ğŸ› ï¸ Admin panel</h3>
      <pre id="adminData"></pre>
    </div>
  </form>

  <script>
  (function(){
    const MASTER_PIN="121909";
    const STUDENT_PINS=Array.from({length:20},(_,i)=>String(100001+i));

    const pinInput=document.getElementById('pinInput');
    const masterMode=document.getElementById('masterMode');
    const masterBtn=document.getElementById('masterBtn');
    const checkBtn=document.getElementById('checkBtn');
    const progressBar=document.getElementById('progressBar').firstElementChild;
    const scoreBox=document.getElementById('scoreBox');
    const finalScore=document.getElementById('finalScore');
    const performance=document.getElementById('performance');
    const adminPanel=document.getElementById('adminPanel');
    const adminData=document.getElementById('adminData');

    let isMaster=false;

    function highlightCorrect(){
      document.querySelectorAll('.question').forEach(q=>{
        q.querySelectorAll('.answer-option').forEach(op=>{
          op.classList.toggle('master-correct',
            op.querySelector('input').value===q.dataset.answer);
        });
      });
    }
    function removeHighlight(){
      document.querySelectorAll('.master-correct')
        .forEach(el=>el.classList.remove('master-correct'));
    }

    pinInput.addEventListener('input',()=>{
      isMaster=pinInput.value.trim()===MASTER_PIN;
      masterMode.style.display=isMaster?'block':'none';
      masterBtn.style.display=isMaster?'inline-block':'none';
      checkBtn.style.display=isMaster?'none':'inline-block';
      document.querySelectorAll('.explanation')
              .forEach(e=>e.classList.toggle('show',isMaster));
      isMaster?highlightCorrect():removeHighlight();
    });

    function updateProgress(){
      const answered=[...document.querySelectorAll('.question')]
        .filter(q=>[...q.querySelectorAll('input')].some(i=>i.checked)).length;
      progressBar.style.width=(answered/25*100)+'%';
    }
    document.querySelectorAll('input[type="radio"]')
            .forEach(r=>r.addEventListener('change',updateProgress));

    function evaluate(master=false){
      let correct=0,log=[];
      document.querySelectorAll('.question').forEach((q,i)=>{
        const ans=q.dataset.answer;
        const sel=q.querySelector('input:checked')?.value||null;
        q.querySelectorAll('.answer-option').forEach(op=>{
          const inp=op.querySelector('input');
          inp.disabled=true;
          op.classList.remove('master-correct');
          if(inp.value===ans){
            op.classList.add('correct');
            if(sel===ans) correct++;
          } else if(inp.checked){
            op.classList.add('wrong');
          }
        });
        q.querySelector('.explanation').classList.add('show');
        log.push(`Q${i+1}: ${sel||'â€“'} | helyes: ${ans}`);
      });
      progressBar.style.width='100%';
      const pct=Math.round(correct/25*100);
      finalScore.textContent=`${correct} / 25`;
      performance.textContent=
        pct>=92?'ğŸ† KivÃ¡lÃ³!'
        :pct>=80?'ğŸ‘ NagyszerÅ±!'
        :pct>=60?'ğŸ“š KÃ¶zepes, gyakorolj!'
        :'ğŸ’ª PrÃ³bÃ¡ld Ãºjra!';
      performance.style.color=pct>=80?'#28a745':pct>=60?'#ffc107':'#dc3545';
      scoreBox.style.display='block';
      if(master){
        adminPanel.style.display='block';
        adminData.textContent=log.join('\n')+`\n\nPontossÃ¡g: ${pct}%`;
      }
    }

    checkBtn.onclick=()=>{
      const pin=pinInput.value.trim();
      if(!STUDENT_PINS.includes(pin)){
        alert('âŒ Ã‰rvÃ©nytelen PIN!'); return;
      }
      if(![...document.querySelectorAll('.question')]
          .every(q=>q.querySelector('input:checked'))){
        alert('âš ï¸ Minden kÃ©rdÃ©sre vÃ¡laszolj!'); return;
      }
      evaluate(false);
    };
    masterBtn.onclick=()=>evaluate(true);
    pinInput.addEventListener('keydown',e=>{
      if(e.key==='Enter'){
        e.preventDefault();
        (isMaster?masterBtn:checkBtn).click();
      }
    });
  })();
  </script>
</body>
</html>
