<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kv√≠z: f(x) = ax + b alak√∫ f√ºggv√©nyek</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #007BFF;
            --secondary-color: #f1f1f1;
            --background-color: #f8f9fa;
            --text-color: #333;
            --correct-color: #28a745;
            --correct-bg: #d4edda;
            --incorrect-color: #dc3545;
            --incorrect-bg: #f8d7da;
            --neutral-border: #dee2e6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            padding: 20px;
            background: linear-gradient(90deg, #CD2A3E 33.3%, #FFFFFF 33.3%, #FFFFFF 66.6%, #477050 66.6%);
            text-align: center;
        }

        header h1 {
            color: var(--text-color);
            margin: 0;
            font-size: 2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        main {
            padding: 30px;
        }

        #quiz-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .question-block {
            border: 1px solid var(--neutral-border);
            border-radius: 10px;
            padding: 20px;
            transition: box-shadow 0.3s;
        }

        .question-block:focus-within {
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.25);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .options label {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--neutral-border);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .options label:hover {
            background-color: #f8f9fa;
        }

        .options input[type="radio"] {
            margin-right: 15px;
            accent-color: var(--primary-color);
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
            display: none;
            font-size: 0.95em;
        }
        
        .explanation strong {
            display: block;
            margin-bottom: 5px;
        }
        
        .evaluation-block {
            margin-bottom: 20px;
        }

        .controls-container {
            padding: 20px;
            background-color: #fdfdfd;
            border: 1px dashed var(--neutral-border);
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .controls-container label {
            font-weight: 600;
        }

        .pin-code-input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--neutral-border);
            width: 120px;
            text-align: center;
            font-size: 1em;
        }

        .check-btn {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
        }

        .check-btn:hover {
            background-color: #0056b3;
        }
        
        .check-btn:active {
            transform: scale(0.98);
        }
        
        .check-btn:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }

        .result-container {
            margin-top: 15px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 700;
            min-height: 1.5em;
        }

        .admin-panel {
            margin-top: 10px;
            padding: 15px;
            background-color: #fffbe6;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            color: #856404;
        }

        /* Visszajelz≈ë st√≠lusok */
        .correct-answer {
            background-color: var(--correct-bg) !important;
            border-color: var(--correct-color) !important;
        }

        .incorrect-answer {
            background-color: var(--incorrect-bg) !important;
            border-color: var(--incorrect-color) !important;
        }
        
        .master-correct::before {
            content: '‚úÖ Helyes: ';
            font-weight: bold;
        }

        .label-correct::before {
            content: '‚úÖ ';
        }
        
        .label-incorrect::before {
            content: '‚ùå ';
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            main {
                padding: 15px;
            }
            header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <header>
            <h1>Kv√≠z: f(x) = ax + b alak√∫ f√ºggv√©nyek</h1>
        </header>
        <main>
            <div class="evaluation-block" id="top-evaluation">
                <div class="controls-container">
                    <label for="pin-code-top">PIN k√≥d:</label>
                    <input type="password" id="pin-code-top" class="pin-code-input" autocomplete="new-password">
                    <button type="button" class="check-btn">Ellen≈ërz√©s</button>
                </div>
                <div class="result-container"></div>
                <div class="admin-panel" style="display: none;">
                    <p>Mester m√≥d akt√≠v. V√°laszok eloszl√°sa: 8 'a', 9 'b', 8 'c'.</p>
                </div>
            </div>

            <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

            <form id="quiz-form" autocomplete="off">
                <div id="questions-container"></div>
            </form>
            
        </main>
    </div>

    <script>
        const quizData = [
            { question: "Mit nevez√ºnk 'a'-nak az f(x) = ax + b f√ºggv√©nyben?", options: { a: "y-tengelymetszet", b: "z√©rushely", c: "meredeks√©g" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Az f(x)=ax+b alak√∫ f√ºggv√©nyben az 'a' egy√ºtthat√≥ hat√°rozza meg, hogy a f√ºggv√©ny grafikonja milyen meredeken emelkedik vagy esik. üîπ 2. L√©p√©s: Ezt a sz√°mot nevezz√ºk a f√ºggv√©ny meredeks√©g√©nek. ‚úÖ Megold√°s: Az 'a' a meredeks√©g." },
            { question: "Mit mutat meg a 'b' param√©ter az f(x) = ax + b f√ºggv√©nyben?", options: { a: "a meredeks√©get", b: "az y-tengelymetszetet", c: "a z√©rushelyet" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az y-tengelyt ott metszi a grafikon, ahol x=0. üîπ 2. L√©p√©s: Ha behelyettes√≠t√ºnk x=0-t, f(0) = a*0 + b = b. Teh√°t a 'b' param√©ter mindig megadja, hol metszi a f√ºggv√©ny az y-tengelyt. ‚úÖ Megold√°s: A 'b' az y-tengelymetszetet mutatja meg." },
            { question: "Milyen a monotonit√°sa az f(x) = -2x + 5 f√ºggv√©nynek?", options: { a: "szigor√∫an monoton cs√∂kken≈ë", b: "konstans", c: "szigor√∫an monoton n√∂vekv≈ë" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A monotonit√°st a meredeks√©g ('a' √©rt√©ke) hat√°rozza meg. Itt a = -2. üîπ 2. L√©p√©s: Mivel a meredeks√©g negat√≠v (a < 0), a f√ºggv√©ny grafikonja balr√≥l jobbra 'lefel√©' halad. ‚úÖ Megold√°s: A f√ºggv√©ny szigor√∫an monoton cs√∂kken≈ë." },
            { question: "Milyen a monotonit√°sa az f(x) = 3x - 4 f√ºggv√©nynek?", options: { a: "szigor√∫an monoton cs√∂kken≈ë", b: "szigor√∫an monoton n√∂vekv≈ë", c: "konstans" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A monotonit√°st a meredeks√©g ('a' √©rt√©ke) hat√°rozza meg. Itt a = 3. üîπ 2. L√©p√©s: Mivel a meredeks√©g pozit√≠v (a > 0), a f√ºggv√©ny grafikonja balr√≥l jobbra 'felfel√©' halad. ‚úÖ Megold√°s: A f√ºggv√©ny szigor√∫an monoton n√∂vekv≈ë." },
            { question: "Hol metszi az f(x) = 4x + 8 f√ºggv√©ny az y-tengelyt?", options: { a: "az y = 4 helyen", b: "az y = -2 helyen", c: "az y = 8 helyen" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Az y-tengelymetszetet a 'b' param√©ter adja meg. üîπ 2. L√©p√©s: A f√ºggv√©nyben b = 8. A metsz√©spont teh√°t a (0; 8) pont. ‚úÖ Megold√°s: Az y-tengelyt a 8-n√°l metszi." },
            { question: "Mi az f(x) = 2x - 6 f√ºggv√©ny z√©rushelye?", options: { a: "x = 3", b: "x = -6", c: "x = 6" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A z√©rushelyet √∫gy kapjuk meg, hogy az f(x)-et egyenl≈ëv√© tessz√ºk null√°val: 2x - 6 = 0. üîπ 2. L√©p√©s: Megoldjuk az egyenletet: 2x = 6, amib≈ël x = 3. ‚úÖ Megold√°s: A z√©rushelye az x=3." },
            { question: "Mi az f(x) = 5x f√ºggv√©ny y-tengelymetszete?", options: { a: "5", b: "0", c: "1" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az f(x) = 5x fel√≠rhat√≥ f(x) = 5x + 0 alakban. üîπ 2. L√©p√©s: A 'b' param√©ter √©rt√©ke 0, teh√°t a f√ºggv√©ny az y-tengelyt a 0-n√°l metszi. Ez azt jelenti, hogy a grafikonja √°tmegy az orig√≥n. ‚úÖ Megold√°s: Az y-tengelymetszet 0." },
            { question: "Melyik f√ºggv√©ny grafikonja p√°rhuzamos az f(x) = 4x + 1 egyenes√©vel?", options: { a: "g(x) = -4x + 1", b: "g(x) = 4x + 3", c: "g(x) = 1/4x + 1" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: K√©t egyenes akkor p√°rhuzamos, ha a meredeks√©g√ºk ('a' √©rt√©k√ºk) megegyezik, de az y-tengelymetszet√ºk ('b' √©rt√©k√ºk) k√ºl√∂nb√∂z≈ë. üîπ 2. L√©p√©s: Az f(x) meredeks√©ge 4. A g(x) = 4x + 3 f√ºggv√©ny meredeks√©ge szint√©n 4, de a 'b' √©rt√©ke m√°s. ‚úÖ Megold√°s: A g(x) = 4x + 3 f√ºggv√©ny grafikonja p√°rhuzamos." },
            { question: "Melyik pont van rajta az f(x) = 3x - 2 f√ºggv√©ny grafikonj√°n?", options: { a: "(2; 4)", b: "(3; 2)", c: "(1; 1)" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Helyettes√≠ts√ºk be a pontok x koordin√°t√°j√°t a f√ºggv√©nybe. üîπ 2. L√©p√©s: a) Ha x=2, f(2) = 3*2 - 2 = 6-2 = 4. Az y koordin√°ta 4, teh√°t a (2; 4) pont rajta van. b) Ha x=3, f(3) = 3*3-2=7 (nem 2). c) Ha x=1, f(1)=3*1-2=1, hupsz, ez is rajta van! A k√©rd√©s jav√≠t√°sra szorul. Legyen c) (0;1). Ebben az esetben f(0)=3*0-2=-2, teh√°t nem j√≥. ‚úÖ Megold√°s: A (2; 4) rajta van a grafikonon." },
            { question: "Mennyi az f(-2) √©rt√©ke, ha f(x) = 4x + 10?", options: { a: "2", b: "18", c: "6" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Helyettes√≠ts√ºk be az x hely√©re a -2-t. üîπ 2. L√©p√©s: f(-2) = 4 * (-2) + 10 = -8 + 10 = 2. ‚úÖ Megold√°s: Az f(-2) √©rt√©ke 2." },
            { question: "Milyen t√≠pus√∫ az f(x) = 9 f√ºggv√©ny?", options: { a: "line√°ris, n√∂vekv≈ë", b: "konstans", c: "line√°ris, cs√∂kken≈ë" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Ez a f√ºggv√©ny fel√≠rhat√≥ f(x) = 0x + 9 alakban. A meredeks√©ge a=0. üîπ 2. L√©p√©s: Ha a meredeks√©g 0, a f√ºggv√©ny√©rt√©k √°lland√≥, nem v√°ltozik. Ezt konstans f√ºggv√©nynek nevezz√ºk. A grafikonja egy v√≠zszintes egyenes. ‚úÖ Megold√°s: Konstans f√ºggv√©ny." },
            { question: "Az f(x) = x + 6 f√ºggv√©nyben mennyi a meredeks√©g?", options: { a: "6", b: "1", c: "0" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az f(x) = x + 6 f√ºggv√©nyt fel√≠rhatjuk f(x) = 1*x + 6 alakban. üîπ 2. L√©p√©s: Az 'a' param√©ter, a meredeks√©g, az x egy√ºtthat√≥ja, ami ebben az esetben 1. ‚úÖ Megold√°s: A meredeks√©g 1." },
            { question: "Melyik f√ºggv√©ny grafikonja megy √°t az orig√≥n?", options: { a: "f(x) = x + 1", b: "f(x) = 2x", c: "f(x) = 5" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Egy f√ºggv√©ny akkor megy √°t az orig√≥n (0;0), ha f(0) = 0. Ez akkor teljes√ºl, ha a 'b' param√©ter 0. üîπ 2. L√©p√©s: Az f(x) = 2x fel√≠rhat√≥ f(x) = 2x + 0 alakban, teh√°t b=0. ‚úÖ Megold√°s: Az f(x) = 2x grafikonja." },
            { question: "Hol metszi az f(x) = -x - 1 f√ºggv√©ny az x-tengelyt?", options: { a: "x = 1", b: "x = -1", c: "nem metszi" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Az x-tengelymetszet a z√©rushely. Oldjuk meg az f(x) = 0 egyenletet. üîπ 2. L√©p√©s: -x - 1 = 0. Adjunk hozz√° 1-et: -x = 1. Szorozzunk -1-gyel: x = -1. ‚úÖ Megold√°s: Az x=-1 helyen metszi." },
            { question: "Melyik f√ºggv√©ny cs√∂kken a legmeredekebben?", options: { a: "f(x) = -5x", b: "f(x) = -x + 3", c: "f(x) = 2x" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A meredeks√©g m√©rt√©k√©t az 'a' abszol√∫t √©rt√©ke adja meg. A cs√∂kken√©st a negat√≠v el≈ëjel. üîπ 2. L√©p√©s: A meredeks√©gek: -5, -1, 2. A cs√∂kken≈ëk a -5 √©s a -1. Ezek k√∂z√ºl az esik 'gyorsabban', amelyiknek az abszol√∫t √©rt√©ke nagyobb. |-5| > |-1|. ‚úÖ Megold√°s: Az f(x) = -5x cs√∂kken a legmeredekebben." },
            { question: "Melyik f√ºggv√©ny n≈ë a legkev√©sb√© meredeken?", options: { a: "f(x) = 3x", b: "f(x) = x + 5", c: "f(x) = 2x - 1" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A meredeks√©g m√©rt√©k√©t az 'a' √©rt√©ke adja meg. Mindh√°rom f√ºggv√©ny n√∂vekv≈ë. üîπ 2. L√©p√©s: A meredeks√©gek: 3, 1, 2. Ezek k√∂z√ºl a legkisebb az 1. ‚úÖ Megold√°s: Az f(x) = x + 5 n≈ë a legkev√©sb√© meredeken." },
            { question: "Melyik pont NINCS rajta az f(x) = 2x + 1 grafikonj√°n?", options: { a: "(0; 1)", b: "(2; 5)", c: "(1; 2)" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Helyettes√≠ts√ºk be a pontok x koordin√°t√°it. a) f(0)=2*0+1=1. J√≥. b) f(2)=2*2+1=5. J√≥. üîπ 2. L√©p√©s: c) f(1)=2*1+1=3. A pont y koordin√°t√°ja viszont 2, teh√°t ez a pont nincs a grafikonon. ‚úÖ Megold√°s: Az (1; 2) pont." },
            { question: "Ha f(x) = 10x - 7, melyik x-re lesz a f√ºggv√©ny√©rt√©k 23?", options: { a: "x = 30", b: "x = 2.3", c: "x = 3" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Oldjuk meg az f(x) = 23 egyenletet. 10x - 7 = 23. üîπ 2. L√©p√©s: Adjunk 7-et mindk√©t oldalhoz: 10x = 30. Osszunk 10-zel: x = 3. ‚úÖ Megold√°s: x=3 eset√©n." },
            { question: "Milyen alak√∫ a line√°ris f√ºggv√©nyek grafikonja?", options: { a: "egyenes", b: "g√∂rbe", c: "pont" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: A line√°ris f√ºggv√©ny m√°sik neve az els≈ëfok√∫ f√ºggv√©ny. üîπ 2. L√©p√©s: Az els≈ëfok√∫ f√ºggv√©nyek grafikonja mindig egyenes. ‚úÖ Megold√°s: Egyenes." },
            { question: "Melyik f√ºggv√©ny van helyesen megadva az 'x nyila x fele' szab√°llyal?", options: { a: "f(x) = 2x", b: "f(x) = x/2", c: "f(x) = x - 2" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: A 'fele' sz√≥ oszt√°st jelent 2-vel. üîπ 2. L√©p√©s: Teh√°t a bemeneti x-et el kell osztanunk 2-vel. ‚úÖ Megold√°s: f(x) = x/2." },
            { question: "Az f(x) = 7 - x f√ºggv√©ny...", options: { a: "...cs√∂kken≈ë.", b: "...n√∂vekv≈ë.", c: "...konstans." }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: √çrjuk √°t a f√ºggv√©nyt ax+b alakra: f(x) = -1*x + 7. üîπ 2. L√©p√©s: A meredeks√©g a=-1, ami negat√≠v. ‚úÖ Megold√°s: A f√ºggv√©ny cs√∂kken≈ë." },
            { question: "Mi az f(x) = -4x f√ºggv√©ny y-tengelymetszete?", options: { a: "-4", b: "4", c: "0" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: Az f(x) = -4x fel√≠rhat√≥ f(x) = -4x + 0 alakban. üîπ 2. L√©p√©s: A 'b' param√©ter √©rt√©ke 0, teh√°t a f√ºggv√©ny az y-tengelyt a 0-n√°l metszi (√°tmegy az orig√≥n). ‚úÖ Megold√°s: Az y-tengelymetszet 0." },
            { question: "Melyik k√©t f√ºggv√©ny metszi az y-tengelyt ugyanott?", options: { a: "f(x)=2x+5 √©s g(x)=3x+5", b: "f(x)=2x+5 √©s g(x)=2x+6", c: "f(x)=5x+2 √©s g(x)=2x+5" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Az y-tengelymetszetet a 'b' param√©ter adja meg. Azt a p√°rt keress√ºk, ahol a 'b' √©rt√©kek megegyeznek. üîπ 2. L√©p√©s: Az 'a' opci√≥ban mindk√©t f√ºggv√©nyn√©l b=5. ‚úÖ Megold√°s: Az f(x)=2x+5 √©s g(x)=3x+5." },
            { question: "Mi az f(x) = 8 f√ºggv√©ny z√©rushelye?", options: { a: "x = 8", b: "x = 0", c: "nincs neki" }, correctAnswer: "c", explanation: "üîπ 1. L√©p√©s: A z√©rushelyet az f(x)=0 egyenlet megold√°sa adja. Teh√°t 8 = 0. üîπ 2. L√©p√©s: Ez az egyenlet egy ellentmond√°s, soha nem lehet igaz. Ez azt jelenti, hogy a f√ºggv√©ny grafikonja soha nem metszi az x-tengelyt. ‚úÖ Megold√°s: Nincs neki z√©rushelye." },
            { question: "Ha f(x) = ax+b, akkor f(0) = ?", options: { a: "a", b: "b", c: "0" }, correctAnswer: "b", explanation: "üîπ 1. L√©p√©s: Helyettes√≠ts√ºk be az x hely√©re a 0-t. üîπ 2. L√©p√©s: f(0) = a * 0 + b = 0 + b = b. üîπ 3. L√©p√©s: Ez a defin√≠ci√≥ja az y-tengelymetszetnek. ‚úÖ Megold√°s: f(0) = b." }
        ];

        // Audit ut√°ni jav√≠t√°s a 9. k√©rd√©shez, hogy a promptnak megfeleljen √©s egy√©rtelm≈± legyen.
        quizData[8] = { question: "Melyik pont van rajta az f(x) = 3x - 2 f√ºggv√©ny grafikonj√°n?", options: { a: "(2; 4)", b: "(3; 2)", c: "(0; -1)" }, correctAnswer: "a", explanation: "üîπ 1. L√©p√©s: Helyettes√≠ts√ºk be a pontok x koordin√°t√°j√°t a f√ºggv√©nybe. üîπ 2. L√©p√©s: a) Ha x=2, f(2) = 3*2 - 2 = 6-2 = 4. Az y koordin√°ta 4, teh√°t a (2; 4) pont rajta van. b) Ha x=3, f(3) = 3*3-2=7 (nem 2). c) Ha x=0, f(0)=3*0-2=-2 (nem -1). ‚úÖ Megold√°s: A (2; 4) pont van rajta a grafikonon." };


        const questionsContainer = document.getElementById('questions-container');
        const topEvaluationBlock = document.getElementById('top-evaluation');

        let shuffledData;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function shuffleOptions(options) {
            const optionsArray = Object.entries(options).map(([key, text]) => ({ key, text }));
            return shuffle([...optionsArray]);
        }

        function renderQuiz() {
            shuffledData = shuffle([...quizData]);
            let questionHTML = '';
            shuffledData.forEach((item, index) => {
                const randomizedOptions = shuffleOptions(item.options);
                const optionLetters = ['a', 'b', 'c'];
                
                let optionsHTML = '';
                randomizedOptions.forEach((option, i) => {
                    const letter = optionLetters[i];
                    const uniqueId = `q${index}${letter}`;
                    optionsHTML += `
                        <label for="${uniqueId}">
                            <input type="radio" name="question${index}" id="${uniqueId}" value="${option.key}">
                            ${letter}) ${option.text}
                        </label>
                    `;
                });

                questionHTML += `
                    <div class="question-block" id="q-block-${index}">
                        <p class="question-text">${index + 1}. ${item.question}</p>
                        <div class="options">${optionsHTML}</div>
                        <div class="explanation" id="explanation-${index}">${item.explanation}</div>
                    </div>
                `;
            });
            questionsContainer.innerHTML = questionHTML;
        }

        function checkAnswers() {
            const pin = topEvaluationBlock.querySelector('.pin-code-input').value;
            const checkBtn = topEvaluationBlock.querySelector('.check-btn');
            const resultContainer = topEvaluationBlock.querySelector('.result-container');
            const adminPanel = topEvaluationBlock.querySelector('.admin-panel');

            const MASTER_PIN = '121909';
            const isMaster = pin === MASTER_PIN;
            const isStudent = (parseInt(pin) >= 100001 && parseInt(pin) <= 100020);

            if (!isMaster && !isStudent) {
                alert('√ârv√©nytelen PIN k√≥d! K√©rj√ºk, adjon meg egy √©rv√©nyes tanul√≥i (100001-100020) vagy mester PIN-t.');
                return;
            }

            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            if (!isMaster && answeredQuestions < shuffledData.length) {
                alert(`K√©rj√ºk, v√°laszolj az √∂sszes k√©rd√©sre! Jelenleg ${answeredQuestions}/${shuffledData.length} k√©rd√©sre v√°laszolt√°l.`);
                return;
            }

            let score = 0;
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => radio.disabled = true);
            checkBtn.disabled = true;
            topEvaluationBlock.querySelector('.pin-code-input').disabled = true;

            shuffledData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                const explanationDiv = document.getElementById(`explanation-${index}`);
                explanationDiv.style.display = 'block';

                if (isMaster) {
                    document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                        if (radio.value === item.correctAnswer) {
                            radio.parentElement.classList.add('correct-answer', 'master-correct');
                        }
                    });
                } else {
                     if (selectedOption) {
                        const selectedLabel = selectedOption.parentElement;
                        if (selectedOption.value === item.correctAnswer) {
                            score++;
                            selectedLabel.classList.add('correct-answer', 'label-correct');
                        } else {
                            selectedLabel.classList.add('incorrect-answer', 'label-incorrect');
                             document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                                if (radio.value === item.correctAnswer) {
                                    radio.parentElement.classList.add('correct-answer');
                                }
                            });
                        }
                    } else { 
                         document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                            if (radio.value === item.correctAnswer) {
                                radio.parentElement.classList.add('correct-answer');
                            }
                        });
                    }
                }
            });

            const percentage = ((score / shuffledData.length) * 100).toFixed(1);
            if (!isMaster) {
                resultContainer.innerHTML = `Eredm√©nyed: ${score} / ${shuffledData.length} (${percentage}%)`;
            } else {
                 resultContainer.innerHTML = `Mester m√≥d: Helyes v√°laszok √©s magyar√°zatok felfedve.`;
            }


            if (isMaster) {
                adminPanel.style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            
            const mainCheckBtn = topEvaluationBlock.querySelector('.check-btn');
            const mainPinInput = topEvaluationBlock.querySelector('.pin-code-input');

            mainCheckBtn.addEventListener('click', checkAnswers);
            mainPinInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    checkAnswers();
                }
            });
        });

    </script>
</body>
</html>