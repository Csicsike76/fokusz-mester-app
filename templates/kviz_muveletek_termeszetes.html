<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kvíz: Műveletek természetes számokkal</title>
  <style>
    :root {
      --primary-color: #D9534F;
      --secondary-color: #fcf8e3;
      --accent-color: #5BC0DE;
      --text-dark: #333;
      --text-light: #fff;
      --border-color: #ddd;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f7f9;
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, #D9534F, #fcf8e3, #5BC0DE);
      padding: 1.5rem 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      color: var(--text-dark);
      text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
    }
    main {
      flex: 1;
      max-width: 900px;
      margin: 2rem auto;
      background: var(--text-light);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .question-block {
      margin-bottom: 1.8rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }
    .answers label {
      display: block;
      margin-bottom: 0.5rem;
      cursor: pointer;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.2s;
      border: 1px solid transparent;
    }
    .answers label:hover {
        background-color: #f0f0f0;
    }
    .answers input[type="radio"] {
      margin-right: 0.8em;
      accent-color: var(--primary-color);
    }
    .answers label.correct {
      background-color: #dff0d8;
      border-color: #d6e9c6;
      font-weight: bold;
    }
    .answers label.incorrect {
      background-color: #f2dede;
      border-color: #ebccd1;
    }
    .explanation {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem 1rem;
      background-color: #f7f7fa;
      border-left: 4px solid var(--primary-color);
      border-radius: 4px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .controls, .pin-section {
      text-align: center;
      padding: 1.5rem;
      background-color: #f9fafb;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    .pin-input {
      width: 140px;
      padding: 10px;
      font-size: 1.1em;
      text-align: center;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      margin-right: 10px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      background-color: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #c9302c;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #result {
      margin-top: 1.5rem;
      font-weight: bold;
      font-size: 1.3em;
      text-align: center;
    }
    .admin-panel {
      display: none;
      margin-top: 2rem;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      background-color: #fffde7;
      border-radius: 8px;
    }
    @media (max-width: 600px) {
      main { padding: 1.5rem 1rem; }
      header h1 { font-size: 1.4rem; }
    }
  </style>
</head>
<body autocomplete="off">
  
  <header>
    <h1>Kvíz: Műveletek természetes számokkal</h1>
  </header>

  <main>
    <div class="pin-section">
      <input type="password" id="pin" class="pin-input" placeholder="PIN-kód" autocomplete="off">
      <button type="button" id="checkBtn">Ellenőrzés</button>
      <div id="result"></div>
    </div>
    
    <form id="quiz-form" autocomplete="off">
      <!-- A kérdések ide generálódnak -->
    </form>
    
    <div class="admin-panel" id="admin-panel">
      <h3>Adminisztrációs panel</h3>
      <p>Mester PIN-kóddal sikeresen bejelentkezve.</p>
    </div>
  </main>

  <script>
    const MASTER_PIN = '121909';
    const studentPins = new Set();
    function createInitialPins() {
        for (let i = 1; i <= 20; i++) {
            studentPins.add((100000 + i).toString());
        }
    }

    const questions = [
        { q: "Mi a 12 + 8 × 2 kifejezés értéke?", a: "40", b: "28", c: "22", correct: "b", exp: "A műveleti sorrend szerint először a szorzást kell elvégezni, majd az összeadást. 1. Szorzás: 8 × 2 = 16. 2. Összeadás: 12 + 16 = 28." },
        { q: "Melyik tulajdonság miatt igaz, hogy 5 + 9 = 9 + 5?", a: "Asszociativitás (csoportosíthatóság)", b: "Kommutativitás (felcserélhetőség)", c: "Disztributivitás (széttagolhatóság)", correct: "b", exp: "Az összeadás kommutatív tulajdonsága mondja ki, hogy a tagok sorrendje felcserélhető, az összeg nem változik." },
        { q: "Mi a 20 - (5 + 3) kifejezés értéke?", a: "12", b: "18", c: "22", correct: "a", exp: "A műveleti sorrend szerint először a zárójelben lévő műveletet kell elvégezni. 1. Zárójel: 5 + 3 = 8. 2. Kivonás: 20 - 8 = 12." },
        { q: "Mennyi 100 osztva 4-gyel?", a: "25", b: "400", c: "96", correct: "a", exp: "A 100-ban a 4 pontosan 25-ször van meg maradék nélkül. 100 / 4 = 25." },
        { q: "Mi a 15 és a 6 szorzata?", a: "21", b: "9", c: "90", correct: "c", exp: "A szorzás műveletét elvégezve: 15 × 6 = 90." },
        { q: "Melyik állítás igaz az összeadás és a szorzás kapcsolatára?", a: "A szorzás a kivonás megfordítása.", b: "A szorzás az ismételt összeadás rövidítése.", c: "Az összeadás az osztás ismétlése.", correct: "b", exp: "A szorzás (pl. 3 × 4) azt jelenti, hogy a 4-et 3-szor adjuk össze önmagával (4+4+4). Tehát a szorzás az ismételt összeadás egy rövidebb formája." },
        { q: "Mi a 30 / 5 + 2 × 3 eredménye?", a: "12", b: "8", c: "4", correct: "a", exp: "Mivel a szorzás és osztás egyenrangúak, balról jobbra haladunk, majd összeadunk. 1. Osztás: 30 / 5 = 6. 2. Szorzás: 2 × 3 = 6. 3. Összeadás: 6 + 6 = 12." },
        { q: "Mi az összeadás semleges eleme a természetes számok körében?", a: "1", b: "0", c: "Nincs ilyen.", correct: "b", exp: "A 0 az összeadás semleges (vagy neutrális) eleme, mert bármely számhoz hozzáadva a szám értéke nem változik (a + 0 = a)." },
        { q: "Melyik kifejezés értéke 1?", a: "5 - 2 × 2", b: "10 / 5 - 2", c: "(3+3)/3 - 3", correct: "a", exp: "Ellenőrizzük: a) 5 - 4 = 1. b) 2 - 2 = 0. c) 6/3 - 3 = 2-3 = -1. Tehát az 'a' a helyes." },
        { q: "Mi a 123 + 77 összeg?", a: "190", b: "200", c: "210", correct: "b", exp: "A két számot helyiérték szerint összeadva: 123 + 77 = 200." },
        { q: "Ha egy dobozban 12 ceruza van, és veszünk 5 ilyen dobozzal, hány ceruzánk lesz?", a: "17", b: "60", c: "7", correct: "b", exp: "Ez egy szorzási feladat. A ceruzák teljes száma: 12 ceruza/doboz × 5 doboz = 60 ceruza." },
        { q: "Melyik művelet eredménye nem mindig természetes szám, ha két természetes számon végezzük el?", a: "Összeadás", b: "Szorzás", c: "Kivonás", correct: "c", exp: "Az összeadás és szorzás zárt a természetes számok halmazán (az eredmény mindig természetes). A kivonás viszont kivezethet a halmazból, pl. 3 - 5 = -2, ami nem természetes szám." },
        { q: "Mi az (18-3)/5 kifejezés értéke?", a: "15", b: "3", c: "Nem egész szám.", correct: "b", exp: "Először a zárójelben lévő művelet: 18-3=15. Ezután az osztás: 15/5=3." },
        { q: "Mi a 100 - 50 - 25 eredménye?", a: "25", b: "75", c: "125", correct: "a", exp: "Mivel a kivonások egyenrangúak, balról jobbra haladunk. 1. 100-50=50. 2. 50-25=25." },
        { q: "Melyik tulajdonság miatt igaz, hogy 3 × (4 + 5) = 3 × 4 + 3 × 5?", a: "Kommutativitás", b: "Asszociativitás", c: "Disztributivitás", correct: "c", exp: "A szorzás disztributív (széttagolható) az összeadásra nézve. Ez azt jelenti, hogy a zárójelen belüli tagokat külön-külön is megszorozhatjuk." },
        { q: "Mi a 0-val való osztás eredménye?", a: "0", b: "1", c: "Nincs értelmezve", correct: "c", exp: "A nullával való osztás a matematikában nincs értelmezve, mert ellentmondáshoz vezetne. Nem szabad összekeverni azzal, amikor a 0-t osztjuk egy számmal." },
        { q: "Egy teremben 5 sorban 6 szék van. Hány szék van összesen?", a: "11", b: "30", c: "1", correct: "b", exp: "A székek számát a sorok és az egy sorban lévő székek számának szorzatával kapjuk meg: 5 × 6 = 30." },
        { q: "Melyik állítás HAMIS?", a: "a + b = b + a", b: "a - b = b - a", c: "a ⋅ b = b ⋅ a", correct: "b", exp: "Az összeadás és a szorzás kommutatív (felcserélhető). A kivonás viszont nem az, pl. 5-3=2, de 3-5=-2." },
        { q: "Mi a 100 / (10 / 2) eredménye?", a: "5", b: "20", c: "50", correct: "b", exp: "Először a zárójelben lévő osztást végezzük el: 10/2=5. Ezután a külső osztást: 100/5=20." },
        { q: "Mi a szorzás semleges eleme?", a: "0", b: "1", c: "Nincs ilyen.", correct: "b", exp: "Az 1 a szorzás semleges (vagy neutrális) eleme, mert bármely számot 1-gyel szorozva a szám nem változik (a × 1 = a)." },
        { q: "Mi a maradék, ha a 23-at elosztjuk 4-gyel?", a: "5", b: "3", c: "1", correct: "b", exp: "A 23-ban a 4 megvan 5-ször (5×4=20). A maradék 23 - 20 = 3." },
        { q: "Melyik a kakukktojás? (Melyiknek más az értéke?)", a: "10 + 2", b: "3 × 4", c: "24 / 3", correct: "c", exp: "Számoljuk ki az értékeket: a) 10+2=12. b) 3×4=12. c) 24/3=8. A 'c' értéke különbözik a többitől." },
        { q: "Egy utazás 3 napig tartott. Az első nap 150 km-t, a második nap 200 km-t, a harmadik nap 100 km-t tettek meg. Mennyi volt a teljes út?", a: "450 km", b: "350 km", c: "150 km", correct: "a", exp: "A teljes út a napi szakaszok összegéből adódik: 150 + 200 + 100 = 450 km." },
        { q: "Mi a 4 × (25 × 7) szorzat?", a: "700", b: "127", c: "175", correct: "a", exp: "Az asszociativitás (csoportosíthatóság) miatt a szorzás sorrendje tetszőleges. Érdemes először a 4×25-öt kiszámolni, ami 100. Ezután 100×7=700." },
        { q: "Hány darab 5 Ft-os kell 100 Ft kifizetéséhez?", a: "500", b: "20", c: "10", correct: "b", exp: "Ez egy osztási feladat. A darabszámot úgy kapjuk meg, ha a teljes összeget elosztjuk egy érme értékével: 100 / 5 = 20 darab." }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    const quizForm = document.getElementById('quiz-form');
    function populateQuiz() {
      shuffle(questions);
      quizForm.innerHTML = '';
      questions.forEach((item, i) => {
        const block = document.createElement('div');
        block.className = 'question-block';
        block.innerHTML = `
          <div class="question">${i + 1}. ${item.q}</div>
          <div class="answers">
            <label><input type="radio" name="q${i}" value="a"/> a) ${item.a}</label>
            <label><input type="radio" name="q${i}" value="b"/> b) ${item.b}</label>
            <label><input type="radio" name="q${i}" value="c"/> c) ${item.c}</label>
          </div>
          <div class="explanation" id="exp${i}">${item.exp}</div>
        `;
        quizForm.appendChild(block);
      });
    }

    function areAllQuestionsAnswered() {
      for (let i = 0; i < questions.length; i++) {
        if (!quizForm.querySelector(`input[name="q${i}"]:checked`)) return false;
      }
      return true;
    }

    function isPinValid(pin) {
        return pin === MASTER_PIN || studentPins.has(pin);
    }

    function evaluateQuiz(isMaster = false) {
      let score = 0;
      questions.forEach((q, i) => {
        const selectedOption = quizForm.querySelector(`input[name="q${i}"]:checked`);
        const explanation = document.getElementById(`exp${i}`);
        const answerLabels = quizForm.querySelector(`input[name="q${i}"]`).parentElement.parentElement.querySelectorAll('label');
        
        if (selectedOption) {
            const parentLabel = selectedOption.parentElement;
            if (selectedOption.value === q.correct) {
                score++;
                parentLabel.classList.add('correct');
                parentLabel.innerHTML = `✅ ${parentLabel.innerHTML}`;
            } else {
                parentLabel.classList.add('incorrect');
                parentLabel.innerHTML = `❌ ${parentLabel.innerHTML}`;
                const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
                correctLabel.classList.add('correct');
            }
        } else if (isMaster) {
             const correctLabel = answerLabels[q.correct.charCodeAt(0) - 97];
             correctLabel.classList.add('correct');
        }
        
        if (selectedOption || isMaster) {
            explanation.style.display = 'block';
        }
        
        quizForm.querySelectorAll(`input[name="q${i}"]`).forEach(input => input.disabled = true);
      });

      if (isMaster) score = questions.length;
      const percentage = ((score / questions.length) * 100).toFixed(0);
      document.getElementById('result').innerHTML = `Eredmény: <b>${score}/${questions.length}</b> (${percentage}%)`;
      document.getElementById('checkBtn').disabled = true;
      document.getElementById('pin').disabled = true;
    }
    
    function masterMode() {
        questions.forEach((q, i) => {
            const correctRadio = quizForm.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            if (correctRadio) correctRadio.checked = true;
        });
        evaluateQuiz(true);
        document.getElementById('admin-panel').style.display = 'block';
    }

    function checkAnswers() {
        const pin = document.getElementById('pin').value;
        if (!isPinValid(pin)) {
            alert('Érvénytelen PIN-kód! Kérlek, próbáld újra.');
            return;
        }

        if (pin === MASTER_PIN) {
            masterMode();
            return;
        }

        if (!areAllQuestionsAnswered()) {
            alert('Kérlek, válaszolj az összes kérdésre az ellenőrzés előtt!');
            return;
        }
        
        evaluateQuiz();
    }

    document.getElementById('checkBtn').addEventListener('click', checkAnswers);
    document.getElementById('pin').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            checkAnswers();
        }
    });

    // Induláskor
    window.onload = function() {
        createInitialPins();
        populateQuiz();
    };

  </script>
</body>
</html>